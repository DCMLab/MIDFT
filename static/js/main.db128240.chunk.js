(this.webpackJsonpmidft=this.webpackJsonpmidft||[]).push([[0],{344:function(e,t){},345:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(63),r=a.n(s),c=a(7),o=a(17),l=a(11),u=a(9),d=a(424),m=a(426),b=a(430),p=a(428),h=a(429),f=a(431),j=a(86),x=a(10),g=a(110),v=a.n(g),O=a(427),y=a(1),q=Object(x.a)(d.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));function w(e){var t=e.open,a=e.setOpen,i=e.inAnalysisPage;return Object(y.jsx)(m.a,{sx:{flexGrow:1},children:Object(y.jsx)(q,{position:"static",open:t,children:Object(y.jsxs)(b.a,{children:[Object(y.jsx)(O.a,{disabled:!i,color:"inherit","aria-label":"open drawer",onClick:function(){a(!0)},edge:"start",sx:Object(u.a)({mr:2},t&&{display:"none"}),children:Object(y.jsx)(v.a,{})}),Object(y.jsx)(p.a,{variant:"h3",component:"div",sx:{flexGrow:1},children:"Mi_DFT"}),Object(y.jsxs)(f.a,{"aria-label":"outlined button group",children:[Object(y.jsx)(h.a,{component:j.b,to:"/",variant:"contained",disableElevation:!0,children:"Home"}),Object(y.jsx)(h.a,{component:j.b,to:"/theory",variant:"contained",disableElevation:!0,children:"Theory"}),Object(y.jsx)(h.a,{component:j.b,to:"/analysis",variant:"contained",disableElevation:!0,children:"Analysis"})]})]})})})}var C,k,D=a(26),A=a(407),S=a(33),E=a(402),P=a(170),F=a.n(P),M=a(169),W=a.n(M),I=a(168),R=a.n(I),T=a(415),z=0,N=Object(x.a)(p.a)({fontSize:"0.75rem",opacity:.38,fontWeight:500,letterSpacing:.2});function B(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return"".concat(t,":").concat(a<9?"0".concat(a):a)}function G(e,t,a){S.d.cancel(0),a(0),S.d.stop(),z=e.duration;var i=[];e.tracks.forEach((function(e){return e.notes.forEach((function(e){i.push(e)}))})),i.forEach((function(e){e.subdiv=Math.floor(e.time/t)})),(C=new S.b((function(e,t){L.triggerAttackRelease(t.name,t.duration,e,t.velocity),a(t.subdiv)}),[].concat(i)).start(0)).loop=!0,C.loopEnd=z}var L=new S.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function V(e){var t=e.fileName,a=(e.currentWavescapeSubdiv,Object(i.useState)(0)),n=Object(l.a)(a,2),s=n[0],r=n[1];return Object(y.jsxs)(m.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"60%"},children:[Object(y.jsxs)(m.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[Object(y.jsxs)(E.a,{direction:"row",sx:{flexGrow:1,paddingLeft:"10%"},children:[Object(y.jsx)(O.a,{sx:{padding:"0"},onClick:function(){console.log("stop"),S.d.stop(),_()},size:"large",children:Object(y.jsx)(R.a,{fontSize:"large"})}),Object(y.jsx)(O.a,{sx:{padding:"0"},onClick:function(){console.log("pause"),S.d.pause(),_()},size:"large",children:Object(y.jsx)(W.a,{fontSize:"large"})}),Object(y.jsx)(O.a,{sx:{padding:"0"},onClick:function(){console.log("play"),"running"!==S.e.state&&(console.log("state running"),S.e.resume()),S.d.start(),!k&&C&&(k=setInterval((function(){return r(C.progress)}),1e3))},size:"large",children:Object(y.jsx)(F.a,{fontSize:"large"})})]}),Object(y.jsx)(p.a,{color:t?"primary":"error",noWrap:!0,sx:{flexGrow:"2",paddingRight:"10%"},children:t||"No midi file uploaded"})]}),Object(y.jsx)(T.a,{"aria-label":"Playback",size:"small",value:s?100*s:0,onChange:function(e,t){r(t/100),S.d.seconds=t/100*z},sx:{width:"90%"}}),Object(y.jsxs)(m.a,{sx:{display:"flex",width:"90%",alignItems:"center",justifyContent:"space-between",mt:-1},children:[Object(y.jsxs)(N,{children:["-",B(z-s*z)]}),Object(y.jsx)(N,{children:B(z)})]})]})}function _(){clearInterval(k),k=null}L.volume.value=-20;var H=a(2),U=a(3),Q=a(116),J=a(409);function K(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=e.length,s=[],r=0;r<n/2+1;r++){for(var c=0,o=0;o<n;o++)c=J.a(J.e(e[o],J.c(J.e(J.d,-2*J.f*r*o/n))),c);s.push(c)}if(s=s.slice(),t){var l=s[0];0!=l&&(s=s.map((function(e){return J.b(e,l)})))}return a&&s.forEach((function(e){e.re=Math.round(1e4*e.re)/1e4,e.im=Math.round(1e4*e.im)/1e4})),i&&(s=s.map((function(e){return e.toPolar()}))),s}function X(e){for(var t=e[0],a=1;a<e.length;a++){for(var i=[],n=0;n<e[a].length;n++)i.push(J.a(t[n],e[a][n]));t=i.slice()}var s=t[0];return t=t.map((function(e){return J.b(e,s)}))}var Y=a(57),Z=Y.c().domain([0,1]).range(Y.b(0,255,1)),$=function(e,t,a){var i,n,s,r=Math.atan2(t,e);return(r=-r)<0&&(r+=2*Math.PI),r>=0&&r<J.f/3?(i=1,n=3*r/J.f,s=0):r>=J.f/3&&r<2*J.f/3?(i=2-3*r/J.f,n=1,s=0):r>=2*J.f/3&&r<J.f?(i=0,n=1,s=3*r/J.f-2):r>=J.f&&r<4*J.f/3?(i=0,n=4-3*r/J.f,s=1):r>=4*J.f/3&&r<5*J.f/3?(i=3*r/J.f-4,n=0,s=1):r>=5*J.f/3&&r<2*J.f&&(i=1,n=0,s=6-3*r/J.f),{r:i=Z(i),g:n=Z(n),b:s=Z(s),a:Z(a)}};function ee(e){var t=e.toPolar(),a=t.phi,i=t.r;a<0&&(a+=2*J.f);var n=function(e){var t,a,i;return e>=0&&e<J.f/3?(t=1,a=3*e/J.f,i=0):e>=J.f/3&&e<2*J.f/3?(t=2-3*e/J.f,a=1,i=0):e>=2*J.f/3&&e<J.f?(t=0,a=1,i=3*e/J.f-2):e>=J.f&&e<4*J.f/3?(t=0,a=4-3*e/J.f,i=1):e>=4*J.f/3&&e<5*J.f/3?(t=3*e/J.f-4,a=0,i=1):e>=5*J.f/3&&e<2*J.f&&(t=1,a=0,i=6-3*e/J.f),t=Z(t),a=Z(a),i=Z(i),"rgb(".concat(t,", ").concat(a,", ").concat(i,")")}(a).slice(3,-1);return"rgba".concat(n,", ").concat(i,")")}var te=function(){function e(){Object(H.a)(this,e),this.C=0,this.Cs=0,this.D=0,this.Ds=0,this.E=0,this.F=0,this.Fs=0,this.G=0,this.Gs=0,this.A=0,this.As=0,this.B=0}return Object(U.a)(e,[{key:"addNoteDuration",value:function(e,t){switch(e){case"C":this.C+=t;break;case"C#":this.Cs+=t;break;case"D":this.D+=t;break;case"D#":this.Ds+=t;break;case"E":this.E+=t;break;case"F":this.F+=t;break;case"F#":this.Fs+=t;break;case"G":this.G+=t;break;case"G#":this.Gs+=t;break;case"A":this.A+=t;break;case"A#":this.As+=t;break;case"B":this.B+=t}}},{key:"getPcvAsArray",value:function(){return[this.C,this.Cs,this.D,this.Ds,this.E,this.F,this.Fs,this.G,this.Gs,this.A,this.As,this.B]}},{key:"add",value:function(e){this.C=e.C,this.Cs=e.Cs,this.D=e.D,this.Ds=e.Ds,this.E=e.E,this.F=e.F,this.Fs=e.Fs,this.G=e.G,this.Gs=e.Gs,this.A=e.A,this.As=e.As,this.B=e.B}}]),e}();function ae(e,t,a){var i,n=t.noteResolutionValue,s=t.seconds,r=t.useSeconds;i=r?isNaN(s)?1:s:n*(60/a);var c=e.duration,o=[];e.tracks.filter((function(e){return!1===e.instrument.percussion})).forEach((function(e){o.push(ie(e.notes,i,c))}));for(var l=[],u=0;u<o[0].length;u++)l.push(new te);for(var d=0;d<o.length;d++)for(var m=0;m<o[d].length;m++)for(var b=0;b<o[d][m].length;b++){var p=o[d][m][b],h=p.pitch,f=p.duration;l[m].addNoteDuration(h,f)}var j=l.map((function(e){return K(e.getPcvAsArray())})),x=[];x.push(j);for(var g=[],v=x[0],O=1;O<7;O++){for(var y=[],q=0;q<v.length;q++)y.push({x:v[q][O].re,y:v[q][O].im});g.push(y)}return{tracesData:g,resolution:i}}function ie(e,t,a){for(var i=[],n=t,s=function(t){var a=[];e.forEach((function(e){var i=e.time,s=e.duration;if(function(e,t,a,i){if(e>a&&e<a+i||e+t>a&&e+t<a+i||e<=a&&e+t>=a+i)return!0;return!1}(i,s,t,n)){var r={pitch:e.pitch};r.duration=i<t?i+s<t+n?i+s-t:n:i+s<=t+n?s:t+n-i,a.push(r)}})),i.push(a)},r=0;r<a;r+=t)s(r);return i}function ne(e,t){for(var a=[],i=0;i<2*Math.PI*t;i+=.01){var n=10*Math.cos(e/t*i),s=n*Math.cos(i),r=n*Math.sin(i);a.push([s,r])}return a}var se=a(414),re=a(403),ce=a(432),oe=a(433),le=a(417),ue=a.p+"static/media/whole.69e31bd8.svg",de=a.p+"static/media/half.7d756528.svg",me=a.p+"static/media/quarter.a35808dc.svg",be=a.p+"static/media/eighth.347a1769.svg",pe=a.p+"static/media/sixteenth.91907e68.svg";var he=function(e){var t=e.resolutionMode,a=e.setResolutionMode,n=e.retriggerAnalysis,s=Object(i.useState)(!1),r=Object(l.a)(s,2),c=r[0],o=r[1],d=Object(i.useRef)(null);return Object(y.jsx)(m.a,{children:Object(y.jsx)(ce.a,{component:"fieldset",children:Object(y.jsxs)(re.a,{row:!0,defaultValue:"quarter",onChange:function(e){var i=Object(u.a)({},t);switch(i.seconds=parseFloat(d.current.value),e.target.value){case"sixteenth":i.noteResolutionValue=.25,i.useSeconds=!1;break;case"eighth":i.noteResolutionValue=.5,i.useSeconds=!1;break;case"quarter":i.noteResolutionValue=1,i.useSeconds=!1;break;case"half":i.noteResolutionValue=2,i.useSeconds=!1;break;case"whole":i.noteResolutionValue=4,i.useSeconds=!1;break;case"seconds":i.useSeconds=!0}a(i)},"aria-label":"resolution",name:"row-radio-buttons-group",sx:{display:"flex",justifyContent:"space-between"},children:[Object(y.jsx)(oe.a,{value:"sixteenth",control:Object(y.jsx)(se.a,{size:"small"}),label:Object(y.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3)"},src:pe})}),Object(y.jsx)(oe.a,{value:"eighth",control:Object(y.jsx)(se.a,{size:"small"}),label:Object(y.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3) translate(0, 0)"},src:be})}),Object(y.jsx)(oe.a,{value:"quarter",control:Object(y.jsx)(se.a,{size:"small"}),label:Object(y.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(1, 3)"},src:me})}),Object(y.jsx)(oe.a,{value:"half",control:Object(y.jsx)(se.a,{size:"small"}),label:Object(y.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(3.7, 3.2) "},src:de})}),Object(y.jsx)(oe.a,{value:"whole",control:Object(y.jsx)(se.a,{size:"small"}),label:Object(y.jsx)("img",{style:{width:10,height:10,marginTop:0,transform:"scale(1.5, 1)"},src:ue})}),Object(y.jsx)(oe.a,{value:"seconds",control:Object(y.jsx)(se.a,{size:"small"}),label:Object(y.jsx)(le.a,{sx:{minHeight:"4.4rem",maxWidth:"5rem"},error:c,helperText:c&&"Invalid input",label:"in seconds",id:"standard-size-small",defaultValue:"1.5",size:"small",variant:"standard",onChange:function(){var e=Object(u.a)({},t);e.seconds=parseFloat(d.current.value),isNaN(e.seconds)?o(!0):(a(e),o(!1))},inputRef:d})}),Object(y.jsx)(h.a,{variant:"contained",color:"primary",onClick:n,sx:{width:"10%",height:"20%",marginTop:2},children:"Change"})]})})})},fe=a(422),je=a(425),xe=Object(x.a)("li")((function(e){return{margin:e.theme.spacing(.5)}}));function ge(e){var t=e.userPcvs,a=e.setUserPcvs,i=e.rosesMat;return Object(y.jsx)(je.a,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",p:"3px",overflow:"auto",minHeight:"50%",width:"100%"},component:"ul",children:t.map((function(e,n){return Object(y.jsx)(xe,{children:Object(y.jsx)(fe.a,{variant:e.isDisabled?"outlined":"filled",icon:Object(y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(y.jsx)("g",{children:Object(y.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:e.rosePoints})})}),label:e.label,onDelete:(s=e,function(){i[s.d-1][s.n-1].used=!1,a((function(e){return e.filter((function(e){return e.label!==s.label}))}))}),onClick:function(){e.isDisabled=!e.isDisabled,a(Object(o.a)(t))}})},"".concat(n));var s}))})}function ve(e){var t=e.setOpen,a=e.setInAnalysisPage;return Object(i.useEffect)((function(){a(!1),t(!1)}),[]),Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{children:"Home - Theory and analysis"}),Object(y.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae, architecto temporibus laboriosam, atque veniam quod provident minus eos aspernatur ipsa ad nihil veritatis ea, eaque amet! Itaque cupiditate laudantium neque voluptas necessitatibus quidem perspiciatis molestias dolores possimus. Veritatis perferendis, quidem molestiae ipsa reprehenderit aperiam harum iste obcaecati doloribus, recusandae adipisci et saepe non qui illum ratione nemo amet voluptates dolore exercitationem provident. Ea sed incidunt cum eum excepturi vitae consequuntur eius quam earum? Repudiandae explicabo incidunt molestiae animi. Quibusdam veniam rerum minima error, quos voluptas incidunt. Est ex nesciunt ea id, dolor harum nemo quo quibusdam molestias dicta quae modi inventore. Sit dicta iure voluptatum modi. Recusandae harum blanditiis in dolore quasi officiis minus quos veritatis eveniet corporis eaque odio esse deserunt dolorum quod qui tempore, asperiores repellat numquam dolorem nobis! Provident soluta officiis temporibus optio, sapiente aspernatur accusantium ipsam velit necessitatibus natus placeat obcaecati consectetur quia. Reiciendis ipsum tempora non, dicta quod nesciunt. Magni, harum laudantium inventore omnis fugiat quia explicabo temporibus itaque officiis minus autem cumque! Necessitatibus dolorum aliquid omnis, sed ullam voluptatem reiciendis voluptate. Ad minima voluptatem praesentium totam eum consequuntur reiciendis quae soluta ipsam cupiditate? Officia labore modi illum libero error ad fugit sit nostrum, totam esse magnam doloremque repellendus. Similique, iure sed voluptatem quia molestiae aut incidunt facilis sequi! Veniam cupiditate optio magnam officiis cumque beatae laudantium, quas natus at aliquid nostrum, voluptatem aliquam quia doloremque, fugit fuga facere esse. Nostrum numquam nam, praesentium iusto accusamus quasi delectus rem vero laborum, optio blanditiis commodi id quidem beatae in. Laudantium fugit aspernatur impedit quam maiores officiis! Odit, est quae obcaecati repudiandae modi aliquid corporis natus dolores harum porro perferendis magni nam. Aperiam provident accusamus soluta optio eaque incidunt, quos modi nulla eligendi quo unde ipsa. Maxime distinctio minus beatae consequuntur assumenda ab vitae pariatur. Commodi maiores eius esse totam accusantium molestiae accusamus quas fugiat placeat quaerat voluptate corrupti architecto sapiente reiciendis obcaecati molestias, at tempore quisquam! Quam ratione aliquid quo illo delectus eaque quae reiciendis dicta corporis obcaecati, nesciunt veritatis molestiae impedit ut mollitia nam quisquam in aut quia nemo. Ducimus nulla assumenda numquam debitis recusandae dicta quam amet dolores, reprehenderit reiciendis ipsum sapiente sit alias obcaecati praesentium consequatur ipsa natus iste distinctio officia vel fugiat dolore delectus. Molestiae vero omnis blanditiis perspiciatis quibusdam, ipsam quo fugiat sunt pariatur minima aperiam ratione, unde distinctio porro incidunt praesentium repellendus aliquam autem dolores natus. Ab corporis earum veniam corrupti neque aperiam! Perferendis, eligendi, praesentium totam quia excepturi exercitationem dolores debitis cumque optio consectetur et suscipit cupiditate fuga nam commodi minima molestiae odit consequatur id enim aut quisquam eum. Modi dolores fuga neque praesentium repellendus, aspernatur ea quod? Corporis quaerat, nobis culpa quod nesciunt eum distinctio itaque cumque molestias impedit, deleniti delectus. Eum repellat architecto velit delectus eius praesentium, temporibus a nobis ad unde quaerat minus illum eos culpa earum possimus? Doloribus nostrum, impedit aut, officia amet at fuga velit minima tempora, harum molestiae non nisi quia maxime? Odio quo reiciendis nostrum repudiandae, alias delectus aut ullam quisquam. Eius?"})]})}function Oe(e){var t=e.setOpen,a=e.setInAnalysisPage;return Object(i.useEffect)((function(){a(!1),t(!1)}),[]),Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{children:"Theory page"}),Object(y.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae, architecto temporibus laboriosam, atque veniam quod provident minus eos aspernatur ipsa ad nihil veritatis ea, eaque amet! Itaque cupiditate laudantium neque voluptas necessitatibus quidem perspiciatis molestias dolores possimus. Veritatis perferendis, quidem molestiae ipsa reprehenderit aperiam harum iste obcaecati doloribus, recusandae adipisci et saepe non qui illum ratione nemo amet voluptates dolore exercitationem provident. Ea sed incidunt cum eum excepturi vitae consequuntur eius quam earum? Repudiandae explicabo incidunt molestiae animi. Quibusdam veniam rerum minima error, quos voluptas incidunt. Est ex nesciunt ea id, dolor harum nemo quo quibusdam molestias dicta quae modi inventore. Sit dicta iure voluptatum modi. Recusandae harum blanditiis in dolore quasi officiis minus quos veritatis eveniet corporis eaque odio esse deserunt dolorum quod qui tempore, asperiores repellat numquam dolorem nobis! Provident soluta officiis temporibus optio, sapiente aspernatur accusantium ipsam velit necessitatibus natus placeat obcaecati consectetur quia. Reiciendis ipsum tempora non, dicta quod nesciunt. Magni, harum laudantium inventore omnis fugiat quia explicabo temporibus itaque officiis minus autem cumque! Necessitatibus dolorum aliquid omnis, sed ullam voluptatem reiciendis voluptate. Ad minima voluptatem praesentium totam eum consequuntur reiciendis quae soluta ipsam cupiditate? Officia labore modi illum libero error ad fugit sit nostrum, totam esse magnam doloremque repellendus. Similique, iure sed voluptatem quia molestiae aut incidunt facilis sequi! Veniam cupiditate optio magnam officiis cumque beatae laudantium, quas natus at aliquid nostrum, voluptatem aliquam quia doloremque, fugit fuga facere esse. Nostrum numquam nam, praesentium iusto accusamus quasi delectus rem vero laborum, optio blanditiis commodi id quidem beatae in. Laudantium fugit aspernatur impedit quam maiores officiis! Odit, est quae obcaecati repudiandae modi aliquid corporis natus dolores harum porro perferendis magni nam. Aperiam provident accusamus soluta optio eaque incidunt, quos modi nulla eligendi quo unde ipsa. Maxime distinctio minus beatae consequuntur assumenda ab vitae pariatur. Commodi maiores eius esse totam accusantium molestiae accusamus quas fugiat placeat quaerat voluptate corrupti architecto sapiente reiciendis obcaecati molestias, at tempore quisquam! Quam ratione aliquid quo illo delectus eaque quae reiciendis dicta corporis obcaecati, nesciunt veritatis molestiae impedit ut mollitia nam quisquam in aut quia nemo. Ducimus nulla assumenda numquam debitis recusandae dicta quam amet dolores, reprehenderit reiciendis ipsum sapiente sit alias obcaecati praesentium consequatur ipsa natus iste distinctio officia vel fugiat dolore delectus. Molestiae vero omnis blanditiis perspiciatis quibusdam, ipsam quo fugiat sunt pariatur minima aperiam ratione, unde distinctio porro incidunt praesentium repellendus aliquam autem dolores natus. Ab corporis earum veniam corrupti neque aperiam! Perferendis, eligendi, praesentium totam quia excepturi exercitationem dolores debitis cumque optio consectetur et suscipit cupiditate fuga nam commodi minima molestiae odit consequatur id enim aut quisquam eum. Modi dolores fuga neque praesentium repellendus, aspernatur ea quod? Corporis quaerat, nobis culpa quod nesciunt eum distinctio itaque cumque molestias impedit, deleniti delectus. Eum repellat architecto velit delectus eius praesentium, temporibus a nobis ad unde quaerat minus illum eos culpa earum possimus? Doloribus nostrum, impedit aut, officia amet at fuga velit minima tempora, harum molestiae non nisi quia maxime? Odio quo reiciendis nostrum repudiandae, alias delectus aut ullam quisquam. Eius?"})]})}var ye=Math.sin(Math.PI/3),qe=function(e){var t,a=e.wsNumber,n=e.wavescapeMatrix,s=e.currentWavescapeSubdiv,r=e.wavescapeWidth,c=Object(i.useRef)(null),o=Object(i.useState)([]),u=Object(l.a)(o,2),d=u[0],m=u[1],b=r-10,p=r;return Object(i.useEffect)((function(){b=r,p=r}),[r]),Object(i.useEffect)((function(){var e,a=c.current,i=a.getContext("2d"),s=[10,10],r=[a.width-s[0],a.height-s[1]];n&&(e=n[0].length,i.clearRect(0,0,i.canvas.width,i.canvas.height),t=function(e,t,a,i,n){for(var s=e/a,r=[],c=0;c<a+1;c++){for(var o=[],l=0;l<a+1;l++)c<=l&&o.push({x:(l-c)*s+c*s/2+i,y:c*s+n});r.push(o)}return r}(r[0],0,e,s[0],s[1]),m(t),function(e,t,a){for(var i=0;i<e.length-1;i++)for(var n=0;n<e[i].length-1;n++)0===i?(t.beginPath(),t.moveTo(e[i][n].x,e[i][n].y),t.lineTo(e[i][n+1].x,e[i][n+1].y),t.lineTo(e[i+1][n].x,e[i+1][n].y),t.fillStyle=a[i][n],t.fill()):(t.beginPath(),t.moveTo(e[i][n].x,e[i][n].y),t.lineTo(e[i-1][n+1].x,e[i-1][n+1].y),t.lineTo(e[i][n+1].x,e[i][n+1].y),t.lineTo(e[i+1][n].x,e[i+1][n].y),t.fillStyle=a[i][n],t.fill())}(t,i,n))}),[n,b,p]),Object(y.jsxs)("svg",{width:b+10,height:p,children:[Object(y.jsx)("text",{x:"35%",y:"15%",style:{fontSize:"".concat(b/100*7,"px")},children:"".concat(a,". ")}),Object(y.jsxs)("g",{transform:"scale(".concat(1,", ",-ye,") translate(",0,",").concat(-p,")"),children:[Object(y.jsx)("foreignObject",{x:0,y:0,width:b,height:p,children:Object(y.jsx)("canvas",{width:b,height:p,ref:c})}),d.length>0?d[0].map((function(e,t){return Object(y.jsx)("line",{x1:e.x,x2:e.x,y1:e.y-3,y2:e.y+3,stroke:"grey",strokeWidth:"1px"},"tick".concat(t))})):null,d.length>0?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("line",{x1:d[0][0].x,x2:d[0][d[0].length-1].x,y1:d[0][0].y,y2:d[0][d[0].length-1].y,stroke:"grey",strokeWidth:"2px"}),Object(y.jsx)("line",{x1:d[0][d[0].length-1].x,x2:d[d.length-1][0].x,y1:d[0][d[0].length-1].y,y2:d[d.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(y.jsx)("line",{x1:d[0][0].x,x2:d[d.length-1][0].x,y1:d[0][0].y,y2:d[d.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(y.jsx)("circle",{cx:(d[0][s].x+d[0][s+1].x)/2,cy:(d[0][s].y+d[0][s+1].y)/2,r:.01*b,fill:"white"}),Object(y.jsx)("circle",{cx:(d[0][s].x+d[0][s+1].x)/2,cy:(d[0][s].y+d[0][s+1].y)/2,r:.01*b,stroke:"black",strokeWidth:1,fill:"transparent"})]}):null]})]})};var we=function(e){var t=e.wavescapesData,a=e.currentWavescapeSubdiv,i=e.elemsWidth;return Object(y.jsx)(m.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:t.length>0?t.map((function(e,t){return Object(y.jsx)(qe,{wsNumber:t+1,wavescapeMatrix:e,currentWavescapeSubdiv:a,wavescapeWidth:i},"w.".concat(t))})):Object(y.jsx)(p.a,{color:"error",children:"No midi file uploaded"})})},Ce=a(410),ke=null;var De=function(e){var t,a=e.coeffNumber,n=e.protoDataCoeff,s=e.traceDataCoeff,r=e.userPcvsCoeff,o=e.currentSubdiv,u=e.performanceCoeff,d=e.targetCircleWidth,m=e.showMagAndPhase,b=e.showFullTrace,h=Object(i.useRef)(null),f=Object(i.useState)({mu:0,phi:0}),j=Object(l.a)(f,2),x=j[0],g=j[1],v=440,O=v,q=40,w=180,C=.01;function k(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=180*Math.atan2(t,e)/Math.PI,n=Math.sqrt(e*e+t*t);return a&&(n/=w),i=Math.round(i+Number.EPSILON),{mu:n=Math.round(100*(n+Number.EPSILON))/100,phi:i}}function D(){var e=h.current.getContext("2d");e.fillStyle="rgba(0, 0, 0, 0.1)",s.forEach((function(t){e.beginPath(),e.arc(t.x*w,-t.y*w,2.2,0,2*Math.PI,!0),e.fill()}))}return Object(i.useEffect)((function(){if(s){var e=s[o].x,t=s[o].y;g(k(e,t))}}),[o,s]),Object(i.useEffect)((function(){var e=h.current,t=e.getContext("2d"),a=Math.floor(w*devicePixelRatio),i=t.createImageData(2*a,2*a),n=i.data;if(e.width=v*devicePixelRatio,e.height=O*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width="440px",e.style.height="440px",!ke){for(var r=-a;r<a;r++)for(var c=-a;c<a;c++){var o=Math.sqrt(r*r+c*c);if(!(o>a)){var l=4*(r+a+(c+a)*(2*a)),u=$(r,c,o/a);n[l]=u.r,n[l+1]=u.g,n[l+2]=u.b,n[l+3]=u.a}}ke=i}t.putImageData(ke,0,0),s&&b&&(t.save(),t.translate(180,180),D(),t.restore())}),[v,O,w,s,b]),Object(i.useEffect)((function(){h.current.getContext("2d").getImageData(0,0,1,1)}),[]),Object(i.useEffect)((function(){if(s){var e=h.current.getContext("2d");e.save(),e.translate(180,180),D(),e.restore()}}),[s]),Object(y.jsxs)("svg",{width:d,height:d,viewBox:"0 0 ".concat(v," ").concat(O),children:[Object(y.jsx)("text",{x:"0",y:"24",style:{fontSize:"24px"},children:"".concat(a,".")}),m?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("text",{x:"120",y:"23",style:{fontSize:"24px"},children:"\u03c6: ".concat(x.phi,"\xb0")}),Object(y.jsx)("text",{x:"34",y:"24",style:{fontSize:"24px"},children:"\u03bc: ".concat(x.mu)})]}):null,Object(y.jsx)("foreignObject",{x:q,y:q,width:v,height:O,children:Object(y.jsx)("canvas",{style:{zIndex:"-1"},width:v,height:O,ref:h})}),Object(y.jsxs)("g",{transform:"translate(".concat(220,",").concat(220,")"),children:[Object(y.jsx)("path",{fill:"azure",d:Y.a().innerRadius(179).outerRadius(183).startAngle(0).endAngle(2*Math.PI)()}),n?n.map((function(e,t){return function(e,t){var a=Y.a().innerRadius(4.4).outerRadius(6.6).startAngle(0).endAngle(2*Math.PI),i="",n="",s=!1;if(e.label.includes("_")||e.label.includes("^"))for(var r=0;r<e.label.length;r++)"_"===e.label[r]&&(i=e.label.slice(0,r),n=e.label.slice(r+1,e.label.length),s=!0),"^"===e.label[r]&&(i=e.label.slice(0,r),n=e.label.slice(r+1,e.label.length));else i=e.label;var c=0,o=5;return 1===Math.sign(e.x)?c=20:-1===Math.sign(e.x)&&(c=-20),1===Math.sign(-e.y)?o=25:-1===Math.sign(-e.y)&&(o=-8),0===e.x&&0===e.y&&(c=15,o=5),Object(y.jsxs)("g",{transform:"translate(".concat(e.x*w,",").concat(-e.y*w,")"),children:[Object(y.jsx)("path",{fill:"grey",d:a()},t),Object(y.jsxs)("text",{textAnchor:"middle",dx:c,dy:o,fontSize:"20px",children:[i,s?Object(y.jsx)("tspan",{fontSize:15,baselineShift:"sub",children:n}):Object(y.jsx)("tspan",{fontSize:15,baselineShift:"super",children:n})]})]},"p.".concat(t))}(e,t)})):null,0===u.x&&0===u.y?null:(t=u,Object(y.jsxs)("g",{transform:"translate(".concat(t.x*w,",").concat(-t.y*w,")"),children:[Object(y.jsx)("line",{x1:"5",x2:"-5",y1:"5",y2:"-5",stroke:"black",strokeWidth:"1.5"}),Object(y.jsx)("line",{x1:"5",x2:"-5",y1:"-5",y2:"5",stroke:"black",strokeWidth:"1.5"})]})),r?r.map((function(e,t){if(!e.isDisabled)return function(e,t,a,i,n,s){var r,o=k(a,i,!0),l=40;return Object(y.jsx)(Ce.a,{placement:"top",arrow:!0,title:Object(y.jsxs)(E.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[Object(y.jsxs)("svg",{width:l,height:l,viewBox:"0 0 ".concat(l," ").concat(l),children:[Object(y.jsx)("circle",{cx:20,cy:20,r:20,strokeWidth:"1",fill:"#FFF",fillOpacity:1}),Object(y.jsx)("polyline",{transform:"translate(".concat(20,",").concat(20,") scale(",1.8,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]}),Object(y.jsxs)(E.a,{children:[Object(y.jsx)(p.a,{children:e}),Object(y.jsx)(p.a,{children:"\u03bc: ".concat(o.mu," \u03c6: ").concat(-o.phi,"\xb0")})]})]}),children:Object(y.jsxs)("g",{children:[Object(y.jsx)("polyline",(r={transform:"translate(".concat(a,",").concat(i,") scale(").concat(n,")"),fill:"none",stroke:"black",strokeWidth:"1px"},Object(c.a)(r,"fill","#FFF"),Object(c.a)(r,"fillOpacity",0),Object(c.a)(r,"points",t),r)),Object(y.jsx)("polyline",{transform:"translate(".concat(a,",").concat(i,") scale(").concat(n,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]})},"rtt.".concat(s))}(e.label,e.rosePoints,e.x*w,-e.y*w,.7,t)})):null,s?function(e){var t=Y.a().innerRadius(0).outerRadius(e*v/2).startAngle(0).endAngle(2*Math.PI),a=Y.a().innerRadius(e*v/2).outerRadius((e+.005)*v/2).startAngle(0).endAngle(2*Math.PI),i=[];i.push(1),i.push(.5);for(var n=2;n<7;n++)i.push(Math.round(100*(i[n-1]-.1))/100);return(o<7?s.slice(0,o+1):s.slice(o-7+1,o+1)).reverse().map((function(e,n){return Object(y.jsxs)("g",{children:[Object(y.jsx)("path",{transform:"translate(".concat(e.x*w,",").concat(-e.y*w,")"),fill:"white",fillOpacity:i[n],d:t()},n),Object(y.jsx)("path",{transform:"translate(".concat(e.x*w,",").concat(-e.y*w,")"),fill:"black",fillOpacity:i[n],d:a()},"t.".concat(n))]},"g.".concat(n))}))}(C):null]})]})},Ae=[[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"C\u266f",x:.866,y:-.5},{label:"D",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"E",x:-.5,y:-.866},{label:"F",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"G",x:-.866,y:.5},{label:"A\u266d",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"B\u266d",x:.5,y:.866},{label:"B",x:.866,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"T_0",x:1,y:0},{label:"T_1",x:.5,y:-.866},{label:"T_2",x:-.5,y:-.866},{label:"T_3",x:-1,y:0},{label:"T_4",x:-.5,y:.866},{label:"T_5",x:.5,y:.866}],[{label:"\u03a9",x:0,y:0},{label:"C+",x:1,y:0},{label:"C\u266f+",x:0,y:-1},{label:"D+",x:-1,y:0},{label:"D\u266f+",x:0,y:1},{label:"H_0,3",x:.5,y:.5},{label:"H_0,1",x:.5,y:-.5},{label:"H_1,2",x:-.5,y:-.5},{label:"H_2,3",x:-.5,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"C^o7",x:1,y:0},{label:"C\u266f^o7",x:-.5,y:-.866},{label:"D^o7",x:-.5,y:.866},{label:"O_0,2",x:.25,y:.433},{label:"O_0,1",x:.25,y:-.433},{label:"O_1,2",x:-.5,y:0}],[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"F",x:.866,y:-.5},{label:"B\u266d",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"A\u266d",x:-.5,y:-.866},{label:"C\u266f",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"B",x:-.866,y:.5},{label:"E",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"D",x:.5,y:.866},{label:"G",x:.866,y:.5},{label:"\u266e",x:.267,y:.462},{label:"5\u266d",x:0,y:-.533},{label:"2\u266f",x:-.267,y:.462},{label:"3\u266d",x:.462,y:-.267},{label:"4\u266f",x:-.533,y:0},{label:"\u266d",x:.462,y:.267},{label:"6\u266f",x:-.267,y:-.462},{label:"\u266f",x:0,y:.533},{label:"4\u266d",x:.267,y:-.462},{label:"3\u266f",x:-.462,y:.267},{label:"2\u266d",x:.533,y:0},{label:"5\u266f",x:-.462,y:-.267}],[{label:"\u03a9",x:0,y:0},{label:"WT_1",x:1,y:0},{label:"WT_2",x:-1,y:0}]];var Se=function(e){var t=e.coeffTracesData,a=e.showPrototypes,n=e.showMagAndPhase,s=e.userPcvs,r=e.currentSubdiv,c=e.midiDevNotesDftCoeffs,o=e.elemsWidth,u=e.showFullTrace,d=Object(i.useState)(Ae),b=Object(l.a)(d,2),p=b[0],h=b[1],f=Object(i.useState)([]),j=Object(l.a)(f,2),x=j[0],g=j[1];return Object(i.useEffect)((function(){h(a?Ae:[])}),[a]),Object(i.useEffect)((function(){for(var e=[],t=1;t<7;t++){for(var a=[],i=0;i<s.length;i++)a.push({x:s[i].coeffs[t].re,y:s[i].coeffs[t].im,rosePoints:s[i].rosePoints,isDisabled:s[i].isDisabled,label:s[i].label});e.push(a)}g(e)}),[s]),Object(y.jsx)(m.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[1,2,3,4,5,6].map((function(e){return Object(y.jsx)(De,{coeffNumber:e,protoDataCoeff:p[e-1],traceDataCoeff:t[e-1],userPcvsCoeff:x[e-1],currentSubdiv:r,performanceCoeff:c[e],targetCircleWidth:o,showMagAndPhase:n,showFullTrace:u},"w.".concat(e))}))})},Ee=a(359),Pe=a(436),Fe=a(418),Me=a(419),We=a(411),Ie=a(416),Re=a(434),Te=a(435),ze=a(138),Ne=a.n(ze),Be=Object(x.a)(d.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));var Ge,Le,Ve=function(e){var t=e.fileName,a=e.setInAnalysisPage,n=e.open,s=e.setOpen,r=e.wavescapesData,c=e.coeffTracesData,o=e.currentSubdiv,u=e.currentWavescapeSubdiv,d=e.userPcvs,h=Object(i.useState)(!0),f=Object(l.a)(h,2),j=f[0],x=f[1],g=Object(i.useState)(!0),v=Object(l.a)(g,2),O=v[0],q=v[1],w=Object(i.useState)(!0),C=Object(l.a)(w,2),k=C[0],D=C[1],A=Object(i.useState)(K([0,0,0,0,0,0,0,0,0,0,0,0]).map((function(e){return{x:e.re,y:e.im}}))),E=Object(l.a)(A,2),P=E[0],F=E[1],M=Object(i.useRef)(null),W=Object(i.useState)(100),I=Object(l.a)(W,2),R=I[0],z=I[1],N=Object(i.useState)(6),B=Object(l.a)(N,2),G=B[0],L=B[1],_=Object(i.useState)(440),H=Object(l.a)(_,2),U=H[0],Q=H[1];function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=20;M.current&&Q((M.current.clientWidth+e)/G-t)}function X(){J(0)}return Object(i.useEffect)((function(){a(!0),s(!0),J(),window.addEventListener("resize",X)}),[]),Object(i.useEffect)((function(){D(!0)}),[c]),Object(i.useEffect)((function(){J(),window.addEventListener("resize",X)}),[G]),Object(i.useEffect)((function(){J(n?-400:400)}),[n]),Object(i.useEffect)((function(){J()}),[R]),Object(i.useEffect)((function(){var e=[],t=new S.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function a(a){var i=a.data[0],n=S.a(a.data[1],"midi").toNote(),s=Math.round(.05*a.data[2]);switch(i){case 144:s>0?(t.triggerAttack(n,S.f(),s),e.push(n)):(t.triggerRelease(n,S.f()),e.filter((function(e){return e!==n})));break;case 128:t.triggerRelease(n,S.f()),e=e.filter((function(e){return e!==n}))}!function(e){var t=[0,0,0,0,0,0,0,0,0,0,0,0];e.forEach((function(e){switch(e.includes("#")?e.slice(0,2):e.slice(0,1)){case"C":t[0]+=1;break;case"C#":t[1]+=1;break;case"D":t[2]+=1;break;case"D#":t[3]+=1;break;case"E":t[4]+=1;break;case"F":t[5]+=1;break;case"F#":t[6]+=1;break;case"G":t[7]+=1;break;case"G#":t[8]+=1;break;case"A":t[9]+=1;break;case"A#":t[10]+=1;break;case"B":t[11]+=1}}));var a=K(t);a=a.map((function(e){return{x:e.re,y:e.im}})),F(a)}(e)}function i(e){console.log("Name: ".concat(e.port.name,", Brand: ").concat(e.port.manufacturer,", State: ").concat(e.port.state,", Type: ").concat(e.port.type))}t.volume.value=-30,navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then((function(e){e.onstatechange=i,e.inputs.forEach((function(e){e.onmidimessage=a}))}),(function(){console.log("Could not connect MIDI")}))}),[]),Object(y.jsxs)(m.a,{children:[Object(y.jsxs)(m.a,{sx:{padding:0,margin:"auto",marginBottom:"70px",width:"".concat(R,"%")},children:[Object(y.jsxs)(Ie.a,{defaultExpanded:!0,children:[Object(y.jsx)(Re.a,{expandIcon:Object(y.jsx)(Ne.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(y.jsx)(p.a,{variant:"h6",children:"Wavescape"})}),Object(y.jsx)(Te.a,{ref:M,sx:{padding:0},children:Object(y.jsx)(we,{wavescapesData:r,currentWavescapeSubdiv:u,elemsWidth:U})})]}),Object(y.jsxs)(Ie.a,{defaultExpanded:!0,children:[Object(y.jsx)(Re.a,{expandIcon:Object(y.jsx)(Ne.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(y.jsx)(p.a,{variant:"h6",children:"Fourier Coefficient Spaces"})}),Object(y.jsx)(Te.a,{sx:{padding:0},children:Object(y.jsx)(Se,{coeffTracesData:c,currentSubdiv:o,showPrototypes:j,showMagAndPhase:O,showFullTrace:k,userPcvs:d,midiDevNotesDftCoeffs:P,elemsWidth:U})})]})]}),Object(y.jsx)(Be,{position:"fixed",open:n,color:"secondary",sx:{top:"auto",bottom:0,maxHeight:"74px"},children:Object(y.jsxs)(b.a,{children:[Object(y.jsx)(V,{fileName:t,currentWavescapeSubdiv:u}),Object(y.jsx)(m.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5%",maxWidth:"100px",justifyContent:"space-evenly"},children:Object(y.jsxs)(Ee.a,{children:[Object(y.jsx)(oe.a,{control:Object(y.jsx)(Pe.a,{onChange:function(){D(!k)},checked:k,size:"small"}),label:Object(y.jsx)(p.a,{noWrap:!0,children:"Show full trace"})}),Object(y.jsx)(oe.a,{control:Object(y.jsx)(Pe.a,{onChange:function(){x(!j)},checked:j,size:"small"}),label:Object(y.jsx)(p.a,{noWrap:!0,children:"Show Prototypes"})}),Object(y.jsx)(oe.a,{control:Object(y.jsx)(Pe.a,{onChange:function(){q(!O)},checked:O,size:"small"}),label:Object(y.jsx)(p.a,{noWrap:!0,children:"Show \u03bc and \u03c6"})})]})}),Object(y.jsxs)(m.a,{sx:{minWidth:"20%",padding:"1% 3% 1% 2%"},children:[Object(y.jsx)(p.a,{children:"Plots size"}),Object(y.jsx)(T.a,{min:20,max:100,value:R,defaultValue:100,"aria-label":"Plots size",valueLabelDisplay:"auto",onChange:function(e,t){z(t)},marks:[{value:20,label:"20%"},{value:50,label:"50%"},{value:100,label:"100%"}]})]}),Object(y.jsx)(m.a,{sx:{minWidth:120},children:Object(y.jsxs)(ce.a,{size:"small",variant:"standard",fullWidth:!0,children:[Object(y.jsx)(Fe.a,{children:"Layout"}),Object(y.jsxs)(We.a,{value:G,label:"Layout",onChange:function(e){z(100),L(e.target.value)},children:[Object(y.jsx)(Me.a,{value:6,children:"1x6"}),Object(y.jsx)(Me.a,{value:3,children:"2x3"}),Object(y.jsx)(Me.a,{value:2,children:"3x2"}),Object(y.jsx)(Me.a,{value:1,children:"6x1"})]})]})})]})})]})},_e=a(29),He=a(421),Ue=a(172),Qe=a.n(Ue),Je=a(408),Ke=80,Xe=Object(x.a)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(u.a)({flexGrow:1,padding:t.spacing(3),backgroundColor:"#e0e0e0",transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(400,"px")},a&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0,backgroundColor:"#e0e0e0"})})),Ye=Object(x.a)("div")((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"space-between"})}));var Ze=function(){var e,t=Object(_e.a)(),a=Object(i.useState)(!1),n=Object(l.a)(a,2),s=n[0],r=n[1],u=Object(i.useState)(""),d=Object(l.a)(u,2),b=d[0],f=d[1],x=Object(i.useState)([]),g=Object(l.a)(x,2),q=g[0],C=g[1],k=Object(i.useState)([]),S=Object(l.a)(k,2),P=S[0],F=S[1],M=Object(i.useState)(0),W=Object(l.a)(M,2),I=W[0],R=W[1],T=Object(i.useState)({noteResolutionValue:1,seconds:1.5,useSeconds:!1}),z=Object(l.a)(T,2),N=z[0],B=z[1],L=Object(i.useState)(10),V=Object(l.a)(L,2),_=V[0],H=V[1],U=Object(i.useState)(1),J=Object(l.a)(U,2),Y=J[0],Z=J[1],$=Object(i.useState)([]),se=Object(l.a)($,2),re=se[0],ce=se[1],oe=Object(i.useRef)(null),ue=Object(i.useState)(!1),de=Object(l.a)(ue,2),me=de[0],be=de[1],pe=Object(i.useState)(!1),fe=Object(l.a)(pe,2),xe=fe[0],ye=fe[1],qe=Object(i.useState)([]),we=Object(l.a)(qe,2),Ce=we[0],ke=we[1];function De(e){var t,a=[];try{t=function(e){for(var t=[],a=!1,i=!1,n=0;n<e.length;n++)if("{"!==e[n]&&"("!==e[n]||(a=!0,"{"===e[n]&&(i=!0)),a){for(var s=[],r=n+1;"}"!==e[r]&&")"!==e[r];r++){if(","!==e[r]&&"."!==e[r]&&" "!==e[r]&&isNaN(parseFloat(e[r])))throw new Error("Found NaN");" "!==e[r]&&s.push(e[r])}if(""===(s=s.join("")))throw new Error("Empty input");for(var c=[],o=0,l=0;l<s.length;l++){if(","===s[l]){var u=s.slice(l-o,l);if(0===u.length)throw new Error("Two consecutive comas");c.push(+u),o=-1}o++}var d=s.slice(s.length-o,s.length);if(0===d.length)throw new Error("Missing last number");if(c.push(+d),i){for(var m=[0,0,0,0,0,0,0,0,0,0,0,0],b=0;b<c.length;b++){if(c[b]<0||c[b]>=12)throw new Error("Set notation: out of range");m[c[b]]+=1}t.push(m)}else{if(12!==c.length)throw new Error("Vectorial notation: missing elements");t.push(c)}a=!1,i=!1,n+=o}if(0===t.length)throw new Error("Invalid input");return t}(e)}catch(i){return console.log(i.message),void be(!0)}t.forEach((function(e){return a.push({label:"(".concat(e,")"),isDisabled:!1,coeffs:K(e,!0,!0,!1),rosePoints:[],n:-1,d:-1})})),re.map((function(e){return e.label})).forEach((function(e){a=a.filter((function(t){return t.label!==e}))})),a.forEach((function(e){for(var t=!1,a=0;a<Ce.length&&!t;a++)for(var i=0;i<Ce[a].length&&!t;i++)Ce[a][i].usable&&!Ce[a][i].used&&(t=!0,e.rosePoints=Ce[a][i].points,Ce[a][i].used=!0,e.n=Ce[a][i].n,e.d=Ce[a][i].d)})),ce([].concat(Object(o.a)(re),Object(o.a)(a)))}return Object(i.useEffect)((function(){var e=document.getElementById("file").files[0];if(Le=e?e.name:"",e){var t=new FileReader;t.readAsArrayBuffer(e),t.onload=function(e){var t=function(e){var t=new Q.Midi(e),a=t.header.tempos.map((function(e){return Math.round(e.bpm)})),i=Math.max.apply(Math,Object(o.a)(a)),n=t.tracks.filter((function(e){return!1===e.instrument.percussion}));return t.tracks=n,{midiData:t,midiBpm:i}}(e.target.result),a=t.midiData,i=t.midiBpm;Ke=i;var n=(Ge=a).duration/50;H(n),C(function(e){for(var t=e[0].length,a=e[0].length,i=2,n=1;n<t;n++){for(var s=[],r=0;r+i<=a;r++){var c=e[0].slice(r,r+i);s.push(X(c))}i++,e.push(s)}for(var o=[],l=0;l<6;l++){for(var u=[],d=0;d<e.length;d++){for(var m=[],b=0;b<e[d].length;b++)m.push("");u.push(m)}o.push(u)}for(var p=0;p<e.length;p++)for(var h=0;h<e[p].length;h++)for(var f=1;f<e[p][h].length;f++)o[f-1][p][h]=ee(e[p][h][f]);return o}(function(e,t){var a=[];e.tracks.forEach((function(i){return a.push(ie(i.notes,t,e.duration))}));for(var i=[],n=0;n<a[0].length;n++)i.push(new te);for(var s=0;s<a.length;s++)for(var r=0;r<a[s].length;r++)for(var c=0;c<a[s][r].length;c++){var o=a[s][r][c],l=o.pitch,u=o.duration;i[r].addNoteDuration(l,u)}var d=i.map((function(e){return K(e.getPcvAsArray())})),m=[];return m.push(d),m}(Ge,n)));var s=ae(a,N,Ke),r=s.tracesData,c=s.resolution;Z(c),F(r),G(Ge,c,R),console.log(a)}}}),[b]),Object(i.useEffect)((function(){for(var e=[],t=1;t<=7;t++){for(var a=[],i=1;i<=7;i++){var n={n:i,d:t,used:!1,usable:!0,points:[]};i%t===0&&1!==t&&(n.usable=!1),!0===n.usable&&(n.points=ne(i,t)),a.push(n)}e.push(a)}e[0][0].usable=!1,ke(e);var s=[[1,0,0,0,1,0,0,1,0,0,0,0],[1,0,0,1,0,0,0,1,0,0,0,0],[1,0,0,1,0,0,1,0,0,0,0,0]].map((function(e){return{label:"(".concat(e.toString(),")"),isDisabled:!1,coeffs:K(e,!0,!0,!1),rosePoints:[],n:-1,d:-1}}));s.forEach((function(t){for(var a=!1,i=0;i<e.length&&!a;i++)for(var n=0;n<e[i].length&&!a;n++)e[i][n].usable&&!e[i][n].used&&(a=!0,t.rosePoints=e[i][n].points,e[i][n].used=!0,t.n=e[i][n].n,t.d=e[i][n].d)})),s[1].isDisabled=!0,s[2].isDisabled=!0,ce(s)}),[]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(j.a,{children:[Object(y.jsx)(A.a,{}),Object(y.jsx)(w,{open:s,setOpen:r,setInAnalysisPage:ye,inAnalysisPage:xe}),Object(y.jsxs)(m.a,{sx:{display:"flex"},children:[Object(y.jsxs)(He.a,{sx:{width:400,flexShrink:0,"& .MuiDrawer-paper":{width:400,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:s,children:[Object(y.jsxs)(Ye,{children:[Object(y.jsxs)(E.a,{sx:{flexGrow:"2",maxWidth:"85%"},children:[Object(y.jsx)(p.a,{sx:{fontWeight:"bold"},children:"Upload a midi file"}),Object(y.jsxs)(E.a,{spacing:2,direction:"row",sx:{alignItems:"center"},children:[Object(y.jsxs)("label",{htmlFor:"file",children:[Object(y.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"file",value:b,onChange:function(e){return f(e.target.value)}}),Object(y.jsx)(h.a,{variant:"contained",size:"small",color:"primary",component:"span",children:"Upload"})]}),Object(y.jsx)(p.a,{noWrap:!0,color:Le?"primary":"error",children:b?Le:"No midi file uploaded"})]})]}),Object(y.jsx)(O.a,{onClick:function(){r(!1)},children:"ltr"===t.direction?Object(y.jsx)(Qe.a,{}):Object(y.jsx)(v.a,{})})]}),Object(y.jsx)(Je.a,{}),Object(y.jsx)(p.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Time resolution"}),Object(y.jsx)(m.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5% 0 2%",width:"90%",justifyContent:"space-evenly"},children:Object(y.jsx)(he,{setResolutionMode:B,resolutionMode:N,retriggerAnalysis:function(){if(null!=Ge){var e=ae(Ge,N,Ke),t=e.tracesData,a=e.resolution;Z(a),F(t),G(Ge,a,R)}}})}),Object(y.jsx)(Je.a,{}),Object(y.jsx)(p.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Custom Pitch-Class Vectors"}),Object(y.jsxs)(m.a,{sx:{flexDirection:"column",display:"flex",alignItems:"center",margin:"3% 5%",height:"50%",justifyContent:"space-evenly"},component:"form",noValidate:!0,autoComplete:"off",children:[Object(y.jsx)(le.a,(e={fullWidth:!0,label:'margin="dense"',error:me,helperText:me&&"Invalid input",id:"outlined-basic"},Object(c.a)(e,"label","e.g. {0,0,4,7,10} (2,0,0,0,1,0,0,1,0,0,1,0)"),Object(c.a)(e,"variant","outlined"),Object(c.a)(e,"onKeyPress",(function(e){"Enter"===e.key&&(e.preventDefault(),De(oe.current.value),oe.current.value="")})),Object(c.a)(e,"onChange",(function(){be(!1)})),Object(c.a)(e,"inputRef",oe),e)),Object(y.jsx)(ge,{userPcvs:re,setUserPcvs:ce,rosesMat:Ce})]}),Object(y.jsx)(Je.a,{}),Object(y.jsx)(p.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Legend of coefficients"}),Object(y.jsx)(m.a,{sx:{margin:"5px 10px"},children:Object(y.jsx)(je.a,{children:Object(y.jsxs)(E.a,{children:[Object(y.jsxs)(E.a,{direction:"row",children:[Object(y.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(y.jsx)("circle",{cx:"12",cy:"12",r:"6",fill:"black"})}),"MIDI file segments"]}),Object(y.jsxs)(E.a,{direction:"row",children:[Object(y.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(y.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"white"}),Object(y.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"none",stroke:"black",strokeWidth:"3px"})]}),"MIDI playback"]}),Object(y.jsxs)(E.a,{direction:"row",children:[Object(y.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(y.jsxs)("g",{transform:"translate(12,12)",children:[Object(y.jsx)("line",{x1:"5",x2:"-5",y1:"5",y2:"-5",stroke:"black",strokeWidth:"1.5"}),Object(y.jsx)("line",{x1:"5",x2:"-5",y1:"-5",y2:"5",stroke:"black",strokeWidth:"1.5"})]})}),"MIDI controller input"]}),Object(y.jsxs)(E.a,{direction:"row",children:[Object(y.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(y.jsx)("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"grey",strokeWidth:"2px"})}),"Prototypes"]}),Object(y.jsxs)(E.a,{direction:"row",children:[Object(y.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Ce.length>0?Object(y.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:Ce[3][0].points}):null}),"Custom Pitch-Class Vectors"]})]})})})]}),Object(y.jsx)(Xe,{open:s,children:Object(y.jsxs)(D.c,{children:[Object(y.jsx)(D.a,{exact:!0,path:"/",render:function(){return Object(y.jsx)(ve,{setOpen:r,setInAnalysisPage:ye})}}),Object(y.jsx)(D.a,{exact:!0,path:"/theory",render:function(){return Object(y.jsx)(Oe,{setOpen:r,setInAnalysisPage:ye})}}),Object(y.jsx)(D.a,{exact:!0,path:"/analysis",render:function(){return Object(y.jsx)(Ve,{fileName:Le,setInAnalysisPage:ye,open:s,setOpen:r,wavescapesData:q,coeffTracesData:P,currentSubdiv:I,currentWavescapeSubdiv:Math.floor(I*Y/_),userPcvs:re})}})]})})]})]})})},$e=a(173),et=a(420),tt=Object($e.a)({palette:{primary:{main:"#323232"},secondary:{main:"#fefefe"},background:{default:"#e0e0e0"}}});r.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(et.a,{theme:tt,children:Object(y.jsx)(Ze,{})})}),document.getElementById("root"))}},[[345,1,2]]]);
//# sourceMappingURL=main.db128240.chunk.js.map