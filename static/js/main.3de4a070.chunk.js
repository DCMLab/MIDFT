(this.webpackJsonpmidiverto=this.webpackJsonpmidiverto||[]).push([[0],{355:function(e,t){},369:function(e,t,a){"use strict";a.r(t);var n,i,c=a(1),s=a.n(c),r=a(69),o=a.n(r),l=a(18),h=a(10),d=a(9),j=a(91),u=a(26),f=a(29),b=a(428),x=a(429),p=a(185),g=a.n(p),m=a(184),O=a.n(m),v=a(183),y=a.n(v),w=a(456),k=a(443),D=a(11),C=a(455),S=a(0),M=0,I=Object(D.a)(C.a)({fontSize:"0.75rem",opacity:.38,fontWeight:500,letterSpacing:.2});function T(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return"".concat(t,":").concat(a<9?"0".concat(a):a)}function P(e,t,a){f.d.cancel(0),a(0),f.d.stop(),M=e.duration;var i=[];e.tracks.forEach((function(e){return e.notes.forEach((function(e){i.push(e)}))})),i.forEach((function(e){e.subdiv=Math.floor(e.time/t)})),(n=new f.b((function(e,t){A.triggerAttackRelease(t.name,t.duration,e,t.velocity),a(t.subdiv)}),[].concat(i)).start(0)).loop=!0,n.loopEnd=M}var A=new f.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function F(e){var t=this,a=e.fileName,s=Object(c.useState)(0),r=Object(h.a)(s,2),o=r[0],l=r[1];function d(){"running"!==f.e.state&&(console.log("state running"),f.e.resume()),f.d.start(),!i&&n&&(i=setInterval((function(){return l(n.progress)}),1e3))}return Object(c.useEffect)((function(){document.addEventListener("keydown",function(e){32===e.which&&(e.preventDefault(),"paused"===f.d.state||"stopped"===f.d.state?d():"started"===f.d.state&&(f.d.pause(),z()))}.bind(t))}),[]),Object(S.jsxs)(b.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"60%"},children:[Object(S.jsxs)(b.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[Object(S.jsxs)(x.a,{direction:"row",sx:{flexGrow:1,paddingLeft:"10%"},children:[Object(S.jsx)(w.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){console.log("stop"),f.d.stop(),z()},size:"large",children:Object(S.jsx)(y.a,{fontSize:"large"})}),Object(S.jsx)(w.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){console.log("pause"),f.d.pause(),z()},size:"large",children:Object(S.jsx)(O.a,{fontSize:"large"})}),Object(S.jsx)(w.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){return d()},size:"large",children:Object(S.jsx)(g.a,{fontSize:"large"})})]}),Object(S.jsx)(C.a,{color:a?"primary":"error",noWrap:!0,sx:{flexGrow:"2",paddingRight:"10%"},children:a||"No midi file uploaded"})]}),Object(S.jsx)(k.a,{"aria-label":"Playback",size:"small",value:o?100*o:0,onChange:function(e,t){l(t/100),f.d.seconds=t/100*M},sx:{width:"90%"}}),Object(S.jsxs)(b.a,{sx:{display:"flex",width:"90%",alignItems:"center",justifyContent:"space-between",mt:-1},children:[Object(S.jsxs)(I,{children:["-",T(M-o*M)]}),Object(S.jsx)(I,{children:T(M)})]})]})}function z(){clearInterval(i),i=null}A.volume.value=-20;var E=a(3),W=a(4),R=a(186),B=a(438);function N(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.length,c=[],s=0;s<i/2+1;s++){for(var r=0,o=0;o<i;o++)r=B.a(B.e(e[o],B.c(B.e(B.d,-2*B.f*s*o/i))),r);c.push(r)}if(c=c.slice(),t){var l=c[0];0!=l&&(c=c.map((function(e){return B.b(e,l)})))}return a&&c.forEach((function(e){e.re=Math.round(1e4*e.re)/1e4,e.im=Math.round(1e4*e.im)/1e4})),n&&(c=c.map((function(e){return e.toPolar()}))),c}function _(e){for(var t=e[0],a=1;a<e.length;a++){for(var n=[],i=0;i<e[a].length;i++)n.push(B.a(t[i],e[a][i]));t=n.slice()}var c=t[0];return 0!=c&&(t=t.map((function(e){return B.b(e,c)}))),t}var L=a(35),V=L.c().domain([0,1]).range(L.b(0,255,1)),H=function(e){var t,a,n;return e>=0&&e<B.f/3?(t=1,a=3*e/B.f,n=0):e>=B.f/3&&e<2*B.f/3?(t=2-3*e/B.f,a=1,n=0):e>=2*B.f/3&&e<B.f?(t=0,a=1,n=3*e/B.f-2):e>=B.f&&e<4*B.f/3?(t=0,a=4-3*e/B.f,n=1):e>=4*B.f/3&&e<5*B.f/3?(t=3*e/B.f-4,a=0,n=1):e>=5*B.f/3&&e<2*B.f&&(t=1,a=0,n=6-3*e/B.f),t=V(t),a=V(a),n=V(n),"rgb(".concat(t,", ").concat(a,", ").concat(n,")")},G=function(e,t,a){var n,i,c,s=Math.atan2(t,e);return(s=-s)<0&&(s+=2*Math.PI),s>=0&&s<B.f/3?(n=1,i=3*s/B.f,c=0):s>=B.f/3&&s<2*B.f/3?(n=2-3*s/B.f,i=1,c=0):s>=2*B.f/3&&s<B.f?(n=0,i=1,c=3*s/B.f-2):s>=B.f&&s<4*B.f/3?(n=0,i=4-3*s/B.f,c=1):s>=4*B.f/3&&s<5*B.f/3?(n=3*s/B.f-4,i=0,c=1):s>=5*B.f/3&&s<2*B.f&&(n=1,i=0,c=6-3*s/B.f),{r:n=V(n),g:i=V(i),b:c=V(c),a:V(a)}};function q(e){var t=e.toPolar(),a=t.phi,n=t.r;a<0&&a>-1e-5&&(a=0),a<0&&(a+=2*Math.PI);var i=H(a).slice(3,-1);return"rgba".concat(i,", ").concat(n,")")}var U=function(){function e(){Object(E.a)(this,e),this.C=0,this.Cs=0,this.D=0,this.Ds=0,this.E=0,this.F=0,this.Fs=0,this.G=0,this.Gs=0,this.A=0,this.As=0,this.B=0}return Object(W.a)(e,[{key:"addNoteDuration",value:function(e,t){switch(e){case"C":this.C+=t;break;case"C#":this.Cs+=t;break;case"D":this.D+=t;break;case"D#":this.Ds+=t;break;case"E":this.E+=t;break;case"F":this.F+=t;break;case"F#":this.Fs+=t;break;case"G":this.G+=t;break;case"G#":this.Gs+=t;break;case"A":this.A+=t;break;case"A#":this.As+=t;break;case"B":this.B+=t}}},{key:"getPcvAsArray",value:function(){return[this.C,this.Cs,this.D,this.Ds,this.E,this.F,this.Fs,this.G,this.Gs,this.A,this.As,this.B]}},{key:"add",value:function(e){this.C+=e.C,this.Cs+=e.Cs,this.D+=e.D,this.Ds+=e.Ds,this.E+=e.E,this.F+=e.F,this.Fs+=e.Fs,this.G+=e.G,this.Gs+=e.Gs,this.A+=e.A,this.As+=e.As,this.B+=e.B}}]),e}();function Y(e,t,a,n){var i,c=t.noteResolutionValue,s=t.seconds,r=t.useSeconds;i=r?isNaN(s)?1:s:c*(60/a);var o=e.duration,h=[];e.tracks.forEach((function(e){h.push(J(e.notes,i,o))}));for(var d=[],j=0;j<h[0].length;j++)d.push(new U);for(var u=0;u<h.length;u++)for(var f=0;f<h[u].length;f++)for(var b=0;b<h[u][f].length;b++){var x=h[u][f][b],p=x.pitch,g=x.duration;d[f].addNoteDuration(p,g)}for(var m=Object(l.a)(d).map((function(e){var t=new U;return t.add(e),t})),O=(d=X(d)).map((function(e){return N(e.getPcvAsArray(),!1)})),v=[],y=1;y<7;y++){for(var w=[],k=0;k<O.length;k++)w.push({x:O[k][y].re,y:O[k][y].im});v.push(w)}return{tracesData:v,resolution:i,currPcDistributions:m}}function J(e,t,a){for(var n=[],i=t,c=function(t){var a=[];e.forEach((function(e){var n=e.time,c=e.duration;if(function(e,t,a,n){if(e>a&&e<a+n||e+t>a&&e+t<a+n||e<=a&&e+t>=a+n)return!0;return!1}(n,c,t,i)){var s={pitch:e.pitch};s.duration=n<t?n+c<t+i?n+c-t:i:n+c<=t+i?c:t+i-n,a.push(s)}})),n.push(a)},s=0;s<a;s+=t)c(s);return n}function K(e,t){return Z(X(function(e,t){for(var a=[],n=Math.ceil(t/2),i=n,c=0;c<n;c++){for(var s=new U,r=0;r<i;r++)s.add(e[r]);a.push(s),i++}for(var o=0;o<=e.length-t;o++){for(var l=new U,h=0;h<t;h++)l.add(e[o+h]);a.push(l)}i=n;for(var d=0;d<n;d++){for(var j=new U,u=0;u<i;u++)j.add(e[e.length-u-1]);a.push(j),i++}return a}(e,t)).map((function(e){return N(e.getPcvAsArray(),!1)})))}function X(e){var t=Object(l.a)(e).map((function(e){var t=new U;return t.add(e),t}));return t.forEach((function(e){var t=0;for(var a in e)t+=e[a];if(0!==t)for(var n in e)e[n]=e[n]/t})),t}function Z(e){for(var t=[],a=1;a<7;a++){for(var n=[],i=0;i<e.length;i++)n.push({x:e[i][a].re,y:e[i][a].im});t.push(n)}return t}function Q(e,t){for(var a=[],n=0;n<2*Math.PI*t;n+=.01){var i=10*Math.cos(e/t*n),c=i*Math.cos(n),s=i*Math.sin(n);a.push([c,s])}return a}var $=a(460),ee=a(461),te=a(458),ae=a(462),ne=a(119),ie=a.n(ne),ce=Object(D.a)($.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(d.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));function se(e){var t=e.open,a=e.setOpen,n=e.inAnalysisPage;return Object(S.jsx)(b.a,{sx:{flexGrow:1},children:Object(S.jsx)(ce,{position:"static",open:t,children:Object(S.jsxs)(ee.a,{children:[Object(S.jsx)(w.a,{disabled:!n,color:"inherit","aria-label":"open drawer",onClick:function(){a(!0)},edge:"start",sx:Object(d.a)({mr:2},t&&{display:"none"}),children:Object(S.jsx)(ie.a,{})}),Object(S.jsx)(C.a,{variant:"h3",component:"div",sx:{flexGrow:1},children:"midiVERTO"}),Object(S.jsxs)(ae.a,{"aria-label":"outlined button group",children:[Object(S.jsx)(te.a,{component:j.b,to:"/",variant:"contained",disableElevation:!0,children:"Home"}),Object(S.jsx)(te.a,{component:j.b,to:"/theory",variant:"contained",disableElevation:!0,children:"Docs"}),Object(S.jsx)(te.a,{component:j.b,to:"/analysis",variant:"contained",disableElevation:!0,children:"Analysis"})]})]})})})}var re=a(442),oe=a(430),le=a(459),he=a(463),de=a(447),je=a.p+"static/media/whole.bc0fb0be.svg",ue=a.p+"static/media/half.7f42e3ea.svg",fe=a.p+"static/media/quarter.2f619208.svg",be=a.p+"static/media/eighth.f964a835.svg",xe=a.p+"static/media/sixteenth.b53671bd.svg";var pe=function(e){var t=e.resolutionMode,a=e.setResolutionMode,n=e.retriggerAnalysis,i=Object(c.useState)(!1),s=Object(h.a)(i,2),r=s[0],o=s[1],l=Object(c.useRef)(null);return Object(S.jsx)(b.a,{children:Object(S.jsx)(le.a,{component:"fieldset",children:Object(S.jsxs)(oe.a,{row:!0,defaultValue:"quarter",onChange:function(e){var n=Object(d.a)({},t);switch(n.seconds=parseFloat(l.current.value),e.target.value){case"sixteenth":n.noteResolutionValue=.25,n.useSeconds=!1;break;case"eighth":n.noteResolutionValue=.5,n.useSeconds=!1;break;case"quarter":n.noteResolutionValue=1,n.useSeconds=!1;break;case"half":n.noteResolutionValue=2,n.useSeconds=!1;break;case"whole":n.noteResolutionValue=4,n.useSeconds=!1;break;case"seconds":n.useSeconds=!0}a(n)},"aria-label":"resolution",name:"row-radio-buttons-group",sx:{display:"flex",justifyContent:"space-between"},children:[Object(S.jsx)(he.a,{value:"sixteenth",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3)"},src:xe})}),Object(S.jsx)(he.a,{value:"eighth",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3) translate(0, 0)"},src:be})}),Object(S.jsx)(he.a,{value:"quarter",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(1, 3)"},src:fe})}),Object(S.jsx)(he.a,{value:"half",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(3.7, 3.2) "},src:ue})}),Object(S.jsx)(he.a,{value:"whole",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)("img",{style:{width:10,height:10,marginTop:0,transform:"scale(1.5, 1)"},src:je})}),Object(S.jsx)(he.a,{value:"seconds",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)(de.a,{sx:{minHeight:"4.4rem",maxWidth:"5rem"},error:r,helperText:r&&"Invalid input",label:"in seconds",id:"standard-size-small",defaultValue:"1.5",size:"small",variant:"standard",onChange:function(){var e=Object(d.a)({},t);e.seconds=parseFloat(l.current.value),isNaN(e.seconds)?o(!0):(a(e),o(!1))},inputRef:l})}),Object(S.jsx)(te.a,{variant:"contained",onClick:n,sx:{width:"22%",height:"15%",marginTop:2},children:"Change"})]})})})},ge=a(452),me=a(457),Oe=Object(D.a)("li")((function(e){return{margin:e.theme.spacing(.5)}}));function ve(e){var t=e.userPcvs,a=e.setUserPcvs,n=e.rosesMat;return Object(S.jsx)(me.a,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",p:"3px",overflow:"auto",height:"100%",width:"100%"},component:"ul",children:t.map((function(e,i){return Object(S.jsx)(Oe,{children:Object(S.jsx)(ge.a,{variant:e.isDisabled?"outlined":"filled",icon:Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(S.jsx)("g",{children:Object(S.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:e.rosePoints})})}),label:e.label,onDelete:(c=e,function(){n[c.d-1][c.n-1].used=!1,a((function(e){return e.filter((function(e){return e.label!==c.label}))}))}),onClick:function(){e.isDisabled=!e.isDisabled,a(Object(l.a)(t))}})},"".concat(i));var c}))})}var ye=a(148),we=a.n(ye),ke=a(187),De=a.n(ke),Ce=a(188),Se=function(e){var t=e.traceData,a=e.userPcv,n=e.prototypesData,i=e.coeffNumber,c=e.showNumber,s=450,r=180,o=2*B.f/50,l=L.b(0,2*B.f,o),h=L.b(0,1,.05);return Object(S.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:450,children:[c?Object(S.jsxs)("g",{transform:"translate(32,20)",children:[Object(S.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(S.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:i})]}):null,Object(S.jsxs)("g",{transform:"translate(".concat(225,",").concat(225,")"),children:[h.map((function(e){return l.map((function(t,a){return function(e,t,a,n){var i=-B.f/2,c=L.a().innerRadius(360*n/2).outerRadius(360*(n+.05)/2).startAngle(-(e+i)).endAngle(-(e+o+i));return Object(S.jsx)("path",{fill:H(e),fillOpacity:n,stroke:H(e),strokeOpacity:n/10,d:c()},"".concat(a,".").concat(t))}(t,a,i,e)}))})),t.map((function(e,t){return function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=L.a().innerRadius(0).outerRadius(t*s/2).startAngle(0).endAngle(2*Math.PI);return Object(S.jsx)("path",{transform:"translate(".concat(e.x*r,",").concat(-e.y*r,")"),fill:a,fillOpacity:i,d:c()},n)}(e,.01,"black",t,.2)})),a?a.map((function(e,t){if(!e.isDisabled)return function(e,t,a,n,i){return Object(S.jsx)("g",{children:Object(S.jsx)("polyline",{transform:"translate(".concat(t,",").concat(a,") scale(").concat(n,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:e})},"rose".concat(i))}(e.rosePoints,e.x*r,-e.y*r,.7,t)})):null,n.map((function(e,t){return function(e,t){var a=L.a().innerRadius(4.5).outerRadius(6.75).startAngle(0).endAngle(2*Math.PI),n="",i="",c=!1;if(e.label.includes("_")||e.label.includes("^"))for(var s=0;s<e.label.length;s++)"_"===e.label[s]&&(n=e.label.slice(0,s),i=e.label.slice(s+1,e.label.length),c=!0),"^"===e.label[s]&&(n=e.label.slice(0,s),i=e.label.slice(s+1,e.label.length));else n=e.label;var o=18*Math.sign(e.x),l=18*-Math.sign(e.y)+7;return"\u266f"===n&&(l-=3),"WT"===n&&"1"===i&&(o*=1.2),"WT"===n&&"0"===i&&(o*=1.4),"C"===n&&"o7"===i&&(o*=1.2),"O"===n&&"1,2"===i&&(l*=1.1),"C\u266f"===n&&"o7"===i&&(o*=1.1,l*=1.1),"D"===n&&"o7"===i&&(o*=.7,l*=.7),"H"===n&&"2,3"===i&&(o*=1.2,l*=1.2),"H"===n&&"1,2"===i&&(o*=.7,l*=.7),"\u03a9"===n&&(o=15,l=5),Object(S.jsxs)("g",{transform:"translate(".concat(e.x*r,",").concat(-e.y*r,")"),children:[Object(S.jsx)("path",{fill:"grey",d:a()},t),Object(S.jsxs)("text",{textAnchor:"middle",dx:o,dy:l,fontSize:"20px",children:[n,c?Object(S.jsx)("tspan",{fontSize:15,baselineShift:"sub",children:i}):Object(S.jsx)("tspan",{fontSize:15,baselineShift:"super",children:i})]})]},"p.".concat(t))}(e,t)}))]})]},"circle".concat(i))},Me=Math.sin(Math.PI/3);var Ie=function(e){var t,a,n=e.wsNumber,i=e.wavescapeMatrix,c=e.showNumber,s=e.wsPhantomCurveHeight,r=10,o=400,l=o,h=[r,r],d=[o-h[0],o-h[1]];return t=i[0].length,a=function(e,t,a,n,i){for(var c=e/a,s=[],r=0;r<a+1;r++){for(var o=[],l=0;l<a+1;l++)r<=l&&o.push({x:(l-r)*c+r*c/2+n,y:r*c+i});s.push(o)}return s}(d[0],0,t,h[0],h[1]),Object(S.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"wavescape".concat(n),width:410,height:l,children:[c?Object(S.jsxs)("g",{transform:"translate(32,20)",children:[Object(S.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(S.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:n})]}):null,Object(S.jsxs)("g",{transform:"scale(".concat(1,", ",-Me,") translate(",0,",").concat(-420,")"),children:[Object(S.jsx)("line",{x1:.5*s*o+5,y1:380*s+r,x2:-.5*s*o+o+5,y2:380*s+r,stroke:"black",strokeDasharray:"4 2"}),a.length>0?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("line",{x1:a[0][0].x,x2:a[0][a[0].length-1].x,y1:a[0][0].y,y2:a[0][a[0].length-1].y,stroke:"grey",strokeWidth:"1px"}),Object(S.jsx)("line",{x1:a[0][a[0].length-1].x,x2:a[a.length-1][0].x,y1:a[0][a[0].length-1].y,y2:a[a.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(S.jsx)("line",{x1:a[0][0].x,x2:a[a.length-1][0].x,y1:a[0][0].y,y2:a[a.length-1][0].y,stroke:"grey",strokeWidth:"1px"})]}):null,i.map((function(e,t){return e.map((function(e,n){return 0===t?Object(S.jsx)("polygon",{points:"".concat(a[t][n].x,",").concat(a[t][n].y,"\n                 ").concat(a[t][n+1].x,",").concat(a[t][n+1].y," \n                 ").concat(a[t+1][n].x,",").concat(a[t+1][n].y),fill:e.rgb,fillOpacity:e.alpha}):Object(S.jsx)("polygon",{points:"\n                 ".concat(a[t][n].x,",").concat(a[t][n].y,"\n                 ").concat(a[t-1][n+1].x,",").concat(a[t-1][n+1].y,"\n                 ").concat(a[t][n+1].x,",").concat(a[t][n+1].y," \n                 ").concat(a[t+1][n].x,",").concat(a[t+1][n].y,"\n                 "),fill:e.rgb,fillOpacity:e.alpha})}))}))]})]})};var Te=[[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"C\u266f",x:.866,y:-.5},{label:"D",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"E",x:-.5,y:-.866},{label:"F",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"G",x:-.866,y:.5},{label:"A\u266d",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"B\u266d",x:.5,y:.866},{label:"B",x:.866,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"T_0",x:1,y:0},{label:"T_1",x:.5,y:-.866},{label:"T_2",x:-.5,y:-.866},{label:"T_3",x:-1,y:0},{label:"T_4",x:-.5,y:.866},{label:"T_5",x:.5,y:.866}],[{label:"\u03a9",x:0,y:0},{label:"C+",x:1,y:0},{label:"C\u266f+",x:0,y:-1},{label:"D+",x:-1,y:0},{label:"D\u266f+",x:0,y:1},{label:"H_0,3",x:.5,y:.5},{label:"H_0,1",x:.5,y:-.5},{label:"H_1,2",x:-.5,y:-.5},{label:"H_2,3",x:-.5,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"C^o7",x:1,y:0},{label:"C\u266f^o7",x:-.5,y:-.866},{label:"D^o7",x:-.5,y:.866},{label:"O_0,2",x:.25,y:.433},{label:"O_0,1",x:.25,y:-.433},{label:"O_1,2",x:-.5,y:0}],[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"F",x:.866,y:-.5},{label:"B\u266d",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"A\u266d",x:-.5,y:-.866},{label:"C\u266f",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"B",x:-.866,y:.5},{label:"E",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"D",x:.5,y:.866},{label:"G",x:.866,y:.5},{label:"\u266e",x:.267,y:.462},{label:"5\u266d",x:0,y:-.533},{label:"2\u266f",x:-.267,y:.462},{label:"3\u266d",x:.462,y:-.267},{label:"4\u266f",x:-.533,y:0},{label:"\u266d",x:.462,y:.267},{label:"6\u266f",x:-.267,y:-.462},{label:"\u266f",x:0,y:.533},{label:"4\u266d",x:.267,y:-.462},{label:"3\u266f",x:-.462,y:.267},{label:"2\u266d",x:.533,y:0},{label:"5\u266f",x:-.462,y:-.267}],[{label:"\u03a9",x:0,y:0},{label:"WT_0",x:1,y:0},{label:"WT_1",x:-1,y:0}]],Pe=a(465),Ae=a(469),Fe=a(467),ze=a(468),Ee=a(466),We=a(384),Re=a(444),Be=a(435),Ne=a(464);var _e=function(e){var t=e.traces,a=e.userPcvs,n=e.wavescapesData,i=e.wsPhantomCurveHeight,s=Object(c.useState)(!1),r=Object(h.a)(s,2),o=r[0],l=r[1],d=Object(c.useState)(!0),j=Object(h.a)(d,2),u=j[0],f=j[1],b=Object(c.useState)(!0),x=Object(h.a)(b,2),p=x[0],g=x[1],m=Object(c.useState)(!0),O=Object(h.a)(m,2),v=O[0],y=O[1],w=Object(c.useState)(!0),k=Object(h.a)(w,2),D=k[0],M=k[1],I=Object(c.useState)([]),T=Object(h.a)(I,2),P=T[0],A=T[1],F=Object(c.useState)([]),z=Object(h.a)(F,2),E=z[0],W=z[1],R=function(){l(!1)},B=Object(c.useState)(!1),N=Object(h.a)(B,2),_=N[0],L=N[1],V=Object(c.useState)(null),H=Object(h.a)(V,2),G=H[0],q=H[1],U=Boolean(G),Y=o?"simple-popover":void 0;Object(c.useEffect)((function(){n.length>0?L(!0):L(!1);for(var e=[],t=0;t<n.length;t++){for(var a=[],i=0;i<n[t].length;i++){for(var c=[],s=0;s<n[t][i].length;s++){var r={},o=n[t][i][s].replace(/[^\d,]/g,"").split(",");r.rgb="rgb(".concat(o[0],", ").concat(o[1],", ").concat(o[2],")"),r.alpha="0.".concat(o[3].substring(1,o[3].length)),c.push(r)}a.push(c)}e.push(a)}W(e)}),[n]),Object(c.useEffect)((function(){for(var e=[],t=1;t<7;t++){for(var n=[],i=0;i<a.length;i++)n.push({x:a[i].coeffs[t].re,y:a[i].coeffs[t].im,rosePoints:a[i].rosePoints,isDisabled:a[i].isDisabled,label:a[i].label});e.push(n)}A(e)}),[a]);var J=function(){var e=new De.a;[1,2,3,4,5,6].forEach((function(a){var c,s=function(e){var a=Object(S.jsx)(Se,{traceData:t.length>0&&p?t[e-1]:[],prototypesData:v?Te[e-1]:[],userPcv:D?P[e-1]:[],coeffNumber:e,showNumber:u});return we.a.renderToStaticMarkup(a)}(a);_&&(c=function(e){var t=Object(S.jsx)(Ie,{wavescapeMatrix:n.length>0?E[e-1]:[],wsNumber:e,showNumber:u,wsPhantomCurveHeight:i});return we.a.renderToStaticMarkup(t)}(a)),_&&e.file("wavescapes/wavescape".concat(a,".svg"),c),e.file("fourier/space".concat(a,".svg"),s)})),e.generateAsync({type:"blob"}).then((function(e){Object(Ce.saveAs)(e,"images.zip")})),l(!1)};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(te.a,{variant:"contained",size:"small",color:"primary",sx:{width:"35%",margin:"auto",marginTop:1,marginBottom:1},onClick:function(){l(!0)},children:"Export images"}),Object(S.jsxs)(Pe.a,{open:o,onClose:R,children:[Object(S.jsx)(Ee.a,{children:"Saving options"}),Object(S.jsx)(Fe.a,{children:Object(S.jsxs)(ze.a,{children:[Object(S.jsx)(C.a,{sx:{color:"black"},children:"Check the box in order to include the correspondent element in the exported images:"}),Object(S.jsx)(Be.a,{sx:{marginLeft:2,marginTop:1},children:Object(S.jsxs)(We.a,{sx:{color:"black"},children:[Object(S.jsx)(he.a,{control:Object(S.jsx)(Re.a,{size:"small",checked:u,onChange:function(){f(!u)}}),label:"Coefficients numbers"}),Object(S.jsx)(he.a,{control:Object(S.jsx)(Re.a,{size:"small",checked:p,onChange:function(){g(!p)}}),label:"Full trace"}),Object(S.jsx)(he.a,{control:Object(S.jsx)(Re.a,{size:"small",checked:v,onChange:function(){y(!v)}}),label:"Prototypes"}),Object(S.jsx)(he.a,{control:Object(S.jsx)(Re.a,{size:"small",checked:D,onChange:function(){M(!D)}}),label:"Custom pitch-class vectors"})]})})]})}),Object(S.jsxs)(Ae.a,{children:[Object(S.jsx)(te.a,{onClick:R,children:"Close"}),Object(S.jsx)(te.a,{onClick:function(e){J()},autoFocus:!0,children:"Save"}),Object(S.jsx)(Ne.a,{id:Y,open:U,anchorEl:G,onClose:function(){q(null)},anchorOrigin:{vertical:"center",horizontal:"left"},children:Object(S.jsx)(C.a,{color:"error",sx:{p:2},children:"Upload a MIDI file"})})]})]})]})},Le=a.p+"static/media/wavescape1.cf71d93b.svg",Ve=a.p+"static/media/wavescape2.8f5fabf1.svg",He=a.p+"static/media/wavescape3.0faf025f.svg",Ge=a.p+"static/media/wavescape4.aad0e8c0.svg",qe=a.p+"static/media/wavescape5.f91b1139.svg",Ue=a.p+"static/media/wavescape6.df672271.svg",Ye=a.p+"static/media/space1.566a5ba2.svg",Je=a.p+"static/media/space2.3e28cc51.svg",Ke=a.p+"static/media/space3.9738264e.svg",Xe=a.p+"static/media/space4.054806a8.svg",Ze=a.p+"static/media/space5.77046a5c.svg",Qe=a.p+"static/media/space6.8a2b4e79.svg",$e=a.p+"static/media/dh_center_logo.b01c2668.svg",et=a.p+"static/media/Logo_EPFL.1808649a.svg",tt=a.p+"static/media/Wurzburg_Logo.4a2ce121.png",at=a(470);var nt=function(){return Object(S.jsxs)(b.a,{sx:{marginTop:1,textAlign:"center"},children:[Object(S.jsxs)(x.a,{spacing:10,sx:{justifyContent:"center"},direction:"row",children:[Object(S.jsx)("img",{alt:"",width:150,height:150,src:et}),Object(S.jsx)("img",{alt:"",width:150,src:$e}),Object(S.jsx)(b.a,{sx:{paddingTop:"45px"},children:Object(S.jsx)("img",{alt:"",width:143.64,height:63,src:tt})})]}),Object(S.jsx)(C.a,{children:"Project \u201cEnabling interactive music visualization for a wider community\u201d"}),Object(S.jsxs)(x.a,{sx:{justifyContent:"center"},direction:"row",children:[Object(S.jsxs)(C.a,{sx:{marginRight:1},children:["Project lead:"," ",Object(S.jsx)(at.a,{target:"_blank",href:"https://twitter.com/fabianmoss",children:"Fabian C. Moss"}),";"," ",Object(S.jsx)(at.a,{target:"_blank",href:"https://twitter.com/danielharasim",children:"Daniel Harasim"})]}),Object(S.jsx)("span",{children:"\u2013"}),Object(S.jsxs)(C.a,{sx:{marginLeft:1,marginRight:1},children:["Scientific advisor:"," ",Object(S.jsx)(at.a,{target:"_blank",href:"https://people.bu.edu/jyust/index.html",children:"Jason Yust"})]}),Object(S.jsx)("span",{children:"\u2013"}),Object(S.jsxs)(C.a,{sx:{marginLeft:1},children:["Developer:"," ",Object(S.jsx)(at.a,{target:"_blank",href:"https://github.com/heyGio",children:"Giovanni Affatato"})]})]}),Object(S.jsxs)(x.a,{sx:{justifyContent:"center"},direction:"row",children:[Object(S.jsx)(at.a,{sx:{marginRight:1},href:"https://github.com/DCMLab/MIDFT",children:"GitHub repo"}),Object(S.jsx)("span",{children:"\u2022"}),Object(S.jsx)(at.a,{sx:{marginLeft:1,marginRight:1},href:"https://www.epfl.ch/labs/dcml/",children:"DCML page"}),Object(S.jsx)("span",{children:"\u2022"}),Object(S.jsx)(at.a,{sx:{marginLeft:1},href:"https://github.com/DCMLab/MIDFT/blob/main/LICENSE",children:"Copyright"})]})]})},it=a(436),ct=a(56),st=["href"],rt=function(e){return Object(S.jsx)(b.a,{sx:{padding:1,color:"#31708f",backgroundColor:"#d9edf7",borderRadius:"10px",width:"90%",margin:"auto"},children:e.children})},ot=function(e){var t=e.scale,a=e.alt,n=e.src;return Object(S.jsx)(b.a,{sx:{width:t,margin:"auto",marginBottom:2},children:Object(S.jsx)("img",{alt:a,style:{height:"100%",width:"100%",objectFit:"contain"},src:n})})},lt=function(e){var t=Object.assign({},e);return Object(S.jsx)(C.a,Object(d.a)({variant:"body1",sx:{marginBottom:3,fontSize:20}},t))},ht=function(e){var t=e.href,a=Object(ct.a)(e,st);return Object(S.jsx)(at.a,Object(d.a)(Object(d.a)({target:"_blank",underline:"hover",href:t},a),{},{sx:Object(d.a)({color:"#1976d2",textDecorationColor:"#1976d266"},a.sx),children:a.children}))};function dt(e){var t=e.setOpen,a=e.setInAnalysisPage,n=Object(c.useRef)(null),i=Object(c.useRef)(null),s=Object(c.useRef)(null),r=Object(c.useRef)(null),o=Object(c.useRef)(null),l=Object(c.useRef)(null),h=170;return Object(c.useEffect)((function(){a(!1),t(!1)}),[]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(me.a,{sx:{margin:"auto",maxWidth:"1200px"},children:Object(S.jsxs)(b.a,{sx:{padding:2,width:"1060px",margin:"auto",paddingBottom:5},children:[Object(S.jsx)(C.a,{variant:"h2",style:{fontWeight:"bold",marginLeft:20,textAlign:"center"},children:"Welcome!"}),Object(S.jsx)(it.a,{sx:{marginBottom:5}}),Object(S.jsxs)(x.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},direction:"row",children:[Object(S.jsx)("img",{alt:"",width:h,height:h,src:Le}),Object(S.jsx)("img",{alt:"",width:h,height:h,src:Ve}),Object(S.jsx)("img",{alt:"",width:h,height:h,src:He}),Object(S.jsx)("img",{alt:"",width:h,height:h,src:Ge}),Object(S.jsx)("img",{alt:"",width:h,height:h,src:qe}),Object(S.jsx)("img",{alt:"",width:h,height:h,src:Ue})]}),Object(S.jsxs)(x.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:6},direction:"row",children:[Object(S.jsx)("img",{alt:"",width:h,height:h,src:Ye}),Object(S.jsx)("img",{alt:"",width:h,height:h,src:Je}),Object(S.jsx)("img",{alt:"",width:h,height:h,src:Ke}),Object(S.jsx)("img",{alt:"",width:h,height:h,src:Xe}),Object(S.jsx)("img",{alt:"",width:h,height:h,src:Ze}),Object(S.jsx)("img",{alt:"",width:h,height:h,src:Qe})]}),Object(S.jsxs)(lt,{children:["This web application is an open-source online tool for interactive music visualization. It aims at bridging the gap between mathematical music theory and music enthusiasts. In recent years, music theorists have discovered that the"," ",Object(S.jsx)(ht,{href:"https://en.wikipedia.org/wiki/Discrete_Fourier_transform",children:"Discrete Fourier Transform (DFT)"})," ","can be used to analyze the pitch-class content of pieces of music, for instance to compare the tonal organization of different pieces. It may also reveal interesting sections in a piece that eluded a theorist\u2019s inspection. This technique has consequently opened up new avenues for both theoretical and historical music research"," ",Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),n.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:Object(S.jsx)("sup",{children:"[1]"})}),","," ",Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),i.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:Object(S.jsx)("sup",{children:"[2]"})}),","," ",Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),s.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:Object(S.jsx)("sup",{children:"[3]"})}),","," ",Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),r.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:Object(S.jsx)("sup",{children:"[4]"})}),". However, applying the DFT to music requires advanced mathematical and computational skills. Harnessing the full power of such a complex method so far remained restricted to only a small group of researchers.The app\u2019s interactive interface enables scholars and students of music, as well as musicians, to employ the DFT method in their research, teaching, and musical practice. It is moreover ideally suited to explore and to teach visualization techniques for complex cultural data, for example in Digital Humanities."]}),Object(S.jsxs)(lt,{children:["The"," ",Object(S.jsx)(ht,{target:"_self",href:"#theory",children:"Theory"})," ","page describes how to use and interpret the DFT for music analysis. It also explains the interface of the"," ",Object(S.jsx)(ht,{target:"_self",href:"#analysis",children:"Analysis"})," ","page. On that page, users can explore the DFT method by either manually entering"," ",Object(S.jsx)(ht,{href:"https://en.wikipedia.org/wiki/Set_theory_(music)",children:"pitch-class sets"}),", by uploading a music piece in"," ",Object(S.jsx)(ht,{href:"https://en.wikipedia.org/wiki/MIDI",children:"MIDI"})," ","format, or by connecting a MIDI device (e.g. MIDI keyboard or software) to the app."]}),Object(S.jsxs)(lt,{children:["No installation is required to use the app, and we hope that this will facilitate its adoption by the music theory community. The full feature set of the app is currently only supported with"," ",Object(S.jsx)(ht,{href:"https://www.google.com/chrome/index.html",children:"chrome"}),". The program code is hosted on"," ",Object(S.jsx)(ht,{href:"https://github.com/DCMLab/MIDFT",children:"GitHub"})," ","under a GPL3 licence."]}),Object(S.jsxs)(lt,{children:["The capacities of midiVERTO have been described in"," ",Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),o.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:Object(S.jsx)("sup",{children:"[5]"})}),","," ",Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),l.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:Object(S.jsx)("sup",{children:"[6]"})}),"."]}),Object(S.jsx)(C.a,{variant:"h5",sx:{marginBottom:1},children:Object(S.jsx)("b",{children:"References"})}),Object(S.jsx)(C.a,{ref:n,children:"1: Amiot (2016). Music Through Fourier Space: Discrete Fourier Transform in Music Theory. Springer."}),Object(S.jsxs)(C.a,{ref:i,children:["2: Noll (2019). Insiders\u2019 Choice: Studying Pitch Class Sets Through Their Discrete Fourier Transformations. In"," ",Object(S.jsx)("i",{children:"Mathematics and Computation in Music"})," (pp. 371\u2013378). Springer."," ",Object(S.jsx)(ht,{href:"https://doi.org/10.1007/978-3-030-21392-3_32",children:"https://doi.org/10.1007/978-3-030-21392-3_32"})]}),Object(S.jsxs)(C.a,{ref:s,children:["3: Tymoczko & Yust (2019). Fourier Phase and Pitch-Class Sum. In",Object(S.jsx)("i",{children:"Mathematics and Computation in Music"})," (pp. 46\u201358). Springer."," ","",Object(S.jsx)(ht,{href:"https://doi.org/10.1007/978-3-030-21392-3_4",children:"https://doi.org/10.1007/978-3-030-21392-3_4"})]}),Object(S.jsxs)(C.a,{ref:r,children:["4: Viaccoz, C., Harasim, D., Moss, F. C., & Rohrmeier, M. (2022). Wavescapes: A visual hierarchical analysis of tonality using the discrete Fourier transform. Musicae Scientiae, 27(2), 390\u2013427."," ",Object(S.jsx)(ht,{href:"https://doi.org/10.1177/10298649211034906",children:"https://doi.org/10.1177/10298649211034906"})]}),Object(S.jsxs)(C.a,{ref:o,children:["5: Harasim, D., Affatato, G., & Moss, F. C. (2022). midiVERTO: A Web Application to Visualize Tonality in Real Time. In M. Montiel, O. A. Agust\xedn-Aquino, F. G\xf3mez, J. Kastine, E. Lluis-Puebla, & B. Milam (Eds.), ",Object(S.jsx)("i",{children:"Mathematics and Computation in Music"})," (pp. 363\u2013368). Springer International Publishing."," ",Object(S.jsx)(ht,{href:"https://doi.org/10.1007/978-3-031-07015-0_31",children:"https://doi.org/10.1007/978-3-031-07015-0_31"})]}),Object(S.jsxs)(C.a,{ref:l,children:["6: Moss, F. C., Affatato, G., & Harasim, D. (2022). Phantom Curves: Scientific Discovery through Interactive Music Visualization. In L. Pugin (Ed.),"," ",Object(S.jsx)("i",{children:"9th International Conference on Digital Libraries for Musicology"})," ","(pp. 60\u201364). Association for Computing Machinery."," ",Object(S.jsx)(ht,{href:"https://doi.org/10.1145/3543882.3543886",children:"https://doi.org/10.1145/3543882.3543886"})]})]})}),Object(S.jsx)(nt,{})]})}var jt=a(30);a(368);function ut(e){var t=e.setOpen,a=e.setInAnalysisPage,n=Object(c.useRef)(null),i=Object(c.useRef)(null),s=Object(c.useRef)(null),r=Object(c.useRef)(null),o=Object(c.useRef)(null),l=Object(c.useRef)(null),h=Object(c.useRef)(null),d=Object(c.useRef)(null),j=Object(c.useRef)(null);return Object(c.useEffect)((function(){a(!1),t(!1)}),[]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(me.a,{sx:{margin:"auto",maxWidth:"1200px"},children:Object(S.jsxs)(b.a,{sx:{padding:3,width:"1060px",margin:"auto"},children:[Object(S.jsx)(C.a,{variant:"h2",style:{fontWeight:"bold",marginLeft:20},children:"Manual"}),Object(S.jsx)(it.a,{}),Object(S.jsx)(C.a,{component:"span",children:Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),n.current.scrollIntoView({behavior:"smooth"})},href:"#File upload",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"File upload"})}),Object(S.jsx)("li",{children:Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),d.current.scrollIntoView({behavior:"smooth"})},href:"#DFT",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Discrete Fourier Transform of Pitch-Class Vectors"})}),Object(S.jsx)("li",{children:Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),i.current.scrollIntoView({behavior:"smooth"})},href:"#Wavescapes",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Wavescapes"})}),Object(S.jsx)("li",{children:Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),s.current.scrollIntoView({behavior:"smooth"})},href:"#Fourier Coefficient Spaces",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Fourier Coefficient Spaces"})}),Object(S.jsx)("li",{children:Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),r.current.scrollIntoView({behavior:"smooth"})},href:"#MIDI playback and overall layout",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"MIDI playback and overall layout"})}),Object(S.jsx)("li",{children:Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),o.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Manual entry of chords"})}),Object(S.jsx)("li",{children:Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),j.current.scrollIntoView({behavior:"smooth"})},href:"#Download images",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Coefficient Products and Phase Spaces"})}),Object(S.jsx)("li",{children:Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),h.current.scrollIntoView({behavior:"smooth"})},href:"#Download images",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Using midiVERTO with MuseScore"})}),Object(S.jsx)("li",{children:Object(S.jsx)(at.a,{underline:"hover",onClick:function(e){e.preventDefault(),l.current.scrollIntoView({behavior:"smooth"})},href:"#Download images",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Download images"})})]})}),Object(S.jsxs)(b.a,{sx:{paddingBottom:5,paddingTop:5},children:[Object(S.jsx)(C.a,{ref:n,variant:"h4",style:{fontWeight:"bold"},children:"File upload"}),Object(S.jsx)(it.a,{sx:{marginBottom:2}}),Object(S.jsxs)(lt,{children:["The easiest way to get started using the app is to find a MIDI file on the web and upload it. For example, we can use the main theme of the musical"," ",Object(S.jsx)(ht,{sx:{fontStyle:"italic"},href:"https://bitmidi.com/uploads/6508.mid",children:"Phantom of the Opera"}),". (Right-)Click on the link to download the file, switch to the"," ",Object(S.jsx)(ht,{target:"_self",href:"#/analysis",children:"Analysis"})," ","tab of this app, and upload it."," "]}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/8JdAyNM.png",scale:"50%"}),Object(S.jsxs)(lt,{children:["Before or after uploading the file, you can choose a"," ",Object(S.jsx)("b",{children:"Time resolution"})," either as a musical note value or as a duration in seconds. This affects into how many segments the MIDI file will be divided for analysis. If you change the resolution after the upload, you have to click on ",Object(S.jsx)("b",{children:"CHANGE"})," so that the time-resolution change takes effect. For the"," ",Object(S.jsx)("i",{children:"Phantom of the Opera"})," example, we recommend a resolution of an eighth note."]}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/ykmKgrB.png",scale:"45%"})]}),Object(S.jsxs)(b.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(C.a,{ref:d,variant:"h4",style:{fontWeight:"bold"},children:"Discrete Fourier Transform of Pitch-Class Vectors"}),Object(S.jsx)(it.a,{sx:{marginBottom:2}}),Object(S.jsx)(lt,{children:"The analyses performed by midiVERTO are all based on the discrete Fourier transform (DFT) of pitch-class vectors (pc vectors). A pc vector is a 12-dimensional vector where each entry contains a weighting for a specific pitch class, starting with C and going up chromatically. In midiVERTO, these entries correspond to duration-weighted counts of occurrences of the pitch class within some time window of the MIDI file."}),Object(S.jsxs)(lt,{children:["The DFT converts these pc vectors to a different 12-D vector where the entries (called ",Object(S.jsx)("i",{children:"coefficients"}),") represent periodic functions over the octave rather than individual pitch classes. We ignore the zeroeth coefficient (which is a constant representing the sum of all weights) and entries beyond the sixth, which reproduce information from coefficients 1 through 6. The number of a coefficient corresponds to a division of the octave. Coefficients have a ",Object(S.jsx)("i",{children:"magnitude"}),", which indicates how similar that pc vector is to a simple periodic function with that division of the octave, and a ",Object(S.jsx)("i",{children:"phase"}),", which indicates where that function is centered on the pitch-class circle."]}),Object(S.jsxs)(lt,{children:["Thus, the ",Object(S.jsx)("i",{children:"first"})," coefficient reflects how concentrated the pitch-class vector is at one place in the pitch-class circle. The",Object(S.jsx)("i",{children:"second"})," coefficient reflects how concentrated it is on two points a tritone apart. The ",Object(S.jsx)("i",{children:"third"})," coefficient shows how concentrated it is on three points on the pitch-class circle separated by major thirds, i.e., how triad-like it is, and the",Object(S.jsx)("i",{children:"fourth"})," coefficient on four points separated by minor thirds, how much it resembles a diminished seventh chord. A periodic function for the ",Object(S.jsx)("i",{children:"fifth"})," coefficient does not divide the 12 pitch-classes evenly, but the peaks of this function arrange the pitch classes in circle-of-fifths order, which means that the fifth coefficient reflects how concentrated the pc vector is on the circle of fifths, or its ",Object(S.jsx)("i",{children:"diatonicity"}),". Finally, the ",Object(S.jsx)("i",{children:"sixth"})," coefficient splits the pitch classes into two whole tone scales and shows how much the pc vector is weighted to one or the other."]}),Object(S.jsxs)(lt,{children:["Phase values for all coefficients are set to 0 = C and go clockwise as the pitch-class value ascends. For instance a phase value of 0 on coefficient 1 means that the pc vector is balanced around C on the pitch-class circle, a phase value of"," ",Object(S.jsx)(jt.a,{math:"\\pi / 6"})," would mean it is balanced around C#, and so on. For coefficient 2, a phase value of 0 means that the pc vector is balanced around C and F#, a phase value of"," ",Object(S.jsx)(jt.a,{math:"\\pi / 3"})," means it's balanced around C# and G, and so on."]}),Object(S.jsx)(lt,{children:"For more on the DFT on pc vectors, see [links]."})]}),Object(S.jsxs)(b.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(C.a,{ref:i,variant:"h4",style:{fontWeight:"bold"},children:"Wavescapes"}),Object(S.jsx)(it.a,{sx:{marginBottom:2}}),Object(S.jsxs)(lt,{children:["Depending on the length of the piece and the chosen time resolution, the app might take a while until the file is processed. When processing has finished, the app visualizes the piece with six triangular plots called ",Object(S.jsx)("i",{children:"Wavescapes"})," (details about this analysis method are described"," ",Object(S.jsx)(ht,{href:"https://doi.org/10.1177/10298649211034906",children:"in this paper"}),")."]}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/ySOPcoP.png",scale:"90%"}),Object(S.jsx)(lt,{children:"Wavescapes display the DFT on pc vectors, described in the previous section, at all possible different segmentations of the MIDI file. The bottom rows of the wavescapes show DFTs at the minimal time resolution set by the user, and the top points show DFTs for the pc content of entire piece. The intensity values at each point reflect the magnitude of the given coefficient while the colors indicate the phase values (using a color wheel with red set to zero)."}),Object(S.jsxs)(lt,{children:["Back to the ",Object(S.jsx)("i",{children:"Phantom"})," example: there are a number of interesting observations about the tonality of this piece that we can draw from the wavescapes."]}),Object(S.jsxs)(lt,{children:[Object(S.jsx)("b",{children:"Wavescapes 3 and 5"})," have the strongest colors, meaning that diatonic scales as well as augmented triads play and important role for the harmonic organization of the piece."]}),Object(S.jsxs)(lt,{children:[Object(S.jsx)("b",{children:"On the lower levels of the 3rd wavescape,"})," the colors blue - green - yellow - pink ( - green - ) pink change in regular time intervals. Tracing this sequence of colors in the corresponding Fourier Coefficient Space (see also below), we observe that these colors correspond to the labels ",Object(S.jsx)(jt.a,{math:"H_{1,2}"}),","," ",Object(S.jsx)(jt.a,{math:"H_{2,3}"}),", ",Object(S.jsx)(jt.a,{math:"H_{0, 3}"}),", and ",Object(S.jsx)(jt.a,{math:"H_{0, 1}"}),", respectively (in clockwise direction). A label ",Object(S.jsx)(jt.a,{math:"H_{i,j}"})," denotes the hexatonic scale that contains the"," ",Object(S.jsx)(ht,{href:"https://en.wikipedia.org/wiki/Pitch_class",children:"pitch classes"})," ",Object(S.jsx)(jt.a,{math:"i"})," and ",Object(S.jsx)(jt.a,{math:"j"})," (e.g.,"," ",Object(S.jsx)(jt.a,{math:"H_{1,2}=\\{1,2,5,6,9,10\\}"}),"). The overall harmonic trajectory of this piece moves in descending minor thirds, and at the end it briefly moves across the plane to its hexatonic pole."]}),Object(S.jsxs)(lt,{children:[Object(S.jsx)("b",{children:"On the lower levels of the 5th wavescape,"})," the color pattern is roughly orange/red - green - pink, showing that the initial, middle, and final parts of this piece modulate through different keys. Note that the red and pink areas are adjacent to each other but opposite to the green area, again showing a symmetrical organization in terms of keys."]}),Object(S.jsxs)(lt,{children:[Object(S.jsx)("b",{children:"Finally, the 6th wavescape"})," shows that the first half of the piece is closer to the whole-tone scale containing C (",Object(S.jsx)(jt.a,{math:"WT_0"}),", reddish) and the second half is closer to the whole-tone scale containing C# (",Object(S.jsx)(jt.a,{math:"WT_1"}),", blueish)."]}),Object(S.jsx)(lt,{children:"Observations like these can guide analyses and inspire hearings of musical pieces, in particular regarding the relation of harmony and form."})]}),Object(S.jsxs)(b.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(C.a,{ref:s,variant:"h4",style:{fontWeight:"bold"},children:"Fourier Coefficient Spaces"}),Object(S.jsx)(it.a,{sx:{marginBottom:2}}),Object(S.jsxs)(lt,{children:["Below the wavescapes you see the respective"," ",Object(S.jsx)("b",{children:"Fourier Coefficient Spaces"}),". Each point in one of these spaces corresponds to the value of that Fourier coefficient for one of the MIDI file's segments at the specified resolution. The color and intensity coding is the same as for the wavescapes described above. Distances from the center correspond to magnitudes, and angles correspond to phases. (Fourier coefficients can also be defined as ",Object(S.jsx)("i",{children:"complex numbers"}),", and in these spaces the real value is given by the x-coordinate and the imaginary value by the y-coordinate.)"]}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/d8Pzxs6.png",scale:"90%"}),Object(S.jsx)(lt,{children:"Change the window length and see how the arrangement of the points changes, too."}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/pA1WR1E.png",scale:"45%"}),Object(S.jsx)(lt,{children:"Very short window lengths tend to distribute the segments of the piece more evenly throughout the circles. In contrast, long window lengths collapse the segments into a small area, and even into a single point if the window covers the entire piece (this corresponds to the topmost point of the wavescapes). It is therefore a good idea to try different window lengths in order to identify an appropriate level of detail, in which the piece moves along rather smooth paths in at least some coefficients. The gif below shows the effect of increasing the window size."}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/j3OeT3d.gif",scale:"90%"}),Object(S.jsx)(lt,{children:"Changing the parameters time resolution and window length yield different analytical perspectives on the piece and allow for a scalable and dynamic reading of a piece."}),Object(S.jsxs)(rt,{children:[Object(S.jsx)("b",{children:"Note:"})," the wavescapes do not change because re-rendering them could last very long if the piece is long and the segmentation is too fine-grained."]})]}),Object(S.jsxs)(b.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(C.a,{ref:r,variant:"h4",style:{fontWeight:"bold"},children:"MIDI playback and overall layout"}),Object(S.jsx)(it.a,{sx:{marginBottom:2}}),Object(S.jsx)(lt,{children:"On the bottom of the main window, there are options to control the playback of the uploaded MIDI file."}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/JOci5Ww.png",scale:"40%"}),Object(S.jsx)(lt,{children:"Several other options to change the visual layout of the app are available in the bottom menu. You can toggle:"}),Object(S.jsx)(C.a,{sx:{fontSize:20},component:"span",children:Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:"the full trace,"}),Object(S.jsx)("li",{children:"the prototypes (circular legends), and"}),Object(S.jsxs)("li",{children:["the values for phase and magnitude (",Object(S.jsx)(jt.a,{math:"\\phi"})," and"," ",Object(S.jsx)(jt.a,{math:"\\mu"}),")."]})]})}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/tD8U2GU.png",scale:"40%"}),Object(S.jsx)(lt,{children:"The size of the Fourier-space circles can also be adjusted relative to the size of your browser window."}),Object(S.jsx)(lt,{children:"You can modify the overall layout by selecting one of the pre-defined options on the far left (1x6, 2x3, 3x2, 6x1); the default is 2x3. On the top left, next to the file upload, you find an arrow to hide/show the main menu, e.g., to focus on the wavescapes and Fourier coefficients."}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/Ym4gr84.png",scale:"90%"})]}),Object(S.jsxs)(b.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(C.a,{ref:o,variant:"h4",style:{fontWeight:"bold"},children:"Manual entry of chords"}),Object(S.jsx)(it.a,{sx:{marginBottom:2}}),Object(S.jsxs)(lt,{children:["Apart from uploading a musical piece as a MIDI file, the app also allows you to enter your favorite pitch-class sets. This can be useful if you want to show, for instance, certain chord progressions, harmonic sequences, or voice-leading chains. It can also be useful to display interesting pitch-class sets taken from a particular piece. Those can be entered in the"," ",Object(S.jsx)("b",{children:"Custom pitch-class vectors"})," field which allows for two basic input formats."]}),Object(S.jsx)(C.a,{sx:{fontSize:20},component:"span",children:Object(S.jsxs)("ol",{children:[Object(S.jsxs)("li",{children:["Pitch-class (multi-)sets are enclosed in curly braces"," ",Object(S.jsx)("code",{children:"{"})," and ",Object(S.jsx)("code",{children:"}"})," and contain pitch classes (integers ranging from 0 to 11). We allow for multiple occurrences of pitch classes, for example you can enter"," ",Object(S.jsx)("code",{children:"(0, 0, 4, 7, 10)"})," for a C dominant-seventh chord with doubled C."]}),Object(S.jsxs)("li",{children:["(Weighted) pitch-class vectors are enclosed in parentheses"," ",Object(S.jsx)("code",{children:"("})," and ",Object(S.jsx)("code",{children:")"}),", and must have twelve comma-separated non-negative numbers. Internally, these vectors are normalized to sum to one, so only the relative weights are taken into account. For the C dominant-seventh chord from above one would enter",Object(S.jsx)("code",{children:"(2,0,0,0,1,0,0,1,0,0,1,0)"}),"."]})]})}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/VLfxxV9.png",scale:"40%"}),Object(S.jsxs)(rt,{children:[Object(S.jsx)("b",{children:"Note"}),": white space is ignored in the custom input field."]}),Object(S.jsx)(lt,{children:"The collection of manually entered pitch-class vectors is displayed below the input field. Entries in this collection can be toggled by clicking on them, or deleted by clicking on the x. When loading the app, three pitch-class vectors are already in the collection, and the first of them is active. They need to be deactivated or deleted if you don't want them to be displayed."}),Object(S.jsxs)(lt,{children:["This functionality can also be used to visualize pitch-class vectors from concrete compositions. Let's take the anacrusis of"," ",Object(S.jsx)(ht,{href:"https://imslp.org/wiki/3_Pieces,_Op.52_(Scriabin,_Aleksandr)",children:'Scriabin\u2019s op. 52/3 (1907) "Languorous Poem"'})," ","as a real-world example."]}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/cG9J08Z.png",scale:"35%"}),Object(S.jsxs)(lt,{children:["If we count each quarter note as 1 (and eight notes as 0.5), then its pitch-class content can be represented as the pitch-class vector ",Object(S.jsx)("code",{children:"(1.5, 0, 1, 0, 1, 1, 0, 0.5, 0, 0, 1.5, 0)"}),". The figure below shows with an asterisk where it is mapped to in the respective Fourier coefficient spaces."]}),Object(S.jsx)(ot,{alt:" ",src:"https://i.imgur.com/9x6GLVG.png",scale:"90%"}),Object(S.jsxs)(lt,{children:["If we count each quarter note as 1 (and eight notes as 0.5), then its pitch-class content can be represented as the pitch-class vector ",Object(S.jsx)("code",{children:"(1.5, 0, 1, 0, 1, 1, 0, 0.5, 0, 0, 1.5, 0)"}),". The figure below uses an asterisk to show where it is mapped to in the respective Fourier coefficient spaces."]}),Object(S.jsxs)(lt,{children:["This chord can be understood as a C7/9/11 chord despite the fact that the key signature indicates B major / G ",Object(S.jsx)("span",{children:"\u266f"})," ","minor. Being a dominant, it strongly points to the F-major prototype (marked by ",Object(S.jsx)("span",{children:"\u266d"})," ) in the fifth coefficient. Connoisseurs of Scriabin's harmonic language will recognize this chord as the tritone substitution of the extended dominant on F",Object(S.jsx)("span",{children:"\u266f"}),"."]}),Object(S.jsxs)(rt,{children:[Object(S.jsx)("b",{children:"Note"}),": Of course you are free to enter any pitch-class vector. It does not need to correspond to standard chords but can also, for example, refer to segments (potentially non-contiguous) in an atonal composition."]})]}),Object(S.jsxs)(b.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(C.a,{ref:j,variant:"h4",style:{fontWeight:"bold"},children:"Coefficient Products and Phase Spaces"}),Object(S.jsx)(it.a,{sx:{marginBottom:2}}),Object(S.jsx)(lt,{children:"At the bottom of the results is a section that can do analyses involving multiple DFT coefficients at the same time. Dropdown menus allow users to select two coefficients (x and y). midiVERTO produces uses these selections to produce four visualizations: two coefficient product spaces, a phase space, and a phase space for the two coefficient products."}),Object(S.jsxs)(lt,{children:["The coefficient products multiply three DFT coefficients as complex numbers, where the indexes of these three coefficients must add up to 12. The user chooses the first coefficient, x, (index from 1 to 6) and the second, y, (from 1 to 5), and the third is given by the difference ",Object(S.jsx)(jt.a,{math:"12 \u2013 x \u2013 y"}),". For instance if the user chooses coefficients 3 and 5, the third coefficient index is ",Object(S.jsx)(jt.a,{math:"12 \u2013 3 \u2013 5 = 4"}),". Interesting properties of coefficient products include:",Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:"They are transposition invariant (the phases in addition to the magnitudes). This means if you transpose a set the coefficient product does not change."}),Object(S.jsx)("li",{children:"Inversion reverses the imaginary part but does not affect the real part. In other words, inversion is a reflection over the real axis."}),Object(S.jsx)("li",{children:"Complementation reverse both the real and imaginary parts. In other words, complementation (or, subtracting all the values in the pc vector from a constant) is a 180\xb0 rotation."}),Object(S.jsx)("li",{children:"A single pitch class is always positive real."})]}),"These are discussed in more detail in"," ",Object(S.jsx)(ht,{href:"https://link.springer.com/chapter/10.1007/978-3-031-07015-0_23",children:"Yust & Amiot 2022"})," ","[",Object(S.jsx)(ht,{href:"https://sites.bu.edu/jyust/files/2022/09/nonSpectralrevFin.pdf",children:"PDF"}),"]."]}),Object(S.jsxs)(lt,{children:["The magnitude of a coefficient product is a product of the magnitudes and its phase is the sum of phases mod"," ",Object(S.jsx)(jt.a,{math:"2\\pi"}),". The transposition invariance of the magnitudes of coefficient products is therefore unremarkable, since magnitudes of individual coefficients are transposition invariant. On the other hand, the transposition invariance of the phases ",Object(S.jsx)("i",{children:"is"})," remarkable, since individual phases are determined by transposition."]}),Object(S.jsxs)(lt,{children:["The lower of the two coefficient product spaces uses the same first coefficient entered by the user, but takes the complement of the second coefficient entered by the user, which can lead to a different product. For instance the default setting of"," ",Object(S.jsx)(jt.a,{math:"x = 3"})," and ",Object(S.jsx)(jt.a,{math:"y = 5"})," results in a product of coefficients 3, 5, and 4, and a compementary product of 3, 7, and 2. Coefficient 7 is the complex conjugate of coefficient 5, meaning it has the same magnitude but negative phase. Coefficients 4 and 2, however, are completely different and effected by the constraint that factors of coefficient products must sum to 12."]}),Object(S.jsxs)(lt,{children:["The right side of the lower panel has two phase spaces, meaning spaces that take phase values as coordinates, and ignore magnitudes. The one on top uses the individual phases for the coefficients selected by the user. This kind of phase space is discussed in"," ",Object(S.jsx)(ht,{href:"https://read.dukeupress.edu/journal-of-music-theory/article-abstract/59/1/121/14499/Schubert-s-Harmonic-Language-and-Fourier-Phase",children:"Yust 2015"})," ","[",Object(S.jsx)(ht,{href:"https://people.bu.edu/jyust/revFinal_SchubertDFT.pdf",children:"PDF"}),"] and"," ",Object(S.jsx)(ht,{href:"https://read.dukeupress.edu/journal-of-music-theory/article-abstract/60/2/213/14521/Special-CollectionsRenewing-Set-Theory",children:"Yust 2016"})," ","[",Object(S.jsx)(ht,{href:"https://open.bu.edu/handle/2144/39071",children:"PDF"}),"] . The second phase space uses the phase values for the two coefficient product spaces to the left."]}),Object(S.jsx)(lt,{children:"The default setting of coefficients 3 and 5 produces spaces that are of interest for music based on major and minor keys and functional harmony. Specifically, for sufficiently large windows, regions in the phase space on coefficients 3 and 5 correspond to keys. Vertical positions (coefficient 5) correspond to key signatures, while horizontal positions (coefficient 3) indicate a triadic balance and distinguish modes. The coefficient product on 3, 7, and 2 (lower left) is typically large and positive-real for triadic harmony and major/minor keys. Smaller values and negative real values may indicate harmonic ambiguity or chromaticism."}),Object(S.jsx)(lt,{children:"The coefficient product spaces are normalized to make the visualization as useful as possible, by setting 1 (the outer rim of the circle) to a maximum possible value given the total pc weighting (or zeroeth coefficient). This maximum varies depending on the kind of product the user enters. Larger maxima are possible if the product includes duplicates of a single coefficient (or a coefficient and its complement), and they are also larger if coefficient 6 (which has no complement) is included."})]}),Object(S.jsxs)(b.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(C.a,{ref:h,variant:"h4",style:{fontWeight:"bold"},children:"Using midiVERTO with MuseScore"}),Object(S.jsx)(it.a,{sx:{marginBottom:2}}),Object(S.jsxs)(lt,{children:["The application and MuseScore can interact via MIDI messages. In order to communicate, we have to set up a virtual MIDI cable that connects MuseScore to the application:",Object(S.jsxs)("ul",{children:[Object(S.jsxs)("li",{children:[Object(S.jsx)("b",{children:"Windows"}),Object(S.jsxs)("ul",{children:[Object(S.jsxs)("li",{children:["Download and install"," ",Object(S.jsx)(ht,{href:"http://www.tobias-erichsen.de/software/loopmidi.html",children:"loopMIDI"})]}),Object(S.jsx)("li",{children:"Open loopMIDI and use the \u201c+\u201d and \u201c-\u201d buttons on the bottom to add or remove MIDI loopbacks. At least one loopback must be active"})]})]}),Object(S.jsxs)("li",{children:[Object(S.jsx)("b",{children:"macOS"}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:"Open Audio MIDI Setup in Applications \u2192 Utilities directory"}),Object(S.jsx)("li",{children:'Double click on IAC Driver and check the "Device is online" box'}),Object(S.jsx)("li",{children:"Add and remove buses in Ports tab, at least one must be active"})]})]}),Object(S.jsxs)("li",{children:[Object(S.jsx)("b",{children:"Linux"}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:'One virtual cable activated by default called "Midi Through Port-0"'}),Object(S.jsxs)("li",{children:["To add more virtual cables (3 in this example), use the commands: ",Object(S.jsx)("br",{}),Object(S.jsx)("code",{children:"sudo modprobe -r snd-seq-dummy"})," ",Object(S.jsx)("br",{}),Object(S.jsx)("code",{children:"sudo modprobe snd-seq-dummy ports=3"})]}),Object(S.jsxs)("li",{children:["To visualize and edit connections, install"," ",Object(S.jsx)("code",{children:"acconectgui"})]})]})]})]}),"Now we have to set up MuseScore to send MIDI messages via the virtual MIDI cable. In Edit \u2192 Preferences\u2026 \u2192 I/O \u2192 PortAudio \u2192 MIDI output, select the just created port. And only at the end open midiVERTO."]}),Object(S.jsxs)(rt,{children:[Object(S.jsx)("b",{children:"Note:"})," Follow the steps in the suggested order. It may happen that MuseScore does not detect the MIDI port if it is already in use (for example by the application itself). Thus, set up the cable first, then open MuseScore and change the preferences and at the end open midiVERTO."]})]}),Object(S.jsxs)(b.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(C.a,{ref:l,variant:"h4",style:{fontWeight:"bold"},children:"Download images"}),Object(S.jsx)(it.a,{sx:{marginBottom:2}}),Object(S.jsxs)(lt,{children:["Finally, to download the results (e.g., for teaching purposes, a presentation, or a publication) click on ",Object(S.jsx)("b",{children:"EXPORT IMAGES"})," at the bottom of the main menu on the left."," "]})]})]})}),Object(S.jsx)(nt,{})]})}var ft=Math.sin(Math.PI/3),bt=function(e){var t,a=e.wsNumber,n=e.wavescapeMatrix,i=e.currentWavescapeSubdiv,s=e.wavescapeWidth,r=e.wsPhantomCurveHeight,o=Object(c.useRef)(null),l=Object(c.useState)([]),d=Object(h.a)(l,2),j=d[0],u=d[1],f=10,b=s-f,x=s,p=Object(c.useState)(3),g=Object(h.a)(p,2),m=g[0],O=g[1];return Object(c.useEffect)((function(){b=s,x=s,O(m<1?1:Math.floor(.01*s))}),[s]),Object(c.useEffect)((function(){var e,a=o.current,i=a.getContext("2d"),c=[f,f],s=[a.width-c[0],a.height-c[1]];n&&(e=n[0].length,i.clearRect(0,0,i.canvas.width,i.canvas.height),t=function(e,t,a,n,i){for(var c=e/a,s=[],r=0;r<a+1;r++){for(var o=[],l=0;l<a+1;l++)r<=l&&o.push({x:(l-r)*c+r*c/2+n,y:r*c+i});s.push(o)}return s}(s[0],0,e,c[0],c[1]),u(t),function(e,t,a){for(var n=0;n<e.length-1;n++)for(var i=0;i<e[n].length-1;i++)0===n?(t.beginPath(),t.moveTo(e[n][i].x,e[n][i].y),t.lineTo(e[n][i+1].x,e[n][i+1].y),t.lineTo(e[n+1][i].x,e[n+1][i].y),t.fillStyle=a[n][i],t.fill()):(t.beginPath(),t.moveTo(e[n][i].x,e[n][i].y),t.lineTo(e[n-1][i+1].x,e[n-1][i+1].y),t.lineTo(e[n][i+1].x,e[n][i+1].y),t.lineTo(e[n+1][i].x,e[n+1][i].y),t.fillStyle=a[n][i],t.fill())}(t,i,n))}),[n,b,x]),Object(S.jsxs)("svg",{id:"wavescape".concat(a),width:b+f,height:x,xmlns:"http://www.w3.org/2000/svg",children:[Object(S.jsxs)("g",{transform:"translate(".concat(.06*b,",").concat(.1*b,")"),children:[Object(S.jsx)("circle",{cx:"5%",cy:"1%",r:"".concat(b/100*2.8,"px"),fill:"black"}),Object(S.jsx)("text",{fontSize:"".concat(b/100*5.2,"px"),textAnchor:"middle",x:"5%",y:"2.8%",fill:"white",children:a})]}),Object(S.jsxs)("g",{transform:"scale(".concat(1,", ",-ft,") translate(",0,",").concat(-x,")"),children:[Object(S.jsx)("foreignObject",{x:0,y:0,width:b,height:x,children:Object(S.jsx)("canvas",{width:b,height:x,ref:o})}),Object(S.jsx)("line",{x1:.5*r*b+5,y1:(x-20)*r+f,x2:-.5*r*b+b+5,y2:(x-20)*r+f,stroke:"black",strokeDasharray:"4 2"}),j.length>0?j[0].map((function(e,t){return Object(S.jsx)("line",{x1:e.x,x2:e.x,y1:e.y-m,y2:e.y+m,stroke:"grey",strokeWidth:"1px"},"tick".concat(t))})):null,j.length>0&&j[0].length>0?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("line",{x1:j[0][0].x,x2:j[0][j[0].length-1].x,y1:j[0][0].y,y2:j[0][j[0].length-1].y,stroke:"grey",strokeWidth:"2px"}),Object(S.jsx)("line",{x1:j[0][j[0].length-1].x,x2:j[j.length-1][0].x,y1:j[0][j[0].length-1].y,y2:j[j.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(S.jsx)("line",{x1:j[0][0].x,x2:j[j.length-1][0].x,y1:j[0][0].y,y2:j[j.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(S.jsx)("circle",{cx:(j[0][i].x+j[0][i+1].x)/2,cy:(j[0][i].y+j[0][i+1].y)/2,r:.01*b,fill:"white"}),Object(S.jsx)("circle",{cx:(j[0][i].x+j[0][i+1].x)/2,cy:(j[0][i].y+j[0][i+1].y)/2,r:.01*b,stroke:"black",strokeWidth:1,fill:"transparent"})]}):null]})]})};var xt=function(e){var t=e.wavescapesData,a=e.currentWavescapeSubdiv,n=e.elemsWidth,i=e.wsPhantomCurveHeight;return Object(S.jsx)(b.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:t.length>0?t.map((function(e,t){return Object(S.jsx)(bt,{wsNumber:t+1,wavescapeMatrix:e,currentWavescapeSubdiv:a,wavescapeWidth:n,wsPhantomCurveHeight:i},"w.".concat(t))})):Object(S.jsx)(C.a,{color:"error",children:"No midi file uploaded"})})},pt=a(439),gt=null;var mt=function(e){var t,a=e.coeffNumber,n=e.protoDataCoeff,i=e.fullTrace,s=e.traceDataCoeff,r=e.userPcvsCoeff,o=e.currentSubdiv,l=e.performanceCoeff,d=e.targetCircleWidth,j=e.showMagAndPhase,u=e.showFullTrace,f=Object(c.useRef)(null),p=Object(c.useState)({mu:0,phi:0}),g=Object(h.a)(p,2),m=g[0],O=g[1],v=445,y=v,w=45,k=177.5,D=.01;function M(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=180*Math.atan2(t,e)/Math.PI,i=Math.sqrt(e*e+t*t);return a&&(i/=k),n=Math.round(n+Number.EPSILON),{mu:i=Math.round(100*(i+Number.EPSILON))/100,phi:n}}function I(){var e=f.current.getContext("2d");e.fillStyle="rgba(0, 0, 0, 0.1)",s.forEach((function(t){e.beginPath(),e.arc(t.x*k,-t.y*k,2.225,0,2*Math.PI,!0),e.fill()}))}return Object(c.useEffect)((function(){var e=f.current,t=e.getContext("2d"),a=Math.floor(k*devicePixelRatio),n=t.createImageData(2*a,2*a),i=n.data;if(e.width=v*devicePixelRatio,e.height=y*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width="445px",e.style.height="445px",!gt){for(var c=-a;c<a;c++)for(var r=-a;r<a;r++){var o=Math.sqrt(c*c+r*r);if(!(o>a)){var l=4*(c+a+(r+a)*(2*a)),h=G(c,r,o/a);i[l]=h.r,i[l+1]=h.g,i[l+2]=h.b,i[l+3]=h.a}}gt=n}t.putImageData(gt,0,0),u&&s&&(t.save(),t.translate(177.5,177.5),I(),t.restore())}),[v,y,k,s,u]),Object(c.useEffect)((function(){if(s&&s[o]){var e=s[o].x,t=s[o].y;O(M(e,t))}}),[o,s]),Object(c.useEffect)((function(){f.current.getContext("2d").getImageData(0,0,1,1)}),[]),Object(c.useEffect)((function(){if(s){var e=f.current.getContext("2d");e.save(),e.translate(177.5,177.5),I(),e.restore()}}),[i]),Object(S.jsx)(b.a,{sx:{marginBottom:2},children:Object(S.jsxs)("svg",{width:d,height:d,viewBox:"0 0 ".concat(v," ").concat(y),xmlns:"http://www.w3.org/2000/svg",children:[Object(S.jsxs)("g",{transform:"translate(32,8)",children:[Object(S.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(S.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:a})]}),Object(S.jsx)("g",{transform:"translate(".concat(125,",0)"),children:j?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("text",{x:"120",y:"23",style:{fontSize:"24px"},children:"\u03c6: ".concat(m.phi,"\xb0")}),Object(S.jsx)("text",{x:"34",y:"24",style:{fontSize:"24px"},children:"\u03bc: ".concat(m.mu)})]}):null}),Object(S.jsxs)("g",{transform:"translate(0,".concat(15,")"),children:[Object(S.jsx)("foreignObject",{x:w,y:w,width:v,height:y,children:Object(S.jsx)("canvas",{id:"circle".concat(a),style:{zIndex:"-1"},width:v,height:y,ref:f})}),Object(S.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(S.jsx)("path",{fill:"azure",d:L.a().innerRadius(176.5).outerRadius(180.5).startAngle(0).endAngle(2*Math.PI)()}),n?n.map((function(e,t){return function(e,t){var a=L.a().innerRadius(4.45).outerRadius(6.675).startAngle(0).endAngle(2*Math.PI),n="",i="",c=!1;if(e.label.includes("_")||e.label.includes("^"))for(var s=0;s<e.label.length;s++)"_"===e.label[s]&&(n=e.label.slice(0,s),i=e.label.slice(s+1,e.label.length),c=!0),"^"===e.label[s]&&(n=e.label.slice(0,s),i=e.label.slice(s+1,e.label.length));else n=e.label;var r=18*Math.sign(e.x),o=18*-Math.sign(e.y)+7;return"\u266f"===n&&(o-=3),"WT"===n&&"1"===i&&(r*=1.2),"WT"===n&&"0"===i&&(r*=1.4),"C"===n&&"o7"===i&&(r*=1.2),"O"===n&&"1,2"===i&&(o*=1.1),"C\u266f"===n&&"o7"===i&&(r*=1.1,o*=1.1),"D"===n&&"o7"===i&&(r*=.7,o*=.7),"H"===n&&"2,3"===i&&(r*=1.2,o*=1.2),"H"===n&&"1,2"===i&&(r*=.7,o*=.7),"\u03a9"===n&&(r=15,o=5),Object(S.jsxs)("g",{transform:"translate(".concat(e.x*k,",").concat(-e.y*k,")"),children:[Object(S.jsx)("path",{fill:"grey",d:a()},t),Object(S.jsxs)("text",{textAnchor:"middle",dx:r,dy:o,fontSize:"20px",children:[n,c?Object(S.jsx)("tspan",{fontSize:15,baselineShift:"sub",children:i}):Object(S.jsx)("tspan",{fontSize:15,baselineShift:"super",children:i})]})]},"p.".concat(t))}(e,t)})):null,0===l.x&&0===l.y?null:(t=l,Object(S.jsxs)("g",{transform:"translate(".concat(t.x*k,",").concat(-t.y*k,")"),children:[Object(S.jsx)("line",{x1:"0",x2:"0",y1:"7",y2:"-7",stroke:"black",strokeWidth:"1.5"}),Object(S.jsx)("line",{x1:"7",x2:"-7",y1:"0",y2:"0",stroke:"black",strokeWidth:"1.5"})]})),r?r.map((function(e,t){if(!e.isDisabled)return function(e,t,a,n,i,c){var s=M(a,n,!0),r=40;return Object(S.jsx)(pt.a,{placement:"top",arrow:!0,title:Object(S.jsxs)(x.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[Object(S.jsxs)("svg",{width:r,height:r,viewBox:"0 0 ".concat(r," ").concat(r),children:[Object(S.jsx)("circle",{cx:20,cy:20,r:20,strokeWidth:"1",fill:"#FFF",fillOpacity:1}),Object(S.jsx)("polyline",{transform:"translate(".concat(20,",").concat(20,") scale(",1.8,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(C.a,{children:e}),Object(S.jsx)(C.a,{children:"\u03bc: ".concat(s.mu," \u03c6: ").concat(-s.phi,"\xb0")})]})]}),children:Object(S.jsxs)("g",{children:[Object(S.jsx)("polyline",{transform:"translate(".concat(a,",").concat(n,") scale(").concat(i,")"),fill:"none",stroke:"black",strokeWidth:"1px",fillOpacity:0,points:t}),Object(S.jsx)("polyline",{transform:"translate(".concat(a,",").concat(n,") scale(").concat(i,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]})},"rtt.".concat(c))}(e.label,e.rosePoints,e.x*k,-e.y*k,.7,t)})):null,s?function(e){var t=L.a().innerRadius(0).outerRadius(e*v/2).startAngle(0).endAngle(2*Math.PI),a=L.a().innerRadius(e*v/2).outerRadius((e+.005)*v/2).startAngle(0).endAngle(2*Math.PI),n=[];n.push(1),n.push(.5);for(var i=2;i<7;i++)n.push(Math.round(100*(n[i-1]-.1))/100);return(o<7?s.slice(0,o+1):s.slice(o-7+1,o+1)).reverse().map((function(e,i){return Object(S.jsxs)("g",{children:[Object(S.jsx)("path",{transform:"translate(".concat(e.x*k,",").concat(-e.y*k,")"),fill:"white",fillOpacity:n[i],d:t()},i),Object(S.jsx)("path",{transform:"translate(".concat(e.x*k,",").concat(-e.y*k,")"),fill:"black",fillOpacity:n[i],d:a()},"t.".concat(i))]},"g.".concat(i))}))}(D):null]})]})]})})};var Ot=function(e){var t=e.fullTraces,a=e.coeffTracesData,n=e.showPrototypes,i=e.showMagAndPhase,s=e.userPcvs,r=e.currentSubdiv,o=e.midiDevNotesDftCoeffs,l=e.elemsWidth,d=e.showFullTrace,j=Object(c.useState)(Te),u=Object(h.a)(j,2),f=u[0],x=u[1],p=Object(c.useState)([]),g=Object(h.a)(p,2),m=g[0],O=g[1];return Object(c.useEffect)((function(){x(n?Te:[])}),[n]),Object(c.useEffect)((function(){for(var e=[],t=1;t<7;t++){for(var a=[],n=0;n<s.length;n++)a.push({x:s[n].coeffs[t].re,y:s[n].coeffs[t].im,rosePoints:s[n].rosePoints,isDisabled:s[n].isDisabled,label:s[n].label});e.push(a)}O(e)}),[s]),Object(S.jsx)(b.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[1,2,3,4,5,6].map((function(e){return Object(S.jsx)(mt,{coeffNumber:e,protoDataCoeff:f[e-1],fullTrace:t[e-1],traceDataCoeff:a[e-1],userPcvsCoeff:m[e-1],currentSubdiv:r,performanceCoeff:o[e],targetCircleWidth:l,showMagAndPhase:i,showFullTrace:d},"w.".concat(e))}))})},vt=a(471),yt=a(448),wt=a(440),kt=a(449),Dt=null;var Ct=function(e){var t=e.fullTraces,a=e.coeffTracesData,n=(e.showPrototypes,e.showMagAndPhase,e.userPcvs,e.currentSubdiv),i=(e.midiDevNotesDftCoeffs,e.elemsWidth),s=(e.showFullTrace,Object(c.useRef)(null)),r=Object(c.useRef)(null),o=Object(c.useState)(3),d=Object(h.a)(o,2),j=d[0],u=d[1],f=Object(c.useState)(5),p=Object(h.a)(f,2),g=p[0],m=p[1],O=Object(c.useState)(4),v=Object(h.a)(O,2),y=v[0],w=v[1],k=Object(c.useState)(11),D=Object(h.a)(k,2),M=D[0],I=D[1],T=Object(c.useState)(0),P=Object(h.a)(T,2),A=P[0],F=P[1],z=Object(c.useState)({x:0,y:0}),E=Object(h.a)(z,2),W=E[0],R=E[1],B=Object(c.useState)({x:0,y:0}),N=Object(h.a)(B,2),_=N[0],V=N[1],H=Object(c.useState)([]),q=Object(h.a)(H,2),U=q[0],Y=q[1],J=Object(c.useState)([]),K=Object(h.a)(J,2),X=K[0],Z=K[1],Q=Object(c.useState)(!0),$=Object(h.a)(Q,2),ee=$[0],te=$[1],ae=Object(c.useState)({x:0,y:0}),ne=Object(h.a)(ae,2),ie=ne[0],ce=ne[1],se=Object(c.useState)({x:0,y:0}),re=Object(h.a)(se,2),oe=re[0],he=re[1],je=Object(c.useState)([]),ue=Object(h.a)(je,2),fe=ue[0],be=ue[1],xe=Object(c.useState)([]),pe=Object(h.a)(xe,2),ge=pe[0],me=pe[1],Oe=function(e,t){return Array.from({length:(t-e)/1+1},(function(t,a){return e+1*a}))};function ve(e,t){var a={x:0,y:0};return a.x=e.x*t.x-e.y*t.y,a.y=e.x*t.y+e.y*t.x,a}function ye(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function we(e,t){var a={x:0,y:0};return a.x=e.x*t,a.y=e.y*t,a}function ke(e){var t={coeffNumber:0,conjugate:!1};return e>6?(t.coeffNumber=12-e-1,t.conjugate=!0):t.coeffNumber=e-1,t}Object(c.useEffect)((function(){if(w(12-j-g),I(12-g),F(g<j?g-j+12:g-j),a[0]){for(var e=[j,g,y],n=[],i=0;i<t[0].length;i++){for(var c={x:0,y:0},s=[],r=void 0,o=0;o<3;o++)if((r=ke(e[o])).conjugate){var h=a[r.coeffNumber][i],d={x:0,y:0};d.x=h.x,d.y=-1*h.y,s.push(d)}else s.push(a[r.coeffNumber][i]);if(c=ve(s[0],s[1]),c=ve(c,s[2]),ee){for(var u=we(c,1/ye(c)),f=0,b=0;b<5;b++)f+=2*Math.pow(ye(a[b][i]),2);f+=Math.pow(ye(a[5][i]),2);for(var x=1,p=0;p<e.length;p++)6===e[p]?x*=Math.sqrt(Math.pow(ye(s[p]),2)/f):x*=Math.sqrt(2*Math.pow(ye(s[p]),2)/f);var m=e.map((function(e){return ke(e).coeffNumber}));3===m[0]&&3===m[1]&&3===m[2]?x*=Math.sqrt(1):Object(l.a)(new Set(m)).length<3?x*=Math.sqrt(6.75):x*=Math.sqrt(27),c=we(u,x)}n.push(c)}Y(n);for(var O=[],v=0;v<t[0].length;v++){for(var k=[],D=void 0,C=0;C<2;C++)if((D=ke(e[C])).conjugate){var S=a[D.coeffNumber][v],T={x:0,y:0};T.x=S.x,T.y=-1*S.y,k.push(T)}else k.push(a[D.coeffNumber][v]);var P=Math.atan2(k[0].y,k[0].x)/Math.PI,z=Math.atan2(k[1].y,k[1].x)/Math.PI;O.push({x:P,y:z})}Z(O),e=[j,M,A];for(var E=[],W=0;W<t[0].length;W++){for(var R={x:0,y:0},B=[],N=void 0,_=0;_<3;_++)if((N=ke(e[_])).conjugate){var L=a[N.coeffNumber][W],V={x:0,y:0};V.x=L.x,V.y=-1*L.y,B.push(V)}else-1===N.coeffNumber?B.push({x:1,y:0}):B.push(a[N.coeffNumber][W]);if(R=ve(B[0],B[1]),R=ve(R,B[2]),ee){for(var H=we(R,1/ye(R)),G=0,q=0;q<5;q++)G+=2*Math.pow(ye(a[q][W]),2);G+=Math.pow(ye(a[5][W]),2);for(var U=1,J=0;J<e.length;J++)6===e[J]?U*=Math.sqrt(Math.pow(ye(B[J]),2)/G):U*=Math.sqrt(2*Math.pow(ye(B[J]),2)/G);var K=e.map((function(e){return ke(e).coeffNumber}));3===K[0]&&3===K[1]&&3===K[2]?U*=Math.sqrt(1):Object(l.a)(new Set(K)).length<3?U*=Math.sqrt(6.75):U*=Math.sqrt(27),R=we(H,U)}E.push(R)}be(E),O=[];for(var X=0;X<t[0].length;X++){for(var Q={x:0,y:0},$=[],te=void 0,ae=0;ae<3;ae++)if((te=ke(e[ae])).conjugate){var ne=a[te.coeffNumber][X],ie={x:0,y:0};ie.x=ne.x,ie.y=-1*ne.y,$.push(ie)}else-1===te.coeffNumber?$.push({x:1,y:0}):$.push(a[te.coeffNumber][X]);Q=ve($[0],$[1]),Q=ve(Q,$[2]);var ce=Math.atan2(Q.y,Q.x)/Math.PI,se=Math.atan2(n[X].y,n[X].x)/Math.PI;O.push({x:ce,y:se})}me(O)}}),[j,g,y,M,A,a,ee]),Object(c.useEffect)((function(){U.length>0&&(R(U[n]),ce(fe[n]))}),[n,U,fe]),Object(c.useEffect)((function(){U.length>0&&(V(X[n]),he(ge[n]))}),[n,X,ge]),Object(c.useEffect)((function(){s.current.getContext("2d").getImageData(0,0,1,1),r.current.getContext("2d").getImageData(0,0,1,1)}),[]);var De=445,Ce=De,Se=45,Me=177.5;function Ie(){var e=s.current.getContext("2d");e.fillStyle="rgba(0, 0, 0, 0.1)",U.forEach((function(t){e.beginPath(),e.arc(t.x*Me,-t.y*Me,2.225,0,2*Math.PI,!0),e.fill()}))}function Te(){var e=r.current.getContext("2d");e.fillStyle="rgba(0, 0, 0, 0.1)",fe.forEach((function(t){e.beginPath(),e.arc(t.x*Me,-t.y*Me,2.225,0,2*Math.PI,!0),e.fill()}))}return Object(c.useEffect)((function(){var e=s.current,t=e.getContext("2d"),a=Math.floor(Me*devicePixelRatio),n=t.createImageData(2*a,2*a),i=n.data;if(e.width=De*devicePixelRatio,e.height=Ce*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width="445px",e.style.height="445px",!Dt){for(var c=-a;c<a;c++)for(var r=-a;r<a;r++){var o=Math.sqrt(c*c+r*r);if(!(o>a)){var l=4*(c+a+(r+a)*(2*a)),h=G(c,r,o/a);i[l]=h.r,i[l+1]=h.g,i[l+2]=h.b,i[l+3]=h.a}}Dt=n}t.putImageData(Dt,0,0),U.length>0&&(t.save(),t.translate(177.5,177.5),Ie(),t.restore())}),[De,Ce,Me,U]),Object(c.useEffect)((function(){var e=r.current,t=e.getContext("2d"),a=Math.floor(Me*devicePixelRatio),n=t.createImageData(2*a,2*a),i=n.data;if(e.width=De*devicePixelRatio,e.height=Ce*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width="445px",e.style.height="445px",!Dt){for(var c=-a;c<a;c++)for(var s=-a;s<a;s++){var o=Math.sqrt(c*c+s*s);if(!(o>a)){var l=4*(c+a+(s+a)*(2*a)),h=G(c,s,o/a);i[l]=h.r,i[l+1]=h.g,i[l+2]=h.b,i[l+3]=h.a}}n}t.putImageData(Dt,0,0),fe.length>0&&(t.save(),t.translate(177.5,177.5),Te(),t.restore())}),[De,Ce,Me,fe]),Object(c.useEffect)((function(){if(U){var e=s.current.getContext("2d");e.save(),e.translate(177.5,177.5),Ie(),e.restore()}}),[U]),Object(c.useEffect)((function(){if(fe){var e=r.current.getContext("2d");e.save(),e.translate(177.5,177.5),Te(),e.restore()}}),[fe]),Object(S.jsxs)(b.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[Object(S.jsx)(b.a,{sx:{width:"100%"},children:Object(S.jsxs)(x.a,{sx:{margin:"auto",marginBottom:1,marginTop:1,width:"80%"},direction:"row",children:[Object(S.jsx)(C.a,{sx:{marginLeft:1,marginRight:1,paddingTop:"20px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:" Coefficients:  "}),Object(S.jsxs)(le.a,{variant:"standard",sx:{minWidth:"20px"},children:[Object(S.jsx)(yt.a,{children:"x"}),Object(S.jsx)(wt.a,{value:j,label:"Age",onChange:function(e){u(e.target.value)},children:Oe(1,6).map((function(e){return Object(S.jsx)(kt.a,{value:e,children:e},"second_".concat(e))}))})]}),Object(S.jsx)(C.a,{sx:{marginLeft:1,marginRight:1,paddingTop:"20px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:" \xd7 "}),Object(S.jsxs)(le.a,{variant:"standard",sx:{minWidth:"50px"},children:[Object(S.jsx)(yt.a,{children:"y"}),Object(S.jsx)(wt.a,{value:g,label:"Age",onChange:function(e){m(e.target.value)},children:Oe(1,5).map((function(e){return Object(S.jsx)(kt.a,{value:e,children:e},"second_".concat(e))}))})]}),Object(S.jsx)(C.a,{sx:{marginLeft:1,marginRight:1,paddingTop:"20px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:" \xd7 "}),Object(S.jsx)(de.a,{label:"z",inputProps:{style:{textAlign:"left"}},sx:{minWidth:"20px",width:"15px",marginTop:0},value:y,variant:"standard"}),Object(S.jsx)(vt.a,{sx:{marginTop:2,marginLeft:5},checked:ee,onChange:function(e){te(e.target.checked)}}),Object(S.jsx)(C.a,{sx:{marginTop:3,fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"Normalization"})]})}),Object(S.jsxs)(b.a,{sx:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-around",marginTop:1,marginBottom:2},children:[Object(S.jsx)("svg",{width:i,height:i,viewBox:"0 0 ".concat(De," ").concat(Ce),xmlns:"http://www.w3.org/2000/svg",children:Object(S.jsxs)("g",{transform:"translate(0,".concat(15,")"),children:[Object(S.jsx)("foreignObject",{x:Se,y:Se,width:De,height:Ce,children:Object(S.jsx)("canvas",{id:"circle".concat(1),style:{zIndex:"-1"},width:De,height:Ce,ref:s})}),Object(S.jsx)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:Object(S.jsx)("path",{fill:"azure",d:L.a().innerRadius(176.5).outerRadius(180.5).startAngle(0).endAngle(2*Math.PI)()})}),Object(S.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(S.jsx)("line",{x1:-222.5,y1:0,x2:222.5,y2:0,stroke:"black"}),Object(S.jsx)("line",{x1:0,y1:-222.5,x2:0,y2:222.5,stroke:"black"}),Object(S.jsx)("text",{fontSize:"16",textAnchor:"middle",x:"200",y:"-3",fill:"black",children:"Re"}),Object(S.jsx)("text",{fontSize:"16",textAnchor:"start",x:"3",y:"-200",fill:"black",children:"Im"}),Object(S.jsx)("circle",{cx:W.x*Me,cy:-W.y*Me,r:"6"}),Object(S.jsx)("circle",{cx:W.x*Me,cy:-W.y*Me,r:"3",fill:"white"})]})]})}),Object(S.jsx)("svg",{width:i,height:i,viewBox:"0 0 ".concat(De," ").concat(Ce),xmlns:"http://www.w3.org/2000/svg",children:Object(S.jsx)("g",{transform:"translate(0,".concat(15,")"),children:Object(S.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(S.jsx)("line",{x1:-222.5,y1:0,x2:222.5,y2:0,stroke:"black"}),Object(S.jsx)("line",{x1:0,y1:-222.5,x2:0,y2:222.5,stroke:"black"}),Object(S.jsx)("text",{fontSize:"16",textAnchor:"middle",x:"200",y:"-3",fill:"black",children:"Ph".concat(j)}),Object(S.jsx)("text",{fontSize:"16",textAnchor:"start",x:"3",y:"-200",fill:"black",children:"Ph".concat(g)}),[1,2,3,4,5,6].map((function(e,t){return Object(S.jsxs)("g",{children:[Object(S.jsx)("line",{x1:-177.5*e/6,y1:Me,x2:-177.5*e/6,y2:-177.5,stroke:"grey",strokeOpacity:.5,strokeDasharray:"5"}),Object(S.jsx)("line",{x1:-177.5*-e/6,y1:Me,x2:-177.5*-e/6,y2:-177.5,stroke:"grey",strokeOpacity:.5,strokeDasharray:"5"}),Object(S.jsx)("line",{x1:Me,y1:-177.5*-e/6,x2:-177.5,y2:-177.5*-e/6,stroke:"grey",strokeOpacity:.5,strokeDasharray:"5"}),Object(S.jsx)("line",{x1:Me,y1:-177.5*e/6,x2:-177.5,y2:-177.5*e/6,stroke:"grey",strokeOpacity:.5,strokeDasharray:"5"}),Object(S.jsx)("text",{fontSize:"13",textAnchor:"middle",x:e/6*Me,y:"12",fill:"black",children:e}),Object(S.jsx)("text",{fontSize:"13",textAnchor:"middle",x:-e/6*Me,y:"12",fill:"black",children:-e}),Object(S.jsx)("text",{fontSize:"13",textAnchor:"middle",x:"5",y:"12",children:0}),Object(S.jsx)("text",{fontSize:"13",textAnchor:"middle",x:"7",y:-e/6*Me+5,fill:"black",children:e}),Object(S.jsx)("text",{fontSize:"13",textAnchor:"middle",x:"7",y:e/6*Me+5,fill:"black",children:-e})]},"grid".concat(t))})),X.map((function(e,t){return Object(S.jsx)("circle",{cx:e.x*Me,cy:-e.y*Me,r:"3",fill:"black",fillOpacity:"0.3"},"phase".concat(t))})),Object(S.jsx)("circle",{cx:_.x*Me,cy:-_.y*Me,r:"4"}),Object(S.jsx)("circle",{cx:_.x*Me,cy:-_.y*Me,r:"2",fill:"red"})]})})})]}),Object(S.jsx)(C.a,{sx:{marginLeft:1,marginRight:1,paddingTop:"20px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"Coefficients: \xa0\xa0 x = ".concat(j," \xa0\xa0\xa0\xa0 j = 12 - y = ").concat(M," \xa0\xa0\xa0\xa0 k = y - x (mod 12) = ").concat(A)}),Object(S.jsxs)(b.a,{sx:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-around",marginTop:1,marginBottom:2},children:[Object(S.jsx)("svg",{width:i,height:i,viewBox:"0 0 ".concat(De," ").concat(Ce),xmlns:"http://www.w3.org/2000/svg",children:Object(S.jsxs)("g",{transform:"translate(0,".concat(15,")"),children:[Object(S.jsx)("foreignObject",{x:Se,y:Se,width:De,height:Ce,children:Object(S.jsx)("canvas",{id:"circle".concat(1),style:{zIndex:"-1"},width:De,height:Ce,ref:r})}),Object(S.jsx)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:Object(S.jsx)("path",{fill:"azure",d:L.a().innerRadius(176.5).outerRadius(180.5).startAngle(0).endAngle(2*Math.PI)()})}),Object(S.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(S.jsx)("line",{x1:-222.5,y1:0,x2:222.5,y2:0,stroke:"black"}),Object(S.jsx)("line",{x1:0,y1:-222.5,x2:0,y2:222.5,stroke:"black"}),Object(S.jsx)("text",{fontSize:"16",textAnchor:"middle",x:"200",y:"-3",fill:"black",children:"Re"}),Object(S.jsx)("text",{fontSize:"16",textAnchor:"start",x:"3",y:"-200",fill:"black",children:"Im"}),Object(S.jsx)("circle",{cx:ie.x*Me,cy:-ie.y*Me,r:"6"}),Object(S.jsx)("circle",{cx:ie.x*Me,cy:-ie.y*Me,r:"3",fill:"white"})]})]})}),Object(S.jsx)("svg",{width:i,height:i,viewBox:"0 0 ".concat(De," ").concat(Ce),xmlns:"http://www.w3.org/2000/svg",children:Object(S.jsx)("g",{transform:"translate(0,".concat(15,")"),children:Object(S.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(S.jsx)("line",{x1:-222.5,y1:0,x2:222.5,y2:0,stroke:"black"}),Object(S.jsx)("line",{x1:0,y1:-222.5,x2:0,y2:222.5,stroke:"black"}),Object(S.jsx)("text",{fontSize:"16",textAnchor:"middle",x:"170",y:"-3",fill:"black",children:"Ph".concat(j,"+Ph").concat(M,"+Ph").concat(A)}),Object(S.jsx)("text",{fontSize:"16",textAnchor:"start",x:"3",y:"-200",fill:"black",children:"Ph".concat(j,"+Ph").concat(g,"+Ph").concat(y)}),[1,2,3,4,5,6].map((function(e,t){return Object(S.jsxs)("g",{children:[Object(S.jsx)("line",{x1:-177.5*e/6,y1:Me,x2:-177.5*e/6,y2:-177.5,stroke:"grey",strokeOpacity:.5,strokeDasharray:"5"}),Object(S.jsx)("line",{x1:-177.5*-e/6,y1:Me,x2:-177.5*-e/6,y2:-177.5,stroke:"grey",strokeOpacity:.5,strokeDasharray:"5"}),Object(S.jsx)("line",{x1:Me,y1:-177.5*-e/6,x2:-177.5,y2:-177.5*-e/6,stroke:"grey",strokeOpacity:.5,strokeDasharray:"5"}),Object(S.jsx)("line",{x1:Me,y1:-177.5*e/6,x2:-177.5,y2:-177.5*e/6,stroke:"grey",strokeOpacity:.5,strokeDasharray:"5"}),Object(S.jsx)("text",{fontSize:"13",textAnchor:"middle",x:e/6*Me,y:"12",fill:"black",children:e}),Object(S.jsx)("text",{fontSize:"13",textAnchor:"middle",x:-e/6*Me,y:"12",fill:"black",children:-e}),Object(S.jsx)("text",{fontSize:"13",textAnchor:"middle",x:"5",y:"12",children:0}),Object(S.jsx)("text",{fontSize:"13",textAnchor:"middle",x:"7",y:-e/6*Me+5,fill:"black",children:e}),Object(S.jsx)("text",{fontSize:"13",textAnchor:"middle",x:"7",y:e/6*Me+5,fill:"black",children:-e})]},"grid".concat(t))})),ge.map((function(e,t){return Object(S.jsx)("circle",{cx:e.x*Me,cy:-e.y*Me,r:"3",fill:"black",fillOpacity:"0.3"},"phase".concat(t))})),Object(S.jsx)("circle",{cx:oe.x*Me,cy:-oe.y*Me,r:"4"}),Object(S.jsx)("circle",{cx:oe.x*Me,cy:-oe.y*Me,r:"2",fill:"red"})]})})})]})]})},St=a(445),Mt=a(472),It=a(473),Tt=a(124),Pt=a.n(Tt),At=Object(D.a)($.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(d.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));var Ft,zt,Et=function(e){var t=e.fileName,a=e.setInAnalysisPage,n=e.open,i=e.setOpen,s=e.wavescapesData,r=e.fullTraces,o=e.coeffTracesData,l=e.currentSubdiv,d=e.currentWavescapeSubdiv,j=e.userPcvs,u=e.wsPhantomCurveHeight,x=Object(c.useState)(!0),p=Object(h.a)(x,2),g=p[0],m=p[1],O=Object(c.useState)(!0),v=Object(h.a)(O,2),y=v[0],w=v[1],D=Object(c.useState)(!0),M=Object(h.a)(D,2),I=M[0],T=M[1],P=Object(c.useState)(N([0,0,0,0,0,0,0,0,0,0,0,0]).map((function(e){return{x:e.re,y:e.im}}))),A=Object(h.a)(P,2),z=A[0],E=A[1],W=Object(c.useRef)(null),R=Object(c.useState)(100),B=Object(h.a)(R,2),_=B[0],L=B[1],V=Object(c.useState)(3),H=Object(h.a)(V,2),G=H[0],q=H[1],U=Object(c.useState)(440),Y=Object(h.a)(U,2),J=Y[0],K=Y[1];function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=10;W.current&&K((W.current.clientWidth+e)/G-t)}function Z(){X(0)}return Object(c.useEffect)((function(){a(!0),i(!0),X(),window.addEventListener("resize",Z)}),[]),Object(c.useEffect)((function(){T(!0)}),[r]),Object(c.useEffect)((function(){X(),window.addEventListener("resize",Z)}),[G]),Object(c.useEffect)((function(){X(n?-400:400)}),[n]),Object(c.useEffect)((function(){X()}),[_]),Object(c.useEffect)((function(){var e=[],t=new f.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function a(a){var n=a.data[0];if(144===n||128===n){var i=f.a(a.data[1],"midi").toNote();if(128!==n||e.includes(i)){var c=Math.round(.05*a.data[2]);switch(n){case 144:c>0?(t.triggerAttack(i,f.f(),c),e.push(i)):(t.triggerRelease(i,f.f()),e=e.filter((function(e){return e!==i})));break;case 128:t.triggerRelease(i,f.f()),e=e.filter((function(e){return e!==i}))}!function(e){var t=[0,0,0,0,0,0,0,0,0,0,0,0];e.forEach((function(e){switch(e.includes("#")?e.slice(0,2):e.slice(0,1)){case"C":t[0]+=1;break;case"C#":t[1]+=1;break;case"D":t[2]+=1;break;case"D#":t[3]+=1;break;case"E":t[4]+=1;break;case"F":t[5]+=1;break;case"F#":t[6]+=1;break;case"G":t[7]+=1;break;case"G#":t[8]+=1;break;case"A":t[9]+=1;break;case"A#":t[10]+=1;break;case"B":t[11]+=1}}));var a=N(t);a=a.map((function(e){return{x:e.re,y:e.im}})),E(a)}(e)}}}function n(e){console.log("Name: ".concat(e.port.name,", Brand: ").concat(e.port.manufacturer,", State: ").concat(e.port.state,", Type: ").concat(e.port.type))}t.volume.value=-30,navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then((function(e){e.onstatechange=n,e.inputs.forEach((function(e){e.onmidimessage=a}))}),(function(){console.log("Could not connect MIDI")}))}),[]),Object(S.jsxs)(b.a,{children:[Object(S.jsxs)(b.a,{sx:{padding:0,margin:"auto",marginBottom:"70px",width:"".concat(_,"%")},children:[Object(S.jsxs)(St.a,{defaultExpanded:!0,children:[Object(S.jsx)(Mt.a,{expandIcon:Object(S.jsx)(Pt.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(S.jsx)(C.a,{variant:"h6",children:"Wavescapes"})}),Object(S.jsx)(It.a,{ref:W,sx:{padding:0},children:Object(S.jsx)(xt,{wavescapesData:s,currentWavescapeSubdiv:d,elemsWidth:J,wsPhantomCurveHeight:u})})]}),Object(S.jsxs)(St.a,{defaultExpanded:!0,children:[Object(S.jsx)(Mt.a,{expandIcon:Object(S.jsx)(Pt.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(S.jsx)(C.a,{variant:"h6",children:"Fourier Coefficient Spaces"})}),Object(S.jsx)(It.a,{sx:{padding:0},children:Object(S.jsx)(Ot,{fullTraces:r,coeffTracesData:o,currentSubdiv:l,showPrototypes:g,showMagAndPhase:y,showFullTrace:I,userPcvs:j,midiDevNotesDftCoeffs:z,elemsWidth:J})})]}),Object(S.jsxs)(St.a,{defaultExpanded:!0,children:[Object(S.jsx)(Mt.a,{expandIcon:Object(S.jsx)(Pt.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(S.jsx)(C.a,{variant:"h6",children:"Coefficient Products and Phase Space"})}),Object(S.jsx)(It.a,{sx:{padding:0},children:Object(S.jsx)(Ct,{fullTraces:r,coeffTracesData:o,currentSubdiv:l,showPrototypes:g,showMagAndPhase:y,showFullTrace:I,userPcvs:j,midiDevNotesDftCoeffs:z,elemsWidth:J})})]})]}),Object(S.jsx)(At,{position:"fixed",open:n,color:"secondary",sx:{top:"auto",bottom:0,maxHeight:"74px"},children:Object(S.jsxs)(ee.a,{children:[Object(S.jsx)(b.a,{sx:{minWidth:120},children:Object(S.jsxs)(le.a,{size:"small",variant:"standard",fullWidth:!0,children:[Object(S.jsx)(yt.a,{children:"Layout"}),Object(S.jsxs)(wt.a,{value:G,label:"Layout",onChange:function(e){L(100),q(e.target.value)},children:[Object(S.jsx)(kt.a,{value:6,children:"1x6"}),Object(S.jsx)(kt.a,{value:3,children:"2x3"}),Object(S.jsx)(kt.a,{value:2,children:"3x2"}),Object(S.jsx)(kt.a,{value:1,children:"6x1"})]})]})}),Object(S.jsx)(F,{fileName:t,currentWavescapeSubdiv:d}),Object(S.jsx)(b.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5%",maxWidth:"100px",justifyContent:"space-evenly"},children:Object(S.jsxs)(We.a,{children:[Object(S.jsx)(he.a,{control:Object(S.jsx)(vt.a,{onChange:function(){T(!I)},checked:I,size:"small"}),label:Object(S.jsx)(C.a,{noWrap:!0,children:"Show full trace"})}),Object(S.jsx)(he.a,{control:Object(S.jsx)(vt.a,{onChange:function(){m(!g)},checked:g,size:"small"}),label:Object(S.jsx)(C.a,{noWrap:!0,children:"Show Prototypes"})}),Object(S.jsx)(he.a,{control:Object(S.jsx)(vt.a,{onChange:function(){w(!y)},checked:y,size:"small"}),label:Object(S.jsx)(C.a,{noWrap:!0,children:"Show \u03bc and \u03c6"})})]})}),Object(S.jsxs)(b.a,{sx:{minWidth:"20%",padding:"1% 3% 1% 2%",marginTop:1},children:[Object(S.jsx)(C.a,{children:"Plots size"}),Object(S.jsx)(k.a,{min:20,max:100,value:_,defaultValue:100,"aria-label":"Plots size",valueLabelDisplay:"auto",onChange:function(e,t){L(t)},marks:[{value:20,label:"20%"},{value:50,label:"50%"},{value:100,label:"100%"}]})]})]})})]})},Wt=a(31),Rt=a(437),Bt=a(451),Nt=a(190),_t=a.n(Nt),Lt=80,Vt=Object(D.a)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(d.a)({flexGrow:1,padding:t.spacing(3),backgroundColor:"#e0e0e0",transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(400,"px")},a&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0,backgroundColor:"#e0e0e0"})})),Ht=Object(D.a)("div")((function(e){var t=e.theme;return Object(d.a)(Object(d.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"space-between"})}));var Gt=function(){var e=Object(Wt.a)(),t=Object(c.useState)(!1),a=Object(h.a)(t,2),n=a[0],i=a[1],s=Object(c.useState)(""),r=Object(h.a)(s,2),o=r[0],d=r[1],f=Object(c.useState)(!1),p=Object(h.a)(f,2),g=p[0],m=p[1],O=Object(c.useState)([]),v=Object(h.a)(O,2),y=v[0],D=v[1],M=Object(c.useState)([]),I=Object(h.a)(M,2),T=I[0],A=I[1],F=Object(c.useState)([]),z=Object(h.a)(F,2),E=z[0],W=z[1],B=Object(c.useState)([]),L=Object(h.a)(B,2),V=L[0],H=L[1],G=Object(c.useState)(0),Z=Object(h.a)(G,2),$=Z[0],ee=Z[1],ae=Object(c.useState)(0),ne=Object(h.a)(ae,2),ce=ne[0],re=ne[1],oe=Object(c.useState)(1),le=Object(h.a)(oe,2),he=le[0],je=le[1],ue=Object(c.useState)({noteResolutionValue:1,seconds:1.5,useSeconds:!1}),fe=Object(h.a)(ue,2),be=fe[0],xe=fe[1],ge=Object(c.useState)(10),Oe=Object(h.a)(ge,2),ye=Oe[0],we=Oe[1],ke=Object(c.useState)(1),De=Object(h.a)(ke,2),Ce=De[0],Se=De[1],Me=Object(c.useState)("sum"),Ie=Object(h.a)(Me,2),Te=(Ie[0],Ie[1],Object(c.useState)("incremental")),Pe=Object(h.a)(Te,2),Ae=(Pe[0],Pe[1],Object(c.useState)(1)),Fe=Object(h.a)(Ae,2),ze=(Fe[0],Fe[1],Object(c.useState)(0)),Ee=Object(h.a)(ze,2),We=Ee[0],Re=Ee[1],Be=Object(c.useState)(!1),Ne=Object(h.a)(Be,2),Le=Ne[0],Ve=Ne[1],He=Object(c.useState)("1"),Ge=Object(h.a)(He,2),qe=Ge[0],Ue=Ge[1],Ye=Object(c.useState)([]),Je=Object(h.a)(Ye,2),Ke=Je[0],Xe=Je[1],Ze=Object(c.useRef)(null),Qe=Object(c.useState)(!1),$e=Object(h.a)(Qe,2),et=$e[0],tt=$e[1],at=Object(c.useState)([]),nt=Object(h.a)(at,2),ct=nt[0],st=nt[1];function rt(e){var t,a=[];try{t=function(e){for(var t=[],a=!1,n=!1,i=0;i<e.length;i++)if("{"!==e[i]&&"("!==e[i]||(a=!0,"{"===e[i]&&(n=!0)),a){for(var c=[],s=i+1;"}"!==e[s]&&")"!==e[s];s++){if(","!==e[s]&&"."!==e[s]&&" "!==e[s]&&isNaN(parseFloat(e[s])))throw new Error("Found NaN");" "!==e[s]&&c.push(e[s])}if(""===(c=c.join("")))throw new Error("Empty input");for(var r=[],o=0,l=0;l<c.length;l++){if(","===c[l]){var h=c.slice(l-o,l);if(0===h.length)throw new Error("Two consecutive comas");r.push(+h),o=-1}o++}var d=c.slice(c.length-o,c.length);if(0===d.length)throw new Error("Missing last number");if(r.push(+d),n){for(var j=[0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<r.length;u++){if(r[u]<0||r[u]>=12)throw new Error("Set notation: out of range");j[r[u]]+=1}t.push(j)}else{if(12!==r.length)throw new Error("Vectorial notation: missing elements");t.push(r)}a=!1,n=!1,i+=o}if(0===t.length)throw new Error("Invalid input");return t}(e)}catch(n){return console.log(n.message),void tt(!0)}t.forEach((function(e){return a.push({label:"(".concat(e,")"),isDisabled:!1,coeffs:N(e,!0,!0,!1),rosePoints:[],n:-1,d:-1})})),Ke.map((function(e){return e.label})).forEach((function(e){a=a.filter((function(t){return t.label!==e}))})),a.forEach((function(e){for(var t=!1,a=0;a<ct.length&&!t;a++)for(var n=0;n<ct[a].length&&!t;n++)ct[a][n].usable&&!ct[a][n].used&&(t=!0,e.rosePoints=ct[a][n].points,ct[a][n].used=!0,e.n=ct[a][n].n,e.d=ct[a][n].d)})),Xe([].concat(Object(l.a)(Ke),Object(l.a)(a)))}return Object(c.useEffect)((function(){V.length>0&&($>=T[0].length?re(T[0].length-1):re($))}),[$]),Object(c.useEffect)((function(){var e;T.length>0&&Re(he/T[0].length),1===he?H(T):(e=K(E,he),H(e))}),[he,T]),Object(c.useEffect)((function(){var e=document.getElementById("file").files[0];if(e){var t=new FileReader;t.readAsArrayBuffer(e),t.onload=function(t){try{var a=function(e){var t=new R.Midi(e),a=t.header.tempos.map((function(e){return Math.round(e.bpm)})),n=Math.max.apply(Math,Object(l.a)(a)),i=t.tracks.filter((function(e){return!1===e.instrument.percussion}));return t.tracks=i,{midiData:t,midiBpm:n}}(t.target.result),n=a.midiData,i=a.midiBpm;Lt=i,Ft=n,zt=e.name;var c=Ft.duration/50;we(c),D(function(e){for(var t=[],a=0;a<6;a++){for(var n=[],i=0;i<e.length;i++){for(var c=[],s=0;s<e[i].length;s++)c.push("");n.push(c)}t.push(n)}for(var r=0;r<e.length;r++)for(var o=0;o<e[r].length;o++)for(var l=1;l<e[r][o].length;l++)t[l-1][r][o]=q(e[r][o][l]);return t}(function(e,t){var a=[];e.tracks.forEach((function(n){return a.push(J(n.notes,t,e.duration))}));for(var n=[],i=0;i<a[0].length;i++)n.push(new U);for(var c=0;c<a.length;c++)for(var s=0;s<a[c].length;s++)for(var r=0;r<a[c][s].length;r++){var o=a[c][s][r],l=o.pitch,h=o.duration;n[s].addNoteDuration(l,h)}var d=(n=X(n)).map((function(e){return N(e.getPcvAsArray(),!1)})),j=[];j.push(d);for(var u=j[0].length,f=j[0].length,b=2,x=1;x<u;x++){for(var p=[],g=0;g+b<=f;g++){var m=j[0].slice(g,g+b);p.push(_(m))}b++,j.push(p)}return j}(n,c)));var s=Y(n,be,Lt),r=s.tracesData,o=s.resolution,h=s.currPcDistributions;Se(o),A(r),W(h),P(Ft,o,ee),je(1),Ue("1")}catch(d){return void console.log(d)}}}}),[o]),Object(c.useEffect)((function(){for(var e=[],t=1;t<=7;t++){for(var a=[],n=1;n<=7;n++){var i={n:n,d:t,used:!1,usable:!0,points:[]};n%t===0&&1!==t&&(i.usable=!1),!0===i.usable&&(i.points=Q(n,t)),a.push(i)}e.push(a)}e[0][0].usable=!1,st(e);var c=[[1,0,0,0,1,0,0,1,0,0,0,0],[1,0,0,1,0,0,0,1,0,0,0,0],[1,0,0,1,0,0,1,0,0,0,0,0]].map((function(e){return{label:"(".concat(e.toString(),")"),isDisabled:!1,coeffs:N(e,!0,!0,!1),rosePoints:[],n:-1,d:-1}}));c.forEach((function(t){for(var a=!1,n=0;n<e.length&&!a;n++)for(var i=0;i<e[n].length&&!a;i++)e[n][i].usable&&!e[n][i].used&&(a=!0,t.rosePoints=e[n][i].points,e[n][i].used=!0,t.n=e[n][i].n,t.d=e[n][i].d)})),c[1].isDisabled=!0,c[2].isDisabled=!0,Xe(c)}),[]),Object(S.jsxs)(j.a,{children:[Object(S.jsx)(Rt.a,{}),Object(S.jsx)(se,{open:n,setOpen:i,setInAnalysisPage:m,inAnalysisPage:g}),Object(S.jsxs)(b.a,{sx:{display:"flex"},children:[Object(S.jsxs)(Bt.a,{sx:{width:400,flexShrink:0,"& .MuiDrawer-paper":{width:400,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:n,children:[Object(S.jsxs)(Ht,{children:[Object(S.jsxs)(x.a,{sx:{flexGrow:"2",maxWidth:"85%",marginBottom:1},children:[Object(S.jsx)(C.a,{sx:{fontWeight:"bold"},children:"Upload a midi file"}),Object(S.jsxs)(x.a,{spacing:2,direction:"row",sx:{alignItems:"center"},children:[Object(S.jsxs)("label",{htmlFor:"file",children:[Object(S.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"file",value:o,onChange:function(e){return d(e.target.value)}}),Object(S.jsx)(te.a,{variant:"contained",size:"small",color:"primary",component:"span",children:"Upload"})]}),Object(S.jsx)(C.a,{noWrap:!0,color:zt?"primary":"error",children:y.length>0?zt:"No midi file uploaded"})]})]}),Object(S.jsx)(w.a,{onClick:function(){i(!1)},children:"ltr"===e.direction?Object(S.jsx)(_t.a,{}):Object(S.jsx)(ie.a,{})})]}),Object(S.jsx)(it.a,{}),Object(S.jsx)(C.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Time resolution"}),Object(S.jsx)(b.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5% 0 2%",width:"90%",justifyContent:"space-evenly"},children:Object(S.jsx)(pe,{setResolutionMode:xe,resolutionMode:be,retriggerAnalysis:function(){if(null!=Ft){var e=Y(Ft,be,Lt),t=e.tracesData,a=e.resolution,n=e.currPcDistributions;Se(a),A(t),W(n),P(Ft,a,ee),je(1),Ue("1")}}})}),Object(S.jsx)(it.a,{}),Object(S.jsx)(C.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Window Length"}),Object(S.jsxs)(x.a,{sx:{margin:"auto",marginBottom:1,marginTop:1},direction:"row",children:[Object(S.jsx)(C.a,{sx:{marginLeft:1,paddingTop:"5px",marginRight:"5px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"="}),Object(S.jsx)(de.a,{inputProps:{style:{textAlign:"center"}},sx:{width:"15%"},error:Le,onChange:function(e){Ue(e.target.value);var t=parseInt(e.target.value);isNaN(t)?Ve(!0):(Ve(!1),T.length>0?t<1?(Ve(!0),je(1)):t>T[0].length?(Ve(!0),je(T[0].length)):je(t):je(t))},value:qe,variant:"standard"}),Object(S.jsx)(C.a,{sx:{marginLeft:1,paddingTop:"5px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"\xd7 time resolution"})]}),Object(S.jsx)(k.a,{sx:{margin:"auto",width:"80%",marginBottom:3,marginTop:1,heigth:"10%"},value:he,onChange:function(e,t){je(t),Ue(t)},"aria-label":"Window Length",defaultValue:1,valueLabelDisplay:"auto",min:1,max:T.length>0?T[0].length:100,marks:T.length>0?[{value:1,label:"1"},{value:T[0].length,label:"".concat(T[0].length)}]:[{value:1,label:"1"},{value:100,label:"100"}]}),Object(S.jsx)(it.a,{}),Object(S.jsx)(C.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Custom pitch-class vectors"}),Object(S.jsxs)(b.a,{sx:{flexDirection:"column",display:"flex",alignItems:"center",margin:"3% 5%",height:"40%",maxHeight:"350px",justifyContent:"flex-start"},component:"form",noValidate:!0,autoComplete:"off",children:[Object(S.jsx)(de.a,{fullWidth:!0,error:et,helperText:et&&"Invalid input",id:"outlined-basic",label:"e.g. {0,0,4,7,10} (2,0,0,0,1,0,0,1,0,0,1,0)",variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),rt(Ze.current.value),Ze.current.value="")},onChange:function(){tt(!1)},inputRef:Ze}),Object(S.jsx)(ve,{userPcvs:Ke,setUserPcvs:Xe,rosesMat:ct})]}),Object(S.jsx)(it.a,{}),Object(S.jsx)(C.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Legend of coefficients"}),Object(S.jsx)(b.a,{sx:{margin:"5px 10px"},children:Object(S.jsx)(me.a,{children:Object(S.jsxs)(x.a,{children:[Object(S.jsxs)(x.a,{direction:"row",children:[Object(S.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(S.jsx)("circle",{cx:"12",cy:"12",r:"8",fill:"black"}),Object(S.jsx)("text",{fontSize:"15",textAnchor:"middle",x:"12",y:"17",fill:"white",children:"k"})]}),"Fourier coefficient number"]}),Object(S.jsxs)(x.a,{direction:"row",children:[Object(S.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(S.jsx)("circle",{cx:"12",cy:"12",r:"6",fill:"black"})}),"MIDI file segments"]}),Object(S.jsxs)(x.a,{direction:"row",children:[Object(S.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(S.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"white"}),Object(S.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"none",stroke:"black",strokeWidth:"3px"})]}),"MIDI playback"]}),Object(S.jsxs)(x.a,{direction:"row",children:[Object(S.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(S.jsxs)("g",{transform:"translate(12,12)",children:[Object(S.jsx)("line",{x1:"0",x2:"0",y1:"7",y2:"-7",stroke:"black",strokeWidth:"1.5"}),Object(S.jsx)("line",{x1:"7",x2:"-7",y1:"0",y2:"0",stroke:"black",strokeWidth:"1.5"})]})}),"MIDI controller input"]}),Object(S.jsxs)(x.a,{direction:"row",children:[Object(S.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(S.jsx)("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"grey",strokeWidth:"2px"})}),"Prototypes"]}),Object(S.jsxs)(x.a,{direction:"row",children:[Object(S.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:ct.length>0?Object(S.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:ct[3][0].points}):null}),"Custom pitch-class vectors"]})]})})}),Object(S.jsx)(_e,{traces:V,userPcvs:Ke,wavescapesData:y,wsPhantomCurveHeight:We})]}),Object(S.jsx)(Vt,{open:n,children:Object(S.jsxs)(u.c,{children:[Object(S.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(S.jsx)(dt,{setOpen:i,setInAnalysisPage:m})}}),Object(S.jsx)(u.a,{exact:!0,path:"/theory",render:function(){return Object(S.jsx)(ut,{setOpen:i,setInAnalysisPage:m})}}),Object(S.jsx)(u.a,{exact:!0,path:"/analysis",render:function(){return Object(S.jsx)(Et,{fileName:zt,setInAnalysisPage:m,open:n,setOpen:i,wavescapesData:y,fullTraces:T,coeffTracesData:V,currentSubdiv:ce,currentWavescapeSubdiv:Math.floor($*Ce/ye),userPcvs:Ke,wsPhantomCurveHeight:We})}})]})})]})]})},qt=a(150),Ut=a(450),Yt=Object(qt.a)({palette:{primary:{main:"#323232"},secondary:{main:"#fefefe"},background:{default:"#e0e0e0"}}});o.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(Ut.a,{theme:Yt,children:Object(S.jsx)(Gt,{})})}),document.getElementById("root"))}},[[369,1,2]]]);
//# sourceMappingURL=main.3de4a070.chunk.js.map