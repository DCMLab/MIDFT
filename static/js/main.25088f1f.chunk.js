(this.webpackJsonpmidft=this.webpackJsonpmidft||[]).push([[0],{360:function(e,t){},370:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(68),s=a.n(r),i=a(6),l=a(18),o=a(11),u=a(9),h=a(462),j=a(429),b=a(463),f=a(458),d=a(459),x=a(464),g=a(89),p=a(10),O=a(114),A=a.n(O),m=a(457),v=a(0),y=Object(p.a)(h.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));function w(e){var t=e.open,a=e.setOpen,n=e.inAnalysisPage;return Object(v.jsx)(j.a,{sx:{flexGrow:1},children:Object(v.jsx)(y,{position:"static",open:t,children:Object(v.jsxs)(b.a,{children:[Object(v.jsx)(m.a,{disabled:!n,color:"inherit","aria-label":"open drawer",onClick:function(){a(!0)},edge:"start",sx:Object(u.a)({mr:2},t&&{display:"none"}),children:Object(v.jsx)(A.a,{})}),Object(v.jsx)(f.a,{variant:"h3",component:"div",sx:{flexGrow:1},children:"Mi_DFT"}),Object(v.jsxs)(x.a,{"aria-label":"outlined button group",children:[Object(v.jsx)(d.a,{component:g.b,to:"/",variant:"contained",disableElevation:!0,children:"Home"}),Object(v.jsx)(d.a,{component:g.b,to:"/theory",variant:"contained",disableElevation:!0,children:"Theory"}),Object(v.jsx)(d.a,{component:g.b,to:"/analysis",variant:"contained",disableElevation:!0,children:"Analysis"})]})]})})})}var C,D,k=a(26),P=a(437),S=a(29),F=a(430),M=a(181),B=a.n(M),E=a(180),I=a.n(E),W=a(179),T=a.n(W),G=a(444),z=0,R=Object(p.a)(f.a)({fontSize:"0.75rem",opacity:.38,fontWeight:500,letterSpacing:.2});function L(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return"".concat(t,":").concat(a<9?"0".concat(a):a)}function N(e,t,a){S.d.cancel(0),a(0),S.d.stop(),z=e.duration;var n=[];e.tracks.forEach((function(e){return e.notes.forEach((function(e){n.push(e)}))})),n.forEach((function(e){e.subdiv=Math.floor(e.time/t)})),(C=new S.b((function(e,t){Q.triggerAttackRelease(t.name,t.duration,e,t.velocity),a(t.subdiv)}),[].concat(n)).start(0)).loop=!0,C.loopEnd=z}var Q=new S.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function H(e){var t=this,a=e.fileName,c=(e.currentWavescapeSubdiv,Object(n.useState)(0)),r=Object(o.a)(c,2),s=r[0],i=r[1];function l(){console.log("play"),"running"!==S.e.state&&(console.log("state running"),S.e.resume()),S.d.start(),!D&&C&&(D=setInterval((function(){return i(C.progress)}),1e3))}return Object(n.useEffect)((function(){document.addEventListener("keydown",function(e){32===e.which&&(e.preventDefault(),"paused"===S.d.state||"stopped"===S.d.state?l():"started"===S.d.state&&(S.d.pause(),J()))}.bind(t))}),[]),Object(v.jsxs)(j.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"60%"},children:[Object(v.jsxs)(j.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[Object(v.jsxs)(F.a,{direction:"row",sx:{flexGrow:1,paddingLeft:"10%"},children:[Object(v.jsx)(m.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){console.log("stop"),S.d.stop(),J()},size:"large",children:Object(v.jsx)(T.a,{fontSize:"large"})}),Object(v.jsx)(m.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){console.log("pause"),S.d.pause(),J()},size:"large",children:Object(v.jsx)(I.a,{fontSize:"large"})}),Object(v.jsx)(m.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){return l()},size:"large",children:Object(v.jsx)(B.a,{fontSize:"large"})})]}),Object(v.jsx)(f.a,{color:a?"primary":"error",noWrap:!0,sx:{flexGrow:"2",paddingRight:"10%"},children:a||"No midi file uploaded"})]}),Object(v.jsx)(G.a,{"aria-label":"Playback",size:"small",value:s?100*s:0,onChange:function(e,t){i(t/100),S.d.seconds=t/100*z},sx:{width:"90%"}}),Object(v.jsxs)(j.a,{sx:{display:"flex",width:"90%",alignItems:"center",justifyContent:"space-between",mt:-1},children:[Object(v.jsxs)(R,{children:["-",L(z-s*z)]}),Object(v.jsx)(R,{children:L(z)})]})]})}function J(){clearInterval(D),D=null}Q.volume.value=-20;var V=a(3),Y=a(4),K=a(120),Z=a(439);function q(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=e.length,r=[],s=0;s<c/2+1;s++){for(var i=0,l=0;l<c;l++)i=Z.a(Z.e(e[l],Z.c(Z.e(Z.d,-2*Z.f*s*l/c))),i);r.push(i)}if(r=r.slice(),t){var o=r[0];0!=o&&(r=r.map((function(e){return Z.b(e,o)})))}return a&&r.forEach((function(e){e.re=Math.round(1e4*e.re)/1e4,e.im=Math.round(1e4*e.im)/1e4})),n&&(r=r.map((function(e){return e.toPolar()}))),r}function U(e){for(var t=e[0],a=1;a<e.length;a++){for(var n=[],c=0;c<e[a].length;c++)n.push(Z.a(t[c],e[a][c]));t=n.slice()}var r=t[0];return t=t.map((function(e){return Z.b(e,r)}))}var X=a(39),_=X.c().domain([0,1]).range(X.b(0,255,1)),$=function(e){var t,a,n;return e>=0&&e<Z.f/3?(t=1,a=3*e/Z.f,n=0):e>=Z.f/3&&e<2*Z.f/3?(t=2-3*e/Z.f,a=1,n=0):e>=2*Z.f/3&&e<Z.f?(t=0,a=1,n=3*e/Z.f-2):e>=Z.f&&e<4*Z.f/3?(t=0,a=4-3*e/Z.f,n=1):e>=4*Z.f/3&&e<5*Z.f/3?(t=3*e/Z.f-4,a=0,n=1):e>=5*Z.f/3&&e<2*Z.f&&(t=1,a=0,n=6-3*e/Z.f),t=_(t),a=_(a),n=_(n),"rgb(".concat(t,", ").concat(a,", ").concat(n,")")},ee=function(e,t,a){var n,c,r,s=Math.atan2(t,e);return(s=-s)<0&&(s+=2*Math.PI),s>=0&&s<Z.f/3?(n=1,c=3*s/Z.f,r=0):s>=Z.f/3&&s<2*Z.f/3?(n=2-3*s/Z.f,c=1,r=0):s>=2*Z.f/3&&s<Z.f?(n=0,c=1,r=3*s/Z.f-2):s>=Z.f&&s<4*Z.f/3?(n=0,c=4-3*s/Z.f,r=1):s>=4*Z.f/3&&s<5*Z.f/3?(n=3*s/Z.f-4,c=0,r=1):s>=5*Z.f/3&&s<2*Z.f&&(n=1,c=0,r=6-3*s/Z.f),{r:n=_(n),g:c=_(c),b:r=_(r),a:_(a)}};function te(e){var t=e.toPolar(),a=t.phi,n=t.r;a<0&&(a+=2*Z.f);var c=$(a).slice(3,-1);return"rgba".concat(c,", ").concat(n,")")}var ae=function(){function e(){Object(V.a)(this,e),this.C=0,this.Cs=0,this.D=0,this.Ds=0,this.E=0,this.F=0,this.Fs=0,this.G=0,this.Gs=0,this.A=0,this.As=0,this.B=0}return Object(Y.a)(e,[{key:"addNoteDuration",value:function(e,t){switch(e){case"C":this.C+=t;break;case"C#":this.Cs+=t;break;case"D":this.D+=t;break;case"D#":this.Ds+=t;break;case"E":this.E+=t;break;case"F":this.F+=t;break;case"F#":this.Fs+=t;break;case"G":this.G+=t;break;case"G#":this.Gs+=t;break;case"A":this.A+=t;break;case"A#":this.As+=t;break;case"B":this.B+=t}}},{key:"getPcvAsArray",value:function(){return[this.C,this.Cs,this.D,this.Ds,this.E,this.F,this.Fs,this.G,this.Gs,this.A,this.As,this.B]}},{key:"add",value:function(e){this.C=e.C,this.Cs=e.Cs,this.D=e.D,this.Ds=e.Ds,this.E=e.E,this.F=e.F,this.Fs=e.Fs,this.G=e.G,this.Gs=e.Gs,this.A=e.A,this.As=e.As,this.B=e.B}}]),e}();function ne(e,t,a){var n,c=t.noteResolutionValue,r=t.seconds,s=t.useSeconds;n=s?isNaN(r)?1:r:c*(60/a);var i=e.duration,l=[];e.tracks.filter((function(e){return!1===e.instrument.percussion})).forEach((function(e){l.push(ce(e.notes,n,i))}));for(var o=[],u=0;u<l[0].length;u++)o.push(new ae);for(var h=0;h<l.length;h++)for(var j=0;j<l[h].length;j++)for(var b=0;b<l[h][j].length;b++){var f=l[h][j][b],d=f.pitch,x=f.duration;o[j].addNoteDuration(d,x)}var g=o.map((function(e){return q(e.getPcvAsArray())})),p=[];p.push(g);for(var O=[],A=p[0],m=1;m<7;m++){for(var v=[],y=0;y<A.length;y++)v.push({x:A[y][m].re,y:A[y][m].im});O.push(v)}return{tracesData:O,resolution:n}}function ce(e,t,a){for(var n=[],c=t,r=function(t){var a=[];e.forEach((function(e){var n=e.time,r=e.duration;if(function(e,t,a,n){if(e>a&&e<a+n||e+t>a&&e+t<a+n||e<=a&&e+t>=a+n)return!0;return!1}(n,r,t,c)){var s={pitch:e.pitch};s.duration=n<t?n+r<t+c?n+r-t:c:n+r<=t+c?r:t+c-n,a.push(s)}})),n.push(a)},s=0;s<a;s+=t)r(s);return n}function re(e,t){for(var a=[],n=0;n<2*Math.PI*t;n+=.01){var c=10*Math.cos(e/t*n),r=c*Math.cos(n),s=c*Math.sin(n);a.push([r,s])}return a}var se=a(443),ie=a(431),le=a(465),oe=a(460),ue=a(448),he=a.p+"static/media/whole.69e31bd8.svg",je=a.p+"static/media/half.7d756528.svg",be=a.p+"static/media/quarter.a35808dc.svg",fe=a.p+"static/media/eighth.347a1769.svg",de=a.p+"static/media/sixteenth.91907e68.svg";var xe=function(e){var t=e.resolutionMode,a=e.setResolutionMode,c=e.retriggerAnalysis,r=Object(n.useState)(!1),s=Object(o.a)(r,2),i=s[0],l=s[1],h=Object(n.useRef)(null);return Object(v.jsx)(j.a,{children:Object(v.jsx)(le.a,{component:"fieldset",children:Object(v.jsxs)(ie.a,{row:!0,defaultValue:"quarter",onChange:function(e){var n=Object(u.a)({},t);switch(n.seconds=parseFloat(h.current.value),e.target.value){case"sixteenth":n.noteResolutionValue=.25,n.useSeconds=!1;break;case"eighth":n.noteResolutionValue=.5,n.useSeconds=!1;break;case"quarter":n.noteResolutionValue=1,n.useSeconds=!1;break;case"half":n.noteResolutionValue=2,n.useSeconds=!1;break;case"whole":n.noteResolutionValue=4,n.useSeconds=!1;break;case"seconds":n.useSeconds=!0}a(n)},"aria-label":"resolution",name:"row-radio-buttons-group",sx:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsx)(oe.a,{value:"sixteenth",control:Object(v.jsx)(se.a,{size:"small"}),label:Object(v.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3)"},src:de})}),Object(v.jsx)(oe.a,{value:"eighth",control:Object(v.jsx)(se.a,{size:"small"}),label:Object(v.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3) translate(0, 0)"},src:fe})}),Object(v.jsx)(oe.a,{value:"quarter",control:Object(v.jsx)(se.a,{size:"small"}),label:Object(v.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(1, 3)"},src:be})}),Object(v.jsx)(oe.a,{value:"half",control:Object(v.jsx)(se.a,{size:"small"}),label:Object(v.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(3.7, 3.2) "},src:je})}),Object(v.jsx)(oe.a,{value:"whole",control:Object(v.jsx)(se.a,{size:"small"}),label:Object(v.jsx)("img",{style:{width:10,height:10,marginTop:0,transform:"scale(1.5, 1)"},src:he})}),Object(v.jsx)(oe.a,{value:"seconds",control:Object(v.jsx)(se.a,{size:"small"}),label:Object(v.jsx)(ue.a,{sx:{minHeight:"4.4rem",maxWidth:"5rem"},error:i,helperText:i&&"Invalid input",label:"in seconds",id:"standard-size-small",defaultValue:"1.5",size:"small",variant:"standard",onChange:function(){var e=Object(u.a)({},t);e.seconds=parseFloat(h.current.value),isNaN(e.seconds)?l(!0):(a(e),l(!1))},inputRef:h})}),Object(v.jsx)(d.a,{variant:"contained",onClick:c,sx:{width:"22%",height:"15%",marginTop:2},children:"Change"})]})})})},ge=a(453),pe=a(456),Oe=Object(p.a)("li")((function(e){return{margin:e.theme.spacing(.5)}}));function Ae(e){var t=e.userPcvs,a=e.setUserPcvs,n=e.rosesMat;return Object(v.jsx)(pe.a,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",p:"3px",overflow:"auto",height:"100%",width:"100%"},component:"ul",children:t.map((function(e,c){return Object(v.jsx)(Oe,{children:Object(v.jsx)(ge.a,{variant:e.isDisabled?"outlined":"filled",icon:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(v.jsx)("g",{children:Object(v.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:e.rosePoints})})}),label:e.label,onDelete:(r=e,function(){n[r.d-1][r.n-1].used=!1,a((function(e){return e.filter((function(e){return e.label!==r.label}))}))}),onClick:function(){e.isDisabled=!e.isDisabled,a(Object(l.a)(t))}})},"".concat(c));var r}))})}var me=a(55),ve=a(182),ye=a(476),we=["to"];var Ce={overrides:{h1:{component:f.a,props:{gutterBottom:!0,variant:"h4",component:"h1"}},h2:{component:f.a,props:{gutterBottom:!0,variant:"h6",component:"h2"}},h3:{component:f.a,props:{gutterBottom:!0,variant:"subtitle1"}},h4:{component:f.a,props:{gutterBottom:!0,variant:"caption",paragraph:!0}},p:{component:f.a,props:{paragraph:!0}},a:{component:function(e){e.to;var t=Object(me.a)(e,we),a=n.useRef(null);return isNaN(parseInt(t.href[1]))?Object(v.jsx)(ye.a,Object(u.a)({},t)):Object(v.jsx)(ye.a,Object(u.a)(Object(u.a)({ref:a,onClick:function(e){e.preventDefault(),a.current.scrollIntoView({behavior:"smooth"})}},t),{},{id:"reference".concat(t.href[1]),href:"/#".concat(t.href[1])}))}},li:{component:function(e){return Object(v.jsx)(j.a,Object(u.a)({component:"li",sx:{mt:1,typography:"body1"}},e))}}}};function De(e){return Object(v.jsx)(ve.a,Object(u.a)({options:Ce},e))}var ke="data:image/png;base64,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";var Pe=function(){var e=100;return Object(v.jsxs)(j.a,{sx:{marginTop:1,textAlign:"center"},children:[Object(v.jsxs)(F.a,{sx:{justifyContent:"center"},direction:"row",children:[Object(v.jsx)("img",{width:e,height:e,src:ke}),Object(v.jsx)("img",{width:e,height:e,src:ke}),Object(v.jsx)("img",{width:e,height:e,src:ke})]}),Object(v.jsx)(f.a,{children:"Project \u201cEnabling interactive music visualization for a wider community\u201d"}),Object(v.jsxs)(F.a,{sx:{justifyContent:"center"},direction:"row",children:[Object(v.jsx)(f.a,{sx:{marginRight:1},children:"Project lead: Fabian C. Moss; Daniel Harasim"}),Object(v.jsx)("span",{children:"\u2013"}),Object(v.jsx)(f.a,{sx:{marginLeft:1},children:"Developer: Giovanni Affatato"})]}),Object(v.jsxs)(F.a,{sx:{justifyContent:"center"},direction:"row",children:[Object(v.jsx)(ye.a,{sx:{marginRight:1},href:"https://github.com/DCMLab/MIDFT",children:"GitHub repo"}),Object(v.jsx)("span",{children:"\u2022"}),Object(v.jsx)(ye.a,{sx:{marginLeft:1,marginRight:1},href:"https://www.epfl.ch/labs/dcml/",children:"DCML page"}),Object(v.jsx)("span",{children:"\u2022"}),Object(v.jsx)(f.a,{sx:{marginLeft:1},href:"",children:"Copyright"})]})]})},Se=a.p+"static/media/HomeMarkdown.4682608b.md";function Fe(e){var t=e.setOpen,a=e.setInAnalysisPage,c=Object(n.useState)(""),r=Object(o.a)(c,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){a(!1),t(!1),fetch(Se).then((function(e){return e.text()})).then((function(e){i(e)}))}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(pe.a,{sx:{margin:"auto",maxWidth:"1200px"},children:Object(v.jsx)(j.a,{sx:{padding:3},children:Object(v.jsx)(De,{children:s})})}),Object(v.jsx)(Pe,{})]})}var Me=a.p+"static/media/TheoryMarkdown.26c0a4ee.md",Be=a(145);a(361);function Ee(e){var t=e.setOpen,a=e.setInAnalysisPage,c=Object(n.useState)(""),r=Object(o.a)(c,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){a(!1),t(!1),fetch(Me).then((function(e){return e.text()})).then((function(e){i(e)}))}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(pe.a,{sx:{margin:"auto",maxWidth:"1200px"},children:Object(v.jsxs)(j.a,{sx:{padding:3},children:[Object(v.jsx)(De,{children:s}),Object(v.jsx)(De,{children:"TEST Given a **formula** below"}),Object(v.jsx)(Be.a,{math:"s = ut + \\frac{1}{2}at^{2}",block:!0}),Object(v.jsx)(De,{children:"TEST Given this **inline formula** "}),Object(v.jsx)(Be.a,{math:" s = ut + \\frac{1}{2}at^{2}"}),Object(v.jsx)(De,{children:" I can continue writing on the same line"})]})}),Object(v.jsx)(Pe,{})]})}var Ie=Math.sin(Math.PI/3),We=function(e){var t,a=e.wsNumber,c=e.wavescapeMatrix,r=e.currentWavescapeSubdiv,s=e.wavescapeWidth,i=Object(n.useRef)(null),l=Object(n.useState)([]),u=Object(o.a)(l,2),h=u[0],j=u[1],b=s-10,f=s,d=Object(n.useState)(3),x=Object(o.a)(d,2),g=x[0],p=x[1];return Object(n.useEffect)((function(){b=s,f=s,p(g<1?1:Math.floor(.01*s))}),[s]),Object(n.useEffect)((function(){var e,a=i.current,n=a.getContext("2d"),r=[10,10],s=[a.width-r[0],a.height-r[1]];c&&(e=c[0].length,n.clearRect(0,0,n.canvas.width,n.canvas.height),t=function(e,t,a,n,c){for(var r=e/a,s=[],i=0;i<a+1;i++){for(var l=[],o=0;o<a+1;o++)i<=o&&l.push({x:(o-i)*r+i*r/2+n,y:i*r+c});s.push(l)}return s}(s[0],0,e,r[0],r[1]),j(t),function(e,t,a){for(var n=0;n<e.length-1;n++)for(var c=0;c<e[n].length-1;c++)0===n?(t.beginPath(),t.moveTo(e[n][c].x,e[n][c].y),t.lineTo(e[n][c+1].x,e[n][c+1].y),t.lineTo(e[n+1][c].x,e[n+1][c].y),t.fillStyle=a[n][c],t.fill()):(t.beginPath(),t.moveTo(e[n][c].x,e[n][c].y),t.lineTo(e[n-1][c+1].x,e[n-1][c+1].y),t.lineTo(e[n][c+1].x,e[n][c+1].y),t.lineTo(e[n+1][c].x,e[n+1][c].y),t.fillStyle=a[n][c],t.fill())}(t,n,c))}),[c,b,f]),Object(v.jsxs)("svg",{id:"wavescape".concat(a),width:b+10,height:f,xmlns:"http://www.w3.org/2000/svg",children:[Object(v.jsxs)("g",{transform:"translate(".concat(.06*b,",").concat(.1*b,")"),children:[Object(v.jsx)("circle",{cx:"5%",cy:"1%",r:"".concat(b/100*2.8,"px"),fill:"black"}),Object(v.jsx)("text",{fontSize:"".concat(b/100*5.2,"px"),textAnchor:"middle",x:"5%",y:"2.8%",fill:"white",children:a})]}),Object(v.jsxs)("g",{transform:"scale(".concat(1,", ",-Ie,") translate(",0,",").concat(-f,")"),children:[Object(v.jsx)("foreignObject",{x:0,y:0,width:b,height:f,children:Object(v.jsx)("canvas",{width:b,height:f,ref:i})}),h.length>0?h[0].map((function(e,t){return Object(v.jsx)("line",{x1:e.x,x2:e.x,y1:e.y-g,y2:e.y+g,stroke:"grey",strokeWidth:"1px"},"tick".concat(t))})):null,h.length>0?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("line",{x1:h[0][0].x,x2:h[0][h[0].length-1].x,y1:h[0][0].y,y2:h[0][h[0].length-1].y,stroke:"grey",strokeWidth:"2px"}),Object(v.jsx)("line",{x1:h[0][h[0].length-1].x,x2:h[h.length-1][0].x,y1:h[0][h[0].length-1].y,y2:h[h.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(v.jsx)("line",{x1:h[0][0].x,x2:h[h.length-1][0].x,y1:h[0][0].y,y2:h[h.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(v.jsx)("circle",{cx:(h[0][r].x+h[0][r+1].x)/2,cy:(h[0][r].y+h[0][r+1].y)/2,r:.01*b,fill:"white"}),Object(v.jsx)("circle",{cx:(h[0][r].x+h[0][r+1].x)/2,cy:(h[0][r].y+h[0][r+1].y)/2,r:.01*b,stroke:"black",strokeWidth:1,fill:"transparent"})]}):null]})]})};var Te=function(e){var t=e.wavescapesData,a=e.currentWavescapeSubdiv,n=e.elemsWidth;return Object(v.jsx)(j.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:t.length>0?t.map((function(e,t){return Object(v.jsx)(We,{wsNumber:t+1,wavescapeMatrix:e,currentWavescapeSubdiv:a,wavescapeWidth:n},"w.".concat(t))})):Object(v.jsx)(f.a,{color:"error",children:"No midi file uploaded"})})},Ge=a(440),ze=null;var Re=function(e){var t,a=e.coeffNumber,c=e.protoDataCoeff,r=e.fullTrace,s=e.traceDataCoeff,l=e.userPcvsCoeff,u=e.currentSubdiv,h=e.performanceCoeff,b=e.targetCircleWidth,d=e.showMagAndPhase,x=e.showFullTrace,g=Object(n.useRef)(null),p=Object(n.useState)({mu:0,phi:0}),O=Object(o.a)(p,2),A=O[0],m=O[1],y=445,w=y,C=45,D=177.5,k=.01;function P(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=180*Math.atan2(t,e)/Math.PI,c=Math.sqrt(e*e+t*t);return a&&(c/=D),n=Math.round(n+Number.EPSILON),{mu:c=Math.round(100*(c+Number.EPSILON))/100,phi:n}}function S(){var e=g.current.getContext("2d");e.fillStyle="rgba(0, 0, 0, 0.1)",s.forEach((function(t){e.beginPath(),e.arc(t.x*D,-t.y*D,2.225,0,2*Math.PI,!0),e.fill()}))}return Object(n.useEffect)((function(){if(s&&s[u]){var e=s[u].x,t=s[u].y;m(P(e,t))}}),[u,s]),Object(n.useEffect)((function(){var e=g.current,t=e.getContext("2d"),a=Math.floor(D*devicePixelRatio),n=t.createImageData(2*a,2*a),c=n.data;if(e.width=y*devicePixelRatio,e.height=w*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width="445px",e.style.height="445px",!ze){for(var r=-a;r<a;r++)for(var i=-a;i<a;i++){var l=Math.sqrt(r*r+i*i);if(!(l>a)){var o=4*(r+a+(i+a)*(2*a)),u=ee(r,i,l/a);c[o]=u.r,c[o+1]=u.g,c[o+2]=u.b,c[o+3]=u.a}}ze=n}t.putImageData(ze,0,0),x&&s&&(t.save(),t.translate(177.5,177.5),S(),t.restore())}),[y,w,D,s,x]),Object(n.useEffect)((function(){g.current.getContext("2d").getImageData(0,0,1,1)}),[]),Object(n.useEffect)((function(){if(s){var e=g.current.getContext("2d");e.save(),e.translate(177.5,177.5),S(),e.restore()}}),[r]),Object(v.jsx)(j.a,{sx:{marginBottom:2},children:Object(v.jsxs)("svg",{width:b,height:b,viewBox:"0 0 ".concat(y," ").concat(w),xmlns:"http://www.w3.org/2000/svg",children:[Object(v.jsxs)("g",{transform:"translate(32,8)",children:[Object(v.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(v.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:a})]}),Object(v.jsx)("g",{transform:"translate(".concat(125,",0)"),children:d?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("text",{x:"120",y:"23",style:{fontSize:"24px"},children:"\u03c6: ".concat(A.phi,"\xb0")}),Object(v.jsx)("text",{x:"34",y:"24",style:{fontSize:"24px"},children:"\u03bc: ".concat(A.mu)})]}):null}),Object(v.jsxs)("g",{transform:"translate(0,".concat(15,")"),children:[Object(v.jsx)("foreignObject",{x:C,y:C,width:y,height:w,children:Object(v.jsx)("canvas",{id:"circle".concat(a),style:{zIndex:"-1"},width:y,height:w,ref:g})}),Object(v.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(v.jsx)("path",{fill:"azure",d:X.a().innerRadius(176.5).outerRadius(180.5).startAngle(0).endAngle(2*Math.PI)()}),c?c.map((function(e,t){return function(e,t){var a=X.a().innerRadius(4.45).outerRadius(6.675).startAngle(0).endAngle(2*Math.PI),n="",c="",r=!1;if(e.label.includes("_")||e.label.includes("^"))for(var s=0;s<e.label.length;s++)"_"===e.label[s]&&(n=e.label.slice(0,s),c=e.label.slice(s+1,e.label.length),r=!0),"^"===e.label[s]&&(n=e.label.slice(0,s),c=e.label.slice(s+1,e.label.length));else n=e.label;var i=18*Math.sign(e.x),l=18*-Math.sign(e.y)+7;return"\u266f"===n&&(l-=3),"WT"===n&&"1"===c&&(i*=1.2),"WT"===n&&"0"===c&&(i*=1.4),"C"===n&&"o7"===c&&(i*=1.2),"O"===n&&"1,2"===c&&(l*=1.1),"C\u266f"===n&&"o7"===c&&(i*=1.1,l*=1.1),"D"===n&&"o7"===c&&(i*=.7,l*=.7),"H"===n&&"2,3"===c&&(i*=1.2,l*=1.2),"H"===n&&"1,2"===c&&(i*=.7,l*=.7),"\u03a9"===n&&(i=15,l=5),Object(v.jsxs)("g",{transform:"translate(".concat(e.x*D,",").concat(-e.y*D,")"),children:[Object(v.jsx)("path",{fill:"grey",d:a()},t),Object(v.jsxs)("text",{textAnchor:"middle",dx:i,dy:l,fontSize:"20px",children:[n,r?Object(v.jsx)("tspan",{fontSize:15,baselineShift:"sub",children:c}):Object(v.jsx)("tspan",{fontSize:15,baselineShift:"super",children:c})]})]},"p.".concat(t))}(e,t)})):null,0===h.x&&0===h.y?null:(t=h,Object(v.jsxs)("g",{transform:"translate(".concat(t.x*D,",").concat(-t.y*D,")"),children:[Object(v.jsx)("line",{x1:"0",x2:"0",y1:"7",y2:"-7",stroke:"black",strokeWidth:"1.5"}),Object(v.jsx)("line",{x1:"7",x2:"-7",y1:"0",y2:"0",stroke:"black",strokeWidth:"1.5"})]})),l?l.map((function(e,t){if(!e.isDisabled)return function(e,t,a,n,c,r){var s,l=P(a,n,!0),o=40;return Object(v.jsx)(Ge.a,{placement:"top",arrow:!0,title:Object(v.jsxs)(F.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[Object(v.jsxs)("svg",{width:o,height:o,viewBox:"0 0 ".concat(o," ").concat(o),children:[Object(v.jsx)("circle",{cx:20,cy:20,r:20,strokeWidth:"1",fill:"#FFF",fillOpacity:1}),Object(v.jsx)("polyline",{transform:"translate(".concat(20,",").concat(20,") scale(",1.8,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]}),Object(v.jsxs)(F.a,{children:[Object(v.jsx)(f.a,{children:e}),Object(v.jsx)(f.a,{children:"\u03bc: ".concat(l.mu," \u03c6: ").concat(-l.phi,"\xb0")})]})]}),children:Object(v.jsxs)("g",{children:[Object(v.jsx)("polyline",(s={transform:"translate(".concat(a,",").concat(n,") scale(").concat(c,")"),fill:"none",stroke:"black",strokeWidth:"1px"},Object(i.a)(s,"fill","#FFF"),Object(i.a)(s,"fillOpacity",0),Object(i.a)(s,"points",t),s)),Object(v.jsx)("polyline",{transform:"translate(".concat(a,",").concat(n,") scale(").concat(c,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]})},"rtt.".concat(r))}(e.label,e.rosePoints,e.x*D,-e.y*D,.7,t)})):null,s?function(e){var t=X.a().innerRadius(0).outerRadius(e*y/2).startAngle(0).endAngle(2*Math.PI),a=X.a().innerRadius(e*y/2).outerRadius((e+.005)*y/2).startAngle(0).endAngle(2*Math.PI),n=[];n.push(1),n.push(.5);for(var c=2;c<7;c++)n.push(Math.round(100*(n[c-1]-.1))/100);return(u<7?s.slice(0,u+1):s.slice(u-7+1,u+1)).reverse().map((function(e,c){return Object(v.jsxs)("g",{children:[Object(v.jsx)("path",{transform:"translate(".concat(e.x*D,",").concat(-e.y*D,")"),fill:"white",fillOpacity:n[c],d:t()},c),Object(v.jsx)("path",{transform:"translate(".concat(e.x*D,",").concat(-e.y*D,")"),fill:"black",fillOpacity:n[c],d:a()},"t.".concat(c))]},"g.".concat(c))}))}(k):null]})]})]})})},Le=[[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"C\u266f",x:.866,y:-.5},{label:"D",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"E",x:-.5,y:-.866},{label:"F",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"G",x:-.866,y:.5},{label:"A\u266d",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"B\u266d",x:.5,y:.866},{label:"B",x:.866,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"T_0",x:1,y:0},{label:"T_1",x:.5,y:-.866},{label:"T_2",x:-.5,y:-.866},{label:"T_3",x:-1,y:0},{label:"T_4",x:-.5,y:.866},{label:"T_5",x:.5,y:.866}],[{label:"\u03a9",x:0,y:0},{label:"C+",x:1,y:0},{label:"C\u266f+",x:0,y:-1},{label:"D+",x:-1,y:0},{label:"D\u266f+",x:0,y:1},{label:"H_0,3",x:.5,y:.5},{label:"H_0,1",x:.5,y:-.5},{label:"H_1,2",x:-.5,y:-.5},{label:"H_2,3",x:-.5,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"C^o7",x:1,y:0},{label:"C\u266f^o7",x:-.5,y:-.866},{label:"D^o7",x:-.5,y:.866},{label:"O_0,2",x:.25,y:.433},{label:"O_0,1",x:.25,y:-.433},{label:"O_1,2",x:-.5,y:0}],[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"F",x:.866,y:-.5},{label:"B\u266d",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"A\u266d",x:-.5,y:-.866},{label:"C\u266f",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"B",x:-.866,y:.5},{label:"E",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"D",x:.5,y:.866},{label:"G",x:.866,y:.5},{label:"\u266e",x:.267,y:.462},{label:"5\u266d",x:0,y:-.533},{label:"2\u266f",x:-.267,y:.462},{label:"3\u266d",x:.462,y:-.267},{label:"4\u266f",x:-.533,y:0},{label:"\u266d",x:.462,y:.267},{label:"6\u266f",x:-.267,y:-.462},{label:"\u266f",x:0,y:.533},{label:"4\u266d",x:.267,y:-.462},{label:"3\u266f",x:-.462,y:.267},{label:"2\u266d",x:.533,y:0},{label:"5\u266f",x:-.462,y:-.267}],[{label:"\u03a9",x:0,y:0},{label:"WT_0",x:1,y:0},{label:"WT_1",x:-1,y:0}]];var Ne=function(e){var t=e.fullTraces,a=e.coeffTracesData,c=e.showPrototypes,r=e.showMagAndPhase,s=e.userPcvs,i=e.currentSubdiv,l=e.midiDevNotesDftCoeffs,u=e.elemsWidth,h=e.showFullTrace,b=Object(n.useState)(Le),f=Object(o.a)(b,2),d=f[0],x=f[1],g=Object(n.useState)([]),p=Object(o.a)(g,2),O=p[0],A=p[1];return Object(n.useEffect)((function(){x(c?Le:[])}),[c]),Object(n.useEffect)((function(){for(var e=[],t=1;t<7;t++){for(var a=[],n=0;n<s.length;n++)a.push({x:s[n].coeffs[t].re,y:s[n].coeffs[t].im,rosePoints:s[n].rosePoints,isDisabled:s[n].isDisabled,label:s[n].label});e.push(a)}A(e)}),[s]),Object(v.jsx)(j.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[1,2,3,4,5,6].map((function(e){return Object(v.jsx)(Re,{coeffNumber:e,protoDataCoeff:d[e-1],fullTrace:t[e-1],traceDataCoeff:a[e-1],userPcvsCoeff:O[e-1],currentSubdiv:i,performanceCoeff:l[e],targetCircleWidth:u,showMagAndPhase:r,showFullTrace:h},"w.".concat(e))}))})},Qe=a(385),He=a(461),Je=a(449),Ve=a(450),Ye=a(441),Ke=a(445),Ze=a(467),qe=a(468),Ue=a(147),Xe=a.n(Ue),_e=Object(p.a)(h.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));var $e=function(e){var t=e.fileName,a=e.setInAnalysisPage,c=e.open,r=e.setOpen,s=e.wavescapesData,i=e.fullTraces,l=e.coeffTracesData,u=e.currentSubdiv,h=e.currentWavescapeSubdiv,d=e.userPcvs,x=Object(n.useState)(!0),g=Object(o.a)(x,2),p=g[0],O=g[1],A=Object(n.useState)(!0),m=Object(o.a)(A,2),y=m[0],w=m[1],C=Object(n.useState)(!0),D=Object(o.a)(C,2),k=D[0],P=D[1],F=Object(n.useState)(q([0,0,0,0,0,0,0,0,0,0,0,0]).map((function(e){return{x:e.re,y:e.im}}))),M=Object(o.a)(F,2),B=M[0],E=M[1],I=Object(n.useRef)(null),W=Object(n.useState)(100),T=Object(o.a)(W,2),z=T[0],R=T[1],L=Object(n.useState)(3),N=Object(o.a)(L,2),Q=N[0],J=N[1],V=Object(n.useState)(440),Y=Object(o.a)(V,2),K=Y[0],Z=Y[1];function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=10;I.current&&Z((I.current.clientWidth+e)/Q-t)}function X(){U(0)}return Object(n.useEffect)((function(){a(!0),r(!0),U(),window.addEventListener("resize",X)}),[]),Object(n.useEffect)((function(){P(!0)}),[i]),Object(n.useEffect)((function(){U(),window.addEventListener("resize",X)}),[Q]),Object(n.useEffect)((function(){U(c?-400:400)}),[c]),Object(n.useEffect)((function(){U()}),[z]),Object(n.useEffect)((function(){var e=[],t=new S.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function a(a){var n=a.data[0];if(144===n||128===n){var c=S.a(a.data[1],"midi").toNote();if(128!==n||e.includes(c)){var r=Math.round(.05*a.data[2]);switch(n){case 144:r>0?(t.triggerAttack(c,S.f(),r),e.push(c)):(t.triggerRelease(c,S.f()),e=e.filter((function(e){return e!==c})));break;case 128:t.triggerRelease(c,S.f()),e=e.filter((function(e){return e!==c}))}!function(e){var t=[0,0,0,0,0,0,0,0,0,0,0,0];e.forEach((function(e){switch(e.includes("#")?e.slice(0,2):e.slice(0,1)){case"C":t[0]+=1;break;case"C#":t[1]+=1;break;case"D":t[2]+=1;break;case"D#":t[3]+=1;break;case"E":t[4]+=1;break;case"F":t[5]+=1;break;case"F#":t[6]+=1;break;case"G":t[7]+=1;break;case"G#":t[8]+=1;break;case"A":t[9]+=1;break;case"A#":t[10]+=1;break;case"B":t[11]+=1}}));var a=q(t);a=a.map((function(e){return{x:e.re,y:e.im}})),E(a)}(e)}}}function n(e){console.log("Name: ".concat(e.port.name,", Brand: ").concat(e.port.manufacturer,", State: ").concat(e.port.state,", Type: ").concat(e.port.type))}t.volume.value=-30,navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then((function(e){e.onstatechange=n,e.inputs.forEach((function(e){e.onmidimessage=a}))}),(function(){console.log("Could not connect MIDI")}))}),[]),Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(j.a,{sx:{padding:0,margin:"auto",marginBottom:"70px",width:"".concat(z,"%")},children:[Object(v.jsxs)(Ke.a,{defaultExpanded:!0,children:[Object(v.jsx)(Ze.a,{expandIcon:Object(v.jsx)(Xe.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(v.jsx)(f.a,{variant:"h6",children:"Wavescapes"})}),Object(v.jsx)(qe.a,{ref:I,sx:{padding:0},children:Object(v.jsx)(Te,{wavescapesData:s,currentWavescapeSubdiv:h,elemsWidth:K})})]}),Object(v.jsxs)(Ke.a,{defaultExpanded:!0,children:[Object(v.jsx)(Ze.a,{expandIcon:Object(v.jsx)(Xe.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(v.jsx)(f.a,{variant:"h6",children:"Fourier Coefficient Spaces"})}),Object(v.jsx)(qe.a,{sx:{padding:0},children:Object(v.jsx)(Ne,{fullTraces:i,coeffTracesData:l,currentSubdiv:u,showPrototypes:p,showMagAndPhase:y,showFullTrace:k,userPcvs:d,midiDevNotesDftCoeffs:B,elemsWidth:K})})]})]}),Object(v.jsx)(_e,{position:"fixed",open:c,color:"secondary",sx:{top:"auto",bottom:0,maxHeight:"74px"},children:Object(v.jsxs)(b.a,{children:[Object(v.jsx)(H,{fileName:t,currentWavescapeSubdiv:h}),Object(v.jsx)(j.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5%",maxWidth:"100px",justifyContent:"space-evenly"},children:Object(v.jsxs)(Qe.a,{children:[Object(v.jsx)(oe.a,{control:Object(v.jsx)(He.a,{onChange:function(){P(!k)},checked:k,size:"small"}),label:Object(v.jsx)(f.a,{noWrap:!0,children:"Show full trace"})}),Object(v.jsx)(oe.a,{control:Object(v.jsx)(He.a,{onChange:function(){O(!p)},checked:p,size:"small"}),label:Object(v.jsx)(f.a,{noWrap:!0,children:"Show Prototypes"})}),Object(v.jsx)(oe.a,{control:Object(v.jsx)(He.a,{onChange:function(){w(!y)},checked:y,size:"small"}),label:Object(v.jsx)(f.a,{noWrap:!0,children:"Show \u03bc and \u03c6"})})]})}),Object(v.jsxs)(j.a,{sx:{minWidth:"20%",padding:"1% 3% 1% 2%",marginTop:1},children:[Object(v.jsx)(f.a,{children:"Plots size"}),Object(v.jsx)(G.a,{min:20,max:100,value:z,defaultValue:100,"aria-label":"Plots size",valueLabelDisplay:"auto",onChange:function(e,t){R(t)},marks:[{value:20,label:"20%"},{value:50,label:"50%"},{value:100,label:"100%"}]})]}),Object(v.jsx)(j.a,{sx:{minWidth:120},children:Object(v.jsxs)(le.a,{size:"small",variant:"standard",fullWidth:!0,children:[Object(v.jsx)(Je.a,{children:"Layout"}),Object(v.jsxs)(Ye.a,{value:Q,label:"Layout",onChange:function(e){R(100),J(e.target.value)},children:[Object(v.jsx)(Ve.a,{value:6,children:"1x6"}),Object(v.jsx)(Ve.a,{value:3,children:"2x3"}),Object(v.jsx)(Ve.a,{value:2,children:"3x2"}),Object(v.jsx)(Ve.a,{value:1,children:"6x1"})]})]})})]})})]})},et=a(30),tt=a(452),at=a(186),nt=a.n(at),ct=a(438),rt=a(184),st=a.n(rt),it=a(185),lt=function(e){var t=e.traceData,a=e.userPcv,n=e.prototypesData,c=e.coeffNumber,r=e.showNumber,s=450,i=180,l=2*Z.f/50,o=X.b(0,2*Z.f,l),u=X.b(0,1,.05);return Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:450,children:[r?Object(v.jsxs)("g",{transform:"translate(32,20)",children:[Object(v.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(v.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:c})]}):null,Object(v.jsxs)("g",{transform:"translate(".concat(225,",").concat(225,")"),children:[u.map((function(e){return o.map((function(t,a){return function(e,t,a,n){var c=-Z.f/2,r=X.a().innerRadius(360*n/2).outerRadius(360*(n+.05)/2).startAngle(-(e+c)).endAngle(-(e+l+c));return Object(v.jsx)("path",{fill:$(e),fillOpacity:n,stroke:$(e),strokeOpacity:n/10,d:r()},"".concat(a,".").concat(t))}(t,a,c,e)}))})),t.map((function(e,t){return function(e,t,a,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=X.a().innerRadius(0).outerRadius(t*s/2).startAngle(0).endAngle(2*Math.PI);return Object(v.jsx)("path",{transform:"translate(".concat(e.x*i,",").concat(-e.y*i,")"),fill:a,fillOpacity:c,d:r()},n)}(e,.01,"black",t,.2)})),a?a.map((function(e,t){if(!e.isDisabled)return function(e,t,a,n,c){return Object(v.jsx)("g",{children:Object(v.jsx)("polyline",{transform:"translate(".concat(t,",").concat(a,") scale(").concat(n,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:e})},"rose".concat(c))}(e.rosePoints,e.x*i,-e.y*i,.7,t)})):null,n.map((function(e,t){return function(e,t){var a=X.a().innerRadius(4.5).outerRadius(6.75).startAngle(0).endAngle(2*Math.PI),n="",c="",r=!1;if(e.label.includes("_")||e.label.includes("^"))for(var s=0;s<e.label.length;s++)"_"===e.label[s]&&(n=e.label.slice(0,s),c=e.label.slice(s+1,e.label.length),r=!0),"^"===e.label[s]&&(n=e.label.slice(0,s),c=e.label.slice(s+1,e.label.length));else n=e.label;var l=18*Math.sign(e.x),o=18*-Math.sign(e.y)+7;return"\u266f"===n&&(o-=3),"WT"===n&&"1"===c&&(l*=1.2),"WT"===n&&"0"===c&&(l*=1.4),"C"===n&&"o7"===c&&(l*=1.2),"O"===n&&"1,2"===c&&(o*=1.1),"C\u266f"===n&&"o7"===c&&(l*=1.1,o*=1.1),"D"===n&&"o7"===c&&(l*=.7,o*=.7),"H"===n&&"2,3"===c&&(l*=1.2,o*=1.2),"H"===n&&"1,2"===c&&(l*=.7,o*=.7),"\u03a9"===n&&(l=15,o=5),Object(v.jsxs)("g",{transform:"translate(".concat(e.x*i,",").concat(-e.y*i,")"),children:[Object(v.jsx)("path",{fill:"grey",d:a()},t),Object(v.jsxs)("text",{textAnchor:"middle",dx:l,dy:o,fontSize:"20px",children:[n,r?Object(v.jsx)("tspan",{fontSize:15,baselineShift:"sub",children:c}):Object(v.jsx)("tspan",{fontSize:15,baselineShift:"super",children:c})]})]},"p.".concat(t))}(e,t)}))]})]},"circle".concat(c))},ot=Math.sin(Math.PI/3);var ut=function(e){var t,a,n=e.wsNumber,c=e.wavescapeMatrix,r=e.showNumber,s=400,i=[10,10],l=[s-i[0],s-i[1]];return t=c[0].length,a=function(e,t,a,n,c){for(var r=e/a,s=[],i=0;i<a+1;i++){for(var l=[],o=0;o<a+1;o++)i<=o&&l.push({x:(o-i)*r+i*r/2+n,y:i*r+c});s.push(l)}return s}(l[0],0,t,i[0],i[1]),Object(v.jsxs)("svg",{id:"wavescape".concat(n),width:410,height:400,xmlns:"http://www.w3.org/2000/svg",children:[r?Object(v.jsxs)("g",{transform:"translate(32,20)",children:[Object(v.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(v.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:n})]}):null,Object(v.jsxs)("g",{transform:"scale(".concat(1,", ",-ot,") translate(",0,",").concat(-420,")"),children:[a.length>0?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("line",{x1:a[0][0].x,x2:a[0][a[0].length-1].x,y1:a[0][0].y,y2:a[0][a[0].length-1].y,stroke:"grey",strokeWidth:"1px"}),Object(v.jsx)("line",{x1:a[0][a[0].length-1].x,x2:a[a.length-1][0].x,y1:a[0][a[0].length-1].y,y2:a[a.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(v.jsx)("line",{x1:a[0][0].x,x2:a[a.length-1][0].x,y1:a[0][0].y,y2:a[a.length-1][0].y,stroke:"grey",strokeWidth:"1px"})]}):null,c.map((function(e,t){return e.map((function(e,n){return 0===t?Object(v.jsx)("polygon",{points:"".concat(a[t][n].x,",").concat(a[t][n].y,"\n                 ").concat(a[t][n+1].x,",").concat(a[t][n+1].y," \n                 ").concat(a[t+1][n].x,",").concat(a[t+1][n].y),fill:e}):Object(v.jsx)("polygon",{points:"\n                 ".concat(a[t][n].x,",").concat(a[t][n].y,"\n                 ").concat(a[t-1][n+1].x,",").concat(a[t-1][n+1].y,"\n                 ").concat(a[t][n+1].x,",").concat(a[t][n+1].y," \n                 ").concat(a[t+1][n].x,",").concat(a[t+1][n].y,"\n                 "),fill:e})}))}))]})]})};var ht=a(148),jt=a.n(ht),bt=a(469),ft=a(473),dt=a(471),xt=a(472),gt=a(470),pt=a(446),Ot=a(436),At=a(466);var mt,vt,yt=function(e){var t=e.traces,a=e.userPcvs,c=e.wavescapesData,r=Object(n.useState)(!1),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(n.useState)([]),h=Object(o.a)(u,2),j=h[0],b=h[1],x=Object(n.useState)(!1),g=Object(o.a)(x,2),p=g[0],O=g[1],A=Object(n.useState)(!0),m=Object(o.a)(A,2),y=m[0],w=m[1],C=Object(n.useState)(!0),D=Object(o.a)(C,2),k=D[0],P=D[1],S=Object(n.useState)(!0),F=Object(o.a)(S,2),M=F[0],B=F[1],E=Object(n.useState)(!0),I=Object(o.a)(E,2),W=I[0],T=I[1],G=Object(n.useState)(null),z=Object(o.a)(G,2),R=z[0],L=z[1],N=Boolean(R),Q=i?"simple-popover":void 0,H=function(){l(!1)};Object(n.useEffect)((function(){c.length>0?O(!0):O(!1)}),[c]),Object(n.useEffect)((function(){for(var e=[],t=1;t<7;t++){for(var n=[],c=0;c<a.length;c++)n.push({x:a[c].coeffs[t].re,y:a[c].coeffs[t].im,rosePoints:a[c].rosePoints,isDisabled:a[c].isDisabled,label:a[c].label});e.push(n)}b(e)}),[a]);var J=function(){var e=new st.a;[1,2,3,4,5,6].forEach((function(a){var n=function(e){var a=Object(v.jsx)(lt,{traceData:t.length>0&&k?t[e-1]:[],prototypesData:M?Le[e-1]:[],userPcv:W?j[e-1]:[],coeffNumber:e,showNumber:y});return jt.a.renderToStaticMarkup(a)}(a),r=function(e){var t=Object(v.jsx)(ut,{wavescapeMatrix:c.length>0?c[e-1]:[],wsNumber:e,showNumber:y});return jt.a.renderToStaticMarkup(t)}(a);e.file("wavescapes/wavescape".concat(a,".svg"),r),e.file("fourier/space".concat(a,".svg"),n)})),e.generateAsync({type:"blob"}).then((function(e){Object(it.saveAs)(e,"images.zip")})),l(!1)};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(d.a,{variant:"contained",size:"small",color:"primary",sx:{width:"35%",margin:"auto",marginTop:1,marginBottom:1},onClick:function(){l(!0)},children:"Export images"}),Object(v.jsxs)(bt.a,{open:i,onClose:H,children:[Object(v.jsx)(gt.a,{children:"Saving options"}),Object(v.jsx)(dt.a,{children:Object(v.jsxs)(xt.a,{children:[Object(v.jsx)(f.a,{sx:{color:"black"},children:"Check the box in order to include the correspondent element in the exported images:"}),Object(v.jsx)(Ot.a,{sx:{marginLeft:2,marginTop:1},children:Object(v.jsxs)(Qe.a,{sx:{color:"black"},children:[Object(v.jsx)(oe.a,{control:Object(v.jsx)(pt.a,{size:"small",checked:y,onChange:function(){w(!y)}}),label:"Coefficients numbers"}),Object(v.jsx)(oe.a,{control:Object(v.jsx)(pt.a,{size:"small",checked:k,onChange:function(){P(!k)}}),label:"Full trace"}),Object(v.jsx)(oe.a,{control:Object(v.jsx)(pt.a,{size:"small",checked:M,onChange:function(){B(!M)}}),label:"Prototypes"}),Object(v.jsx)(oe.a,{control:Object(v.jsx)(pt.a,{size:"small",checked:W,onChange:function(){T(!W)}}),label:"Custom pitch-class vectors"})]})})]})}),Object(v.jsxs)(ft.a,{children:[Object(v.jsx)(d.a,{onClick:H,children:"Close"}),Object(v.jsx)(d.a,{onClick:function(e){p?J():L(e.currentTarget)},autoFocus:!0,children:"Save"}),Object(v.jsx)(At.a,{id:Q,open:N,anchorEl:R,onClose:function(){L(null)},anchorOrigin:{vertical:"center",horizontal:"left"},children:Object(v.jsx)(f.a,{color:"error",sx:{p:2},children:"Upload a MIDI file"})})]})]})]})},wt=80,Ct=Object(p.a)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(u.a)({flexGrow:1,padding:t.spacing(3),backgroundColor:"#e0e0e0",transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(400,"px")},a&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0,backgroundColor:"#e0e0e0"})})),Dt=Object(p.a)("div")((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"space-between"})}));var kt=function(){var e,t=Object(et.a)(),a=Object(n.useState)(!1),c=Object(o.a)(a,2),r=c[0],s=c[1],u=Object(n.useState)(""),h=Object(o.a)(u,2),b=h[0],x=h[1],p=Object(n.useState)([]),O=Object(o.a)(p,2),y=O[0],C=O[1],D=Object(n.useState)([]),S=Object(o.a)(D,2),M=S[0],B=S[1],E=Object(n.useState)([]),I=Object(o.a)(E,2),W=I[0],T=I[1],z=Object(n.useState)(0),R=Object(o.a)(z,2),L=R[0],Q=R[1],H=Object(n.useState)(1),J=Object(o.a)(H,2),V=J[0],Y=J[1],Z=Object(n.useState)(!1),X=Object(o.a)(Z,2),_=X[0],$=X[1],ee=Object(n.useState)("1"),se=Object(o.a)(ee,2),ie=se[0],le=se[1],oe=Object(n.useState)({noteResolutionValue:1,seconds:1.5,useSeconds:!1}),he=Object(o.a)(oe,2),je=he[0],be=he[1],fe=Object(n.useState)(10),de=Object(o.a)(fe,2),ge=de[0],Oe=de[1],me=Object(n.useState)(1),ve=Object(o.a)(me,2),ye=ve[0],we=ve[1],Ce=Object(n.useState)([]),De=Object(o.a)(Ce,2),ke=De[0],Pe=De[1],Se=Object(n.useRef)(null),Me=Object(n.useState)(!1),Be=Object(o.a)(Me,2),Ie=Be[0],We=Be[1],Te=Object(n.useState)(!1),Ge=Object(o.a)(Te,2),ze=Ge[0],Re=Ge[1],Le=Object(n.useState)([]),Ne=Object(o.a)(Le,2),Qe=Ne[0],He=Ne[1];function Je(e){var t,a=[];try{t=function(e){for(var t=[],a=!1,n=!1,c=0;c<e.length;c++)if("{"!==e[c]&&"("!==e[c]||(a=!0,"{"===e[c]&&(n=!0)),a){for(var r=[],s=c+1;"}"!==e[s]&&")"!==e[s];s++){if(","!==e[s]&&"."!==e[s]&&" "!==e[s]&&isNaN(parseFloat(e[s])))throw new Error("Found NaN");" "!==e[s]&&r.push(e[s])}if(""===(r=r.join("")))throw new Error("Empty input");for(var i=[],l=0,o=0;o<r.length;o++){if(","===r[o]){var u=r.slice(o-l,o);if(0===u.length)throw new Error("Two consecutive comas");i.push(+u),l=-1}l++}var h=r.slice(r.length-l,r.length);if(0===h.length)throw new Error("Missing last number");if(i.push(+h),n){for(var j=[0,0,0,0,0,0,0,0,0,0,0,0],b=0;b<i.length;b++){if(i[b]<0||i[b]>=12)throw new Error("Set notation: out of range");j[i[b]]+=1}t.push(j)}else{if(12!==i.length)throw new Error("Vectorial notation: missing elements");t.push(i)}a=!1,n=!1,c+=l}if(0===t.length)throw new Error("Invalid input");return t}(e)}catch(n){return console.log(n.message),void We(!0)}t.forEach((function(e){return a.push({label:"(".concat(e,")"),isDisabled:!1,coeffs:q(e,!0,!0,!1),rosePoints:[],n:-1,d:-1})})),ke.map((function(e){return e.label})).forEach((function(e){a=a.filter((function(t){return t.label!==e}))})),a.forEach((function(e){for(var t=!1,a=0;a<Qe.length&&!t;a++)for(var n=0;n<Qe[a].length&&!t;n++)Qe[a][n].usable&&!Qe[a][n].used&&(t=!0,e.rosePoints=Qe[a][n].points,Qe[a][n].used=!0,e.n=Qe[a][n].n,e.d=Qe[a][n].d)})),Pe([].concat(Object(l.a)(ke),Object(l.a)(a)))}return Object(n.useEffect)((function(){var e=[];1===V?T(M):(M.forEach((function(t){for(var a=[],n=0;n<=t.length-V;n++){for(var c={x:0,y:0},r=0;r<V;r++)c.x+=t[n+r].x,c.y+=t[n+r].y;a.push(c)}a.forEach((function(e){e.x=e.x/V,e.y=e.y/V})),e.push(a)})),T(e))}),[V,M]),Object(n.useEffect)((function(){var e=document.getElementById("file").files[0];if(e){var t=new FileReader;t.readAsArrayBuffer(e),t.onload=function(t){try{var a=function(e){var t=new K.Midi(e),a=t.header.tempos.map((function(e){return Math.round(e.bpm)})),n=Math.max.apply(Math,Object(l.a)(a)),c=t.tracks.filter((function(e){return!1===e.instrument.percussion}));return t.tracks=c,{midiData:t,midiBpm:n}}(t.target.result),n=a.midiData,c=a.midiBpm;wt=c,mt=n,vt=e.name;var r=mt.duration/50;Oe(r),C(function(e){for(var t=e[0].length,a=e[0].length,n=2,c=1;c<t;c++){for(var r=[],s=0;s+n<=a;s++){var i=e[0].slice(s,s+n);r.push(U(i))}n++,e.push(r)}for(var l=[],o=0;o<6;o++){for(var u=[],h=0;h<e.length;h++){for(var j=[],b=0;b<e[h].length;b++)j.push("");u.push(j)}l.push(u)}for(var f=0;f<e.length;f++)for(var d=0;d<e[f].length;d++)for(var x=1;x<e[f][d].length;x++)l[x-1][f][d]=te(e[f][d][x]);return l}(function(e,t){var a=[];e.tracks.forEach((function(n){return a.push(ce(n.notes,t,e.duration))}));for(var n=[],c=0;c<a[0].length;c++)n.push(new ae);for(var r=0;r<a.length;r++)for(var s=0;s<a[r].length;s++)for(var i=0;i<a[r][s].length;i++){var l=a[r][s][i],o=l.pitch,u=l.duration;n[s].addNoteDuration(o,u)}var h=n.map((function(e){return q(e.getPcvAsArray())})),j=[];return j.push(h),j}(mt,r)));var s=ne(n,je,wt),i=s.tracesData,o=s.resolution;we(o),B(i),N(mt,o,Q),Y(1),le("1"),console.log(n)}catch(u){return void console.log(u)}}}}),[b]),Object(n.useEffect)((function(){for(var e=[],t=1;t<=7;t++){for(var a=[],n=1;n<=7;n++){var c={n:n,d:t,used:!1,usable:!0,points:[]};n%t===0&&1!==t&&(c.usable=!1),!0===c.usable&&(c.points=re(n,t)),a.push(c)}e.push(a)}e[0][0].usable=!1,He(e);var r=[[1,0,0,0,1,0,0,1,0,0,0,0],[1,0,0,1,0,0,0,1,0,0,0,0],[1,0,0,1,0,0,1,0,0,0,0,0]].map((function(e){return{label:"(".concat(e.toString(),")"),isDisabled:!1,coeffs:q(e,!0,!0,!1),rosePoints:[],n:-1,d:-1}}));r.forEach((function(t){for(var a=!1,n=0;n<e.length&&!a;n++)for(var c=0;c<e[n].length&&!a;c++)e[n][c].usable&&!e[n][c].used&&(a=!0,t.rosePoints=e[n][c].points,e[n][c].used=!0,t.n=e[n][c].n,t.d=e[n][c].d)})),r[1].isDisabled=!0,r[2].isDisabled=!0,Pe(r)}),[]),Object(v.jsxs)(g.a,{children:[Object(v.jsx)(P.a,{}),Object(v.jsx)(w,{open:r,setOpen:s,setInAnalysisPage:Re,inAnalysisPage:ze}),Object(v.jsxs)(j.a,{sx:{display:"flex"},children:[Object(v.jsxs)(tt.a,{sx:{width:400,flexShrink:0,"& .MuiDrawer-paper":{width:400,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:r,children:[Object(v.jsxs)(Dt,{children:[Object(v.jsxs)(F.a,{sx:{flexGrow:"2",maxWidth:"85%",marginBottom:1},children:[Object(v.jsx)(f.a,{sx:{fontWeight:"bold"},children:"Upload a midi file"}),Object(v.jsxs)(F.a,{spacing:2,direction:"row",sx:{alignItems:"center"},children:[Object(v.jsxs)("label",{htmlFor:"file",children:[Object(v.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"file",value:b,onChange:function(e){return x(e.target.value)}}),Object(v.jsx)(d.a,{variant:"contained",size:"small",color:"primary",component:"span",children:"Upload"})]}),Object(v.jsx)(f.a,{noWrap:!0,color:vt?"primary":"error",children:y.length>0?vt:"No midi file uploaded"})]})]}),Object(v.jsx)(m.a,{onClick:function(){s(!1)},children:"ltr"===t.direction?Object(v.jsx)(nt.a,{}):Object(v.jsx)(A.a,{})})]}),Object(v.jsx)(ct.a,{}),Object(v.jsx)(f.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Time resolution"}),Object(v.jsx)(j.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5% 0 2%",width:"90%",justifyContent:"space-evenly"},children:Object(v.jsx)(xe,{setResolutionMode:be,resolutionMode:je,retriggerAnalysis:function(){if(null!=mt){var e=ne(mt,je,wt),t=e.tracesData,a=e.resolution;we(a),B(t),Y(1),le("1"),N(mt,a,Q)}}})}),Object(v.jsx)(ct.a,{}),Object(v.jsx)(f.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Window Length"}),Object(v.jsxs)(F.a,{sx:{margin:"auto",marginBottom:1,marginTop:1},direction:"row",children:[Object(v.jsx)(f.a,{sx:{marginLeft:1,paddingTop:"5px",marginRight:"5px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"\xd7 "}),Object(v.jsx)(ue.a,{inputProps:{style:{textAlign:"center"}},sx:{width:"15%"},error:_,onChange:function(e){le(e.target.value);var t=parseInt(e.target.value);isNaN(t)?$(!0):($(!1),M.length>0?t<1?($(!0),Y(1)):t>M[0].length?($(!0),Y(M[0].length)):Y(t):Y(t))},value:ie,variant:"standard"}),Object(v.jsx)(f.a,{sx:{marginLeft:1,paddingTop:"5px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"time resolution"})]}),Object(v.jsx)(G.a,{sx:{margin:"auto",width:"80%",marginBottom:3,marginTop:1,heigth:"10%"},value:V,onChange:function(e,t){Y(t),le(t)},"aria-label":"Window Length",defaultValue:1,valueLabelDisplay:"auto",min:1,max:M.length>0?M[0].length:100,marks:M.length>0?[{value:1,label:"1"},{value:M[0].length,label:"".concat(M[0].length)}]:[{value:1,label:"1"},{value:100,label:"100"}]}),Object(v.jsx)(ct.a,{}),Object(v.jsx)(f.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Custom pitch-class vectors"}),Object(v.jsxs)(j.a,{sx:{flexDirection:"column",display:"flex",alignItems:"center",margin:"3% 5%",height:"40%",maxHeight:"350px",justifyContent:"flex-start"},component:"form",noValidate:!0,autoComplete:"off",children:[Object(v.jsx)(ue.a,(e={fullWidth:!0,label:'margin="dense"',error:Ie,helperText:Ie&&"Invalid input",id:"outlined-basic"},Object(i.a)(e,"label","e.g. {0,0,4,7,10} (2,0,0,0,1,0,0,1,0,0,1,0)"),Object(i.a)(e,"variant","outlined"),Object(i.a)(e,"onKeyPress",(function(e){"Enter"===e.key&&(e.preventDefault(),Je(Se.current.value),Se.current.value="")})),Object(i.a)(e,"onChange",(function(){We(!1)})),Object(i.a)(e,"inputRef",Se),e)),Object(v.jsx)(Ae,{userPcvs:ke,setUserPcvs:Pe,rosesMat:Qe})]}),Object(v.jsx)(ct.a,{}),Object(v.jsx)(f.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Legend of coefficients"}),Object(v.jsx)(j.a,{sx:{margin:"5px 10px"},children:Object(v.jsx)(pe.a,{children:Object(v.jsxs)(F.a,{children:[Object(v.jsxs)(F.a,{direction:"row",children:[Object(v.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(v.jsx)("circle",{cx:"12",cy:"12",r:"8",fill:"black"}),Object(v.jsx)("text",{fontSize:"15",textAnchor:"middle",x:"12",y:"17",fill:"white",children:"k"})]}),"Fourier coefficient number"]}),Object(v.jsxs)(F.a,{direction:"row",children:[Object(v.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(v.jsx)("circle",{cx:"12",cy:"12",r:"6",fill:"black"})}),"MIDI file segments"]}),Object(v.jsxs)(F.a,{direction:"row",children:[Object(v.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(v.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"white"}),Object(v.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"none",stroke:"black",strokeWidth:"3px"})]}),"MIDI playback"]}),Object(v.jsxs)(F.a,{direction:"row",children:[Object(v.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(v.jsxs)("g",{transform:"translate(12,12)",children:[Object(v.jsx)("line",{x1:"0",x2:"0",y1:"7",y2:"-7",stroke:"black",strokeWidth:"1.5"}),Object(v.jsx)("line",{x1:"7",x2:"-7",y1:"0",y2:"0",stroke:"black",strokeWidth:"1.5"})]})}),"MIDI controller input"]}),Object(v.jsxs)(F.a,{direction:"row",children:[Object(v.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(v.jsx)("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"grey",strokeWidth:"2px"})}),"Prototypes"]}),Object(v.jsxs)(F.a,{direction:"row",children:[Object(v.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Qe.length>0?Object(v.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:Qe[3][0].points}):null}),"Custom pitch-class vectors"]})]})})}),Object(v.jsx)(yt,{traces:W,userPcvs:ke,wavescapesData:y})]}),Object(v.jsx)(Ct,{open:r,children:Object(v.jsxs)(k.c,{children:[Object(v.jsx)(k.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(Fe,{setOpen:s,setInAnalysisPage:Re})}}),Object(v.jsx)(k.a,{exact:!0,path:"/theory",render:function(){return Object(v.jsx)(Ee,{setOpen:s,setInAnalysisPage:Re})}}),Object(v.jsx)(k.a,{exact:!0,path:"/analysis",render:function(){return Object(v.jsx)($e,{fileName:vt,setInAnalysisPage:Re,open:r,setOpen:s,wavescapesData:y,fullTraces:M,coeffTracesData:W,currentSubdiv:W.length>0&&Math.floor(V/2)+L>=W[0].length?W[0].length-1:Math.floor(V/2)+L,currentWavescapeSubdiv:Math.floor(L*ye/ge),userPcvs:ke})}})]})})]})]})},Pt=a(149),St=a(451),Ft=Object(Pt.a)({palette:{primary:{main:"#323232"},secondary:{main:"#fefefe"},background:{default:"#e0e0e0"}}});s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(St.a,{theme:Ft,children:Object(v.jsx)(kt,{})})}),document.getElementById("root"))}},[[370,1,2]]]);
//# sourceMappingURL=main.25088f1f.chunk.js.map