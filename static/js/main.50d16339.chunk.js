(this.webpackJsonpmidft=this.webpackJsonpmidft||[]).push([[0],{341:function(e,t){},359:function(e,t,a){"use strict";a.r(t);var i=a(1),n=a.n(i),s=a(65),r=a.n(s),c=a(7),o=a(17),l=a(11),u=a(9),d=a(435),b=a(437),h=a(441),m=a(439),f=a(440),p=a(442),j=a(88),x=a(10),g=a(113),v=a.n(g),O=a(438),y=a(0),w=Object(x.a)(d.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));function q(e){var t=e.open,a=e.setOpen,i=e.inAnalysisPage;return Object(y.jsx)(b.a,{sx:{flexGrow:1},children:Object(y.jsx)(w,{position:"static",open:t,children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)(O.a,{disabled:!i,color:"inherit","aria-label":"open drawer",onClick:function(){a(!0)},edge:"start",sx:Object(u.a)({mr:2},t&&{display:"none"}),children:Object(y.jsx)(v.a,{})}),Object(y.jsx)(m.a,{variant:"h3",component:"div",sx:{flexGrow:1},children:"Mi_DFT"}),Object(y.jsxs)(p.a,{"aria-label":"outlined button group",children:[Object(y.jsx)(f.a,{component:j.b,to:"/",variant:"contained",disableElevation:!0,children:"Home"}),Object(y.jsx)(f.a,{component:j.b,to:"/theory",variant:"contained",disableElevation:!0,children:"Theory"}),Object(y.jsx)(f.a,{component:j.b,to:"/analysis",variant:"contained",disableElevation:!0,children:"Analysis"})]})]})})})}var C=a(26),k=a(168),A=a.n(k),D=a(418),S=a(169),E=a.n(S),P=a(35),F=a(420),M=P.c().domain([0,1]).range(P.b(0,255,1)),W=function(e){var t,a,i;return e>=0&&e<F.f/3?(t=1,a=3*e/F.f,i=0):e>=F.f/3&&e<2*F.f/3?(t=2-3*e/F.f,a=1,i=0):e>=2*F.f/3&&e<F.f?(t=0,a=1,i=3*e/F.f-2):e>=F.f&&e<4*F.f/3?(t=0,a=4-3*e/F.f,i=1):e>=4*F.f/3&&e<5*F.f/3?(t=3*e/F.f-4,a=0,i=1):e>=5*F.f/3&&e<2*F.f&&(t=1,a=0,i=6-3*e/F.f),t=M(t),a=M(a),i=M(i),"rgb(".concat(t,", ").concat(a,", ").concat(i,")")},I=function(e,t,a){var i,n,s,r=Math.atan2(t,e);return(r=-r)<0&&(r+=2*Math.PI),r>=0&&r<F.f/3?(i=1,n=3*r/F.f,s=0):r>=F.f/3&&r<2*F.f/3?(i=2-3*r/F.f,n=1,s=0):r>=2*F.f/3&&r<F.f?(i=0,n=1,s=3*r/F.f-2):r>=F.f&&r<4*F.f/3?(i=0,n=4-3*r/F.f,s=1):r>=4*F.f/3&&r<5*F.f/3?(i=3*r/F.f-4,n=0,s=1):r>=5*F.f/3&&r<2*F.f&&(i=1,n=0,s=6-3*r/F.f),{r:i=M(i),g:n=M(n),b:s=M(s),a:M(a)}};function R(e){var t=e.toPolar(),a=t.phi,i=t.r;a<0&&(a+=2*F.f);var n=W(a).slice(3,-1);return"rgba".concat(n,", ").concat(i,")")}var T,z,N=function(e){var t=e.printablePitchClasses,a=e.traceData,i=e.userPcv,n=e.currentSubdiv,s=e.coeffNumber,r=300,c=270,o=[];if(a.length>0)for(var l=a[0],u=1;u<l[0].length;u++){for(var d=[],b=0;b<l.length;b++){var h=Math.round(1e4*l[b][u].re)/1e4,m=Math.round(1e4*l[b][u].im)/1e4;d.push({re:h,im:m})}o.push(d)}console.log(n);var f=2*F.f/100,p=P.b(0,2*F.f,f),j=P.b(0,1,.01),x=function(e,t,a){var i=P.a().innerRadius(t*r/2).outerRadius((t+.01)*r/2).startAngle(0).endAngle(2*F.f);return Object(y.jsx)("path",{transform:"translate(".concat(e.x*c/2,",").concat(-e.y*c/2,")"),fill:a,d:i()},e.id)};return Object(y.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:300,children:[Object(y.jsx)("g",{transform:"translate(".concat(150,",").concat(150,")"),children:j.map((function(e){return p.map((function(t,a){return function(e,t,a,i){var n=-F.f/2,s=P.a().innerRadius(i*c/2).outerRadius((i+.01)*c/2).startAngle(-(e+n)).endAngle(-(e+f+n));return Object(y.jsx)("path",{fill:W(e),fillOpacity:i,stroke:W(e),strokeOpacity:i/10,d:s()},"".concat(a,".").concat(t))}(t,a,s,e)}))}))}),Object(y.jsx)("g",{transform:"translate(".concat(150,",").concat(150,")"),children:t.map((function(e){return e.coeff.includes(s+1)?x(e,.05,"grey"):null}))}),Object(y.jsx)("g",{transform:"translate(".concat(150,",").concat(150,")"),children:i.map((function(e,t){return e.map((function(e,a){return a>0&&s+1===a?x({x:e.re,y:e.im,id:"userpcv".concat(s,".").concat(t,".").concat(a)},.03,"navy"):null}))}))}),Object(y.jsx)("g",{transform:"translate(".concat(150,",").concat(150,")"),children:o.length>1?o[s].map((function(e,t){return function(e,t,a){var i=P.a().innerRadius(0).outerRadius(3).startAngle(0).endAngle(2*F.f);return Object(y.jsx)("path",{transform:"translate(".concat(e.re*c/2,",").concat(-e.im*c/2,")"),fill:"black",d:i()},"trace".concat(t,".").concat(a))}(e,s,t)})):null}),Object(y.jsx)("g",{transform:"translate(".concat(150,",").concat(150,")"),children:o.length>1?function(e){return Object(y.jsx)("path",{transform:"translate(".concat(o[e][n].re*c/2,",").concat(-o[e][n].im*c/2,")"),fill:"white",d:P.a().innerRadius(4.5).outerRadius(9).startAngle(0).endAngle(2*F.f)()},"currentSubdiv".concat(n))}(s):null})]},"circle".concat(s))},B=a(170),G=a(33),L=a(413),V=a(175),_=a.n(V),H=a(174),U=a.n(H),Q=a(173),J=a.n(Q),K=a(426),X=0,Y=Object(x.a)(m.a)({fontSize:"0.75rem",opacity:.38,fontWeight:500,letterSpacing:.2});function Z(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return"".concat(t,":").concat(a<9?"0".concat(a):a)}function $(e,t,a){G.d.cancel(0),a(0),G.d.stop(),X=e.duration;var i=[];e.tracks.forEach((function(e){return e.notes.forEach((function(e){i.push(e)}))})),i.forEach((function(e){e.subdiv=Math.floor(e.time/t)})),(T=new G.b((function(e,t){ee.triggerAttackRelease(t.name,t.duration,e,t.velocity),a(t.subdiv)}),[].concat(i)).start(0)).loop=!0,T.loopEnd=X}var ee=new G.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function te(e){var t=e.fileName,a=(e.currentWavescapeSubdiv,Object(i.useState)(0)),n=Object(l.a)(a,2),s=n[0],r=n[1];return Object(y.jsxs)(b.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"60%"},children:[Object(y.jsxs)(b.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[Object(y.jsxs)(L.a,{direction:"row",sx:{flexGrow:1,paddingLeft:"10%"},children:[Object(y.jsx)(O.a,{sx:{padding:"0"},onClick:function(){console.log("stop"),G.d.stop(),ae()},size:"large",children:Object(y.jsx)(J.a,{fontSize:"large"})}),Object(y.jsx)(O.a,{sx:{padding:"0"},onClick:function(){console.log("pause"),G.d.pause(),ae()},size:"large",children:Object(y.jsx)(U.a,{fontSize:"large"})}),Object(y.jsx)(O.a,{sx:{padding:"0"},onClick:function(){console.log("play"),"running"!==G.e.state&&(console.log("state running"),G.e.resume()),G.d.start(),!z&&T&&(z=setInterval((function(){return r(T.progress)}),1e3))},size:"large",children:Object(y.jsx)(_.a,{fontSize:"large"})})]}),Object(y.jsx)(m.a,{color:t?"primary":"error",noWrap:!0,sx:{flexGrow:"2",paddingRight:"10%"},children:t||"No midi file uploaded"})]}),Object(y.jsx)(K.a,{"aria-label":"Playback",size:"small",value:s?100*s:0,onChange:function(e,t){r(t/100),G.d.seconds=t/100*X},sx:{width:"90%"}}),Object(y.jsxs)(b.a,{sx:{display:"flex",width:"90%",alignItems:"center",justifyContent:"space-between",mt:-1},children:[Object(y.jsxs)(Y,{children:["-",Z(X-s*X)]}),Object(y.jsx)(Y,{children:Z(X)})]})]})}function ae(){clearInterval(z),z=null}ee.volume.value=-20;var ie=a(2),ne=a(3),se=a(119);function re(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=e.length,s=[],r=0;r<n/2+1;r++){for(var c=0,o=0;o<n;o++)c=F.a(F.e(e[o],F.c(F.e(F.d,-2*F.f*r*o/n))),c);s.push(c)}if(s=s.slice(),t){var l=s[0];0!=l&&(s=s.map((function(e){return F.b(e,l)})))}return a&&s.forEach((function(e){e.re=Math.round(1e4*e.re)/1e4,e.im=Math.round(1e4*e.im)/1e4})),i&&(s=s.map((function(e){return e.toPolar()}))),s}function ce(e){for(var t=e[0],a=1;a<e.length;a++){for(var i=[],n=0;n<e[a].length;n++)i.push(F.a(t[n],e[a][n]));t=i.slice()}var s=t[0];return t=t.map((function(e){return F.b(e,s)}))}var oe=function(){function e(){Object(ie.a)(this,e),this.C=0,this.Cs=0,this.D=0,this.Ds=0,this.E=0,this.F=0,this.Fs=0,this.G=0,this.Gs=0,this.A=0,this.As=0,this.B=0}return Object(ne.a)(e,[{key:"addNoteDuration",value:function(e,t){switch(e){case"C":this.C+=t;break;case"C#":this.Cs+=t;break;case"D":this.D+=t;break;case"D#":this.Ds+=t;break;case"E":this.E+=t;break;case"F":this.F+=t;break;case"F#":this.Fs+=t;break;case"G":this.G+=t;break;case"G#":this.Gs+=t;break;case"A":this.A+=t;break;case"A#":this.As+=t;break;case"B":this.B+=t}}},{key:"getPcvAsArray",value:function(){return[this.C,this.Cs,this.D,this.Ds,this.E,this.F,this.Fs,this.G,this.Gs,this.A,this.As,this.B]}},{key:"add",value:function(e){this.C=e.C,this.Cs=e.Cs,this.D=e.D,this.Ds=e.Ds,this.E=e.E,this.F=e.F,this.Fs=e.Fs,this.G=e.G,this.Gs=e.Gs,this.A=e.A,this.As=e.As,this.B=e.B}}]),e}();function le(e,t,a){var i,n=t.noteResolutionValue,s=t.seconds,r=t.useSeconds;i=r?isNaN(s)?1:s:n*(60/a);var c=e.duration,o=[];e.tracks.filter((function(e){return!1===e.instrument.percussion})).forEach((function(e){o.push(ue(e.notes,i,c))}));for(var l=[],u=0;u<o[0].length;u++)l.push(new oe);for(var d=0;d<o.length;d++)for(var b=0;b<o[d].length;b++)for(var h=0;h<o[d][b].length;h++){var m=o[d][b][h],f=m.pitch,p=m.duration;l[b].addNoteDuration(f,p)}var j=l.map((function(e){return re(e.getPcvAsArray())})),x=[];x.push(j);for(var g=[],v=x[0],O=1;O<7;O++){for(var y=[],w=0;w<v.length;w++)y.push({x:v[w][O].re,y:v[w][O].im});g.push(y)}return{tracesData:g,resolution:i}}function ue(e,t,a){for(var i=[],n=t,s=function(t){var a=[];e.forEach((function(e){var i=e.time,s=e.duration;if(function(e,t,a,i){if(e>a&&e<a+i||e+t>a&&e+t<a+i||e<=a&&e+t>=a+i)return!0;return!1}(i,s,t,n)){var r={pitch:e.pitch};r.duration=i<t?i+s<t+n?i+s-t:n:i+s<=t+n?s:t+n-i,a.push(r)}})),i.push(a)},r=0;r<a;r+=t)s(r);return i}function de(e,t){for(var a=[],i=0;i<2*Math.PI*t;i+=.01){var n=10*Math.cos(e/t*i),s=n*Math.cos(i),r=n*Math.sin(i);a.push([s,r])}return a}var be=a(425),he=a(414),me=a(443),fe=a(444),pe=a(428),je=a.p+"static/media/whole.69e31bd8.svg",xe=a.p+"static/media/half.7d756528.svg",ge=a.p+"static/media/quarter.a35808dc.svg",ve=a.p+"static/media/eighth.347a1769.svg",Oe=a.p+"static/media/sixteenth.91907e68.svg";var ye=function(e){var t=e.resolutionMode,a=e.setResolutionMode,n=e.retriggerAnalysis,s=Object(i.useState)(!1),r=Object(l.a)(s,2),c=r[0],o=r[1],d=Object(i.useRef)(null);return Object(y.jsx)(b.a,{children:Object(y.jsx)(me.a,{component:"fieldset",children:Object(y.jsxs)(he.a,{row:!0,defaultValue:"quarter",onChange:function(e){var i=Object(u.a)({},t);switch(i.seconds=parseFloat(d.current.value),e.target.value){case"sixteenth":i.noteResolutionValue=.25,i.useSeconds=!1;break;case"eighth":i.noteResolutionValue=.5,i.useSeconds=!1;break;case"quarter":i.noteResolutionValue=1,i.useSeconds=!1;break;case"half":i.noteResolutionValue=2,i.useSeconds=!1;break;case"whole":i.noteResolutionValue=4,i.useSeconds=!1;break;case"seconds":i.useSeconds=!0}a(i)},"aria-label":"resolution",name:"row-radio-buttons-group",sx:{display:"flex",justifyContent:"space-between"},children:[Object(y.jsx)(fe.a,{value:"sixteenth",control:Object(y.jsx)(be.a,{size:"small"}),label:Object(y.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3)"},src:Oe})}),Object(y.jsx)(fe.a,{value:"eighth",control:Object(y.jsx)(be.a,{size:"small"}),label:Object(y.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3) translate(0, 0)"},src:ve})}),Object(y.jsx)(fe.a,{value:"quarter",control:Object(y.jsx)(be.a,{size:"small"}),label:Object(y.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(1, 3)"},src:ge})}),Object(y.jsx)(fe.a,{value:"half",control:Object(y.jsx)(be.a,{size:"small"}),label:Object(y.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(3.7, 3.2) "},src:xe})}),Object(y.jsx)(fe.a,{value:"whole",control:Object(y.jsx)(be.a,{size:"small"}),label:Object(y.jsx)("img",{style:{width:10,height:10,marginTop:0,transform:"scale(1.5, 1)"},src:je})}),Object(y.jsx)(fe.a,{value:"seconds",control:Object(y.jsx)(be.a,{size:"small"}),label:Object(y.jsx)(pe.a,{sx:{minHeight:"4.4rem",maxWidth:"5rem"},error:c,helperText:c&&"Invalid input",label:"in seconds",id:"standard-size-small",defaultValue:"1.5",size:"small",variant:"standard",onChange:function(){var e=Object(u.a)({},t);e.seconds=parseFloat(d.current.value),isNaN(e.seconds)?o(!0):(a(e),o(!1))},inputRef:d})}),Object(y.jsx)(f.a,{variant:"contained",color:"primary",onClick:n,sx:{width:"10%",height:"20%",marginTop:2},children:"Change"})]})})})},we=a(433),qe=a(436),Ce=Object(x.a)("li")((function(e){return{margin:e.theme.spacing(.5)}}));function ke(e){var t=e.userPcvs,a=e.setUserPcvs,i=e.rosesMat;return Object(y.jsx)(qe.a,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",p:"3px",overflow:"auto",height:"100%",width:"100%"},component:"ul",children:t.map((function(e,n){return Object(y.jsx)(Ce,{children:Object(y.jsx)(we.a,{variant:e.isDisabled?"outlined":"filled",icon:Object(y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(y.jsx)("g",{children:Object(y.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:e.rosePoints})})}),label:e.label,onDelete:(s=e,function(){i[s.d-1][s.n-1].used=!1,a((function(e){return e.filter((function(e){return e.label!==s.label}))}))}),onClick:function(){e.isDisabled=!e.isDisabled,a(Object(o.a)(t))}})},"".concat(n));var s}))})}function Ae(e){var t=e.setOpen,a=e.setInAnalysisPage;return Object(i.useEffect)((function(){a(!1),t(!1)}),[]),Object(y.jsxs)(qe.a,{sx:{margin:"auto",maxWidth:"1200px"},children:[Object(y.jsx)(m.a,{sx:{padding:3,paddingBottom:0},variant:"h3",children:"Home - Theory and analysis"}),Object(y.jsx)(m.a,{sx:{padding:2},children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae, architecto temporibus laboriosam, atque veniam quod provident minus eos aspernatur ipsa ad nihil veritatis ea, eaque amet! Itaque cupiditate laudantium neque voluptas necessitatibus quidem perspiciatis molestias dolores possimus. Veritatis perferendis, quidem molestiae ipsa reprehenderit aperiam harum iste obcaecati doloribus, recusandae adipisci et saepe non qui illum ratione nemo amet voluptates dolore exercitationem provident. Ea sed incidunt cum eum excepturi vitae consequuntur eius quam earum? Repudiandae explicabo incidunt molestiae animi. Quibusdam veniam rerum minima error, quos voluptas incidunt. Est ex nesciunt ea id, dolor harum nemo quo quibusdam molestias dicta quae modi inventore. Sit dicta iure voluptatum modi. Recusandae harum blanditiis in dolore quasi officiis minus quos veritatis eveniet corporis eaque odio esse deserunt dolorum quod qui tempore, asperiores repellat numquam dolorem nobis! Provident soluta officiis temporibus optio, sapiente aspernatur accusantium ipsam velit necessitatibus natus placeat obcaecati consectetur quia. Reiciendis ipsum tempora non, dicta quod nesciunt. Magni, harum laudantium inventore omnis fugiat quia explicabo temporibus itaque officiis minus autem cumque! Necessitatibus dolorum aliquid omnis, sed ullam voluptatem reiciendis voluptate. Ad minima voluptatem praesentium totam eum consequuntur reiciendis quae soluta ipsam cupiditate? Officia labore modi illum libero error ad fugit sit nostrum, totam esse magnam doloremque repellendus. Similique, iure sed voluptatem quia molestiae aut incidunt facilis sequi! Veniam cupiditate optio magnam officiis cumque beatae laudantium, quas natus at aliquid nostrum, voluptatem aliquam quia doloremque, fugit fuga facere esse. Nostrum numquam nam, praesentium iusto accusamus quasi delectus rem vero laborum, optio blanditiis commodi id quidem beatae in. Laudantium fugit aspernatur impedit quam maiores officiis! Odit, est quae obcaecati repudiandae modi aliquid corporis natus dolores harum porro perferendis magni nam. Aperiam provident accusamus soluta optio eaque incidunt, quos modi nulla eligendi quo unde ipsa. Maxime distinctio minus beatae consequuntur assumenda ab vitae pariatur. Commodi maiores eius esse totam accusantium molestiae accusamus quas fugiat placeat quaerat voluptate corrupti architecto sapiente reiciendis obcaecati molestias, at tempore quisquam! Quam ratione aliquid quo illo delectus eaque quae reiciendis dicta corporis obcaecati, nesciunt veritatis molestiae impedit ut mollitia nam quisquam in aut quia nemo. Ducimus nulla assumenda numquam debitis recusandae dicta quam amet dolores, reprehenderit reiciendis ipsum sapiente sit alias obcaecati praesentium consequatur ipsa natus iste distinctio officia vel fugiat dolore delectus. Molestiae vero omnis blanditiis perspiciatis quibusdam, ipsam quo fugiat sunt pariatur minima aperiam ratione, unde distinctio porro incidunt praesentium repellendus aliquam autem dolores natus. Ab corporis earum veniam corrupti neque aperiam! Perferendis, eligendi, praesentium totam quia excepturi exercitationem dolores debitis cumque optio consectetur et suscipit cupiditate fuga nam commodi minima molestiae odit consequatur id enim aut quisquam eum. Modi dolores fuga neque praesentium repellendus, aspernatur ea quod? Corporis quaerat, nobis culpa quod nesciunt eum distinctio itaque cumque molestias impedit, deleniti delectus. Eum repellat architecto velit delectus eius praesentium, temporibus a nobis ad unde quaerat minus illum eos culpa earum possimus? Doloribus nostrum, impedit aut, officia amet at fuga velit minima tempora, harum molestiae non nisi quia maxime? Odio quo reiciendis nostrum repudiandae, alias delectus aut ullam quisquam. Eius?"})]})}var De=a(427),Se=a(445),Ee=a(446),Pe=a(73),Fe=a.n(Pe);function Me(e){var t=e.setOpen,a=e.setInAnalysisPage;return Object(i.useEffect)((function(){a(!1),t(!1)}),[]),Object(y.jsxs)(qe.a,{sx:{margin:"auto",maxWidth:"1200px"},children:[Object(y.jsx)(m.a,{variant:"h3",sx:{padding:3,paddingBottom:0},children:"Theory page"}),Object(y.jsxs)(De.a,{defaultExpanded:!0,disableGutters:!0,children:[Object(y.jsx)(Se.a,{expandIcon:Object(y.jsx)(Fe.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(y.jsx)(m.a,{variant:"h6",children:"Concept 1"})}),Object(y.jsx)(Ee.a,{children:Object(y.jsx)(m.a,{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Iure, officiis incidunt! Error, vitae. Facilis aperiam tenetur molestiae animi velit nihil, laboriosam iste consequuntur ab. Ipsa, pariatur quo hic ratione adipisci amet quibusdam eius quisquam. Laboriosam odio voluptatum odit eius quo. Aperiam, nostrum perferendis? Iusto sit labore eveniet, provident sequi consectetur quis explicabo mollitia temporibus tempora asperiores. Animi nostrum dicta sapiente dolorem nulla distinctio reiciendis? Saepe voluptates ea debitis asperiores nam illo similique quidem! Delectus aut aperiam consequuntur eveniet excepturi sapiente numquam similique dignissimos, sit dolor id fuga vel illum optio eligendi cumque, blanditiis illo debitis placeat dolorum commodi incidunt molestias!"})})]}),Object(y.jsxs)(De.a,{defaultExpanded:!0,disableGutters:!0,children:[Object(y.jsx)(Se.a,{expandIcon:Object(y.jsx)(Fe.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(y.jsx)(m.a,{variant:"h6",children:"Concept 2"})}),Object(y.jsx)(Ee.a,{children:Object(y.jsx)(m.a,{children:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Illo inventore ab soluta molestias ad tempora libero, fuga cupiditate totam magni nisi voluptatibus, corporis omnis! Aut explicabo, error quasi enim perspiciatis facilis quibusdam magnam, provident eos cumque consectetur necessitatibus ipsam ipsum! Nobis, exercitationem sit? Nulla explicabo assumenda suscipit sequi repudiandae cupiditate quos libero ab excepturi sapiente accusamus voluptatum minima rerum, consequuntur quasi commodi dolorem eveniet cumque exercitationem! Numquam maxime porro magnam ipsam? Ex molestiae autem rem dicta iusto harum. Nam hic rem odio sed esse! Accusamus minus, laudantium omnis aliquam est nobis ipsa tenetur nihil quia rem voluptatum nesciunt doloribus, odit quasi nostrum. Maxime architecto quo exercitationem quis repellat corrupti doloribus odit dolorum itaque nisi ut quisquam natus, accusamus fugit voluptate harum at sed repellendus eveniet iusto enim expedita totam dicta? Ratione, quaerat! Vero porro velit nobis fuga? Quia, omnis ad. At odio incidunt obcaecati, corporis, dolore neque alias, omnis facere ad laborum vel animi culpa. Veniam tempore, veritatis quis neque rem illo consequuntur aliquam ad obcaecati ipsam vitae tenetur itaque temporibus dolor nisi cumque fugit? Suscipit porro totam, nemo illo unde tempora eius, blanditiis repudiandae laboriosam adipisci quasi! Consequatur, accusamus laborum officiis rerum placeat magni deserunt ut impedit! Facere, illum!"})})]}),Object(y.jsxs)(De.a,{defaultExpanded:!0,disableGutters:!0,children:[Object(y.jsx)(Se.a,{expandIcon:Object(y.jsx)(Fe.a,{}),"aria-controls":"panel3a-content",id:"panel3a-header",children:Object(y.jsx)(m.a,{variant:"h6",children:"Concept 3"})}),Object(y.jsx)(Ee.a,{children:Object(y.jsx)(m.a,{children:"\\Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque alias ullam in sed id iusto molestias vitae natus iure quae repudiandae numquam voluptates necessitatibus, veniam perferendis error sit ipsum dolor, nihil laboriosam voluptatum impedit tempora? Quibusdam expedita pariatur molestias nemo, eaque, fugit nihil culpa fugiat, ullam vero natus. Deleniti fuga unde dolorem asperiores ipsam laudantium harum rem fugiat quas fugit."})})]})]})}var We=Math.sin(Math.PI/3),Ie=function(e){var t,a=e.wsNumber,n=e.wavescapeMatrix,s=e.currentWavescapeSubdiv,r=e.wavescapeWidth,c=Object(i.useRef)(null),o=Object(i.useState)([]),u=Object(l.a)(o,2),d=u[0],b=u[1],h=r-10,m=r;return Object(i.useEffect)((function(){h=r,m=r}),[r]),Object(i.useEffect)((function(){var e,a=c.current,i=a.getContext("2d"),s=[10,10],r=[a.width-s[0],a.height-s[1]];n&&(e=n[0].length,i.clearRect(0,0,i.canvas.width,i.canvas.height),t=function(e,t,a,i,n){for(var s=e/a,r=[],c=0;c<a+1;c++){for(var o=[],l=0;l<a+1;l++)c<=l&&o.push({x:(l-c)*s+c*s/2+i,y:c*s+n});r.push(o)}return r}(r[0],0,e,s[0],s[1]),b(t),function(e,t,a){for(var i=0;i<e.length-1;i++)for(var n=0;n<e[i].length-1;n++)0===i?(t.beginPath(),t.moveTo(e[i][n].x,e[i][n].y),t.lineTo(e[i][n+1].x,e[i][n+1].y),t.lineTo(e[i+1][n].x,e[i+1][n].y),t.fillStyle=a[i][n],t.fill()):(t.beginPath(),t.moveTo(e[i][n].x,e[i][n].y),t.lineTo(e[i-1][n+1].x,e[i-1][n+1].y),t.lineTo(e[i][n+1].x,e[i][n+1].y),t.lineTo(e[i+1][n].x,e[i+1][n].y),t.fillStyle=a[i][n],t.fill())}(t,i,n))}),[n,h,m]),Object(y.jsxs)("svg",{id:"wavescape".concat(a),width:h+10,height:m,xmlns:"http://www.w3.org/2000/svg",children:[Object(y.jsxs)("g",{transform:"translate(".concat(.06*h,",").concat(.1*h,")"),children:[Object(y.jsx)("circle",{cx:"5%",cy:"1%",r:"".concat(h/100*2.8,"px"),fill:"black"}),Object(y.jsx)("text",{fontSize:"".concat(h/100*5.2,"px"),textAnchor:"middle",x:"5%",y:"2.8%",fill:"white",children:a})]}),Object(y.jsxs)("g",{transform:"scale(".concat(1,", ",-We,") translate(",0,",").concat(-m,")"),children:[Object(y.jsx)("foreignObject",{x:0,y:0,width:h,height:m,children:Object(y.jsx)("canvas",{width:h,height:m,ref:c})}),d.length>0?d[0].map((function(e,t){return Object(y.jsx)("line",{x1:e.x,x2:e.x,y1:e.y-3,y2:e.y+3,stroke:"grey",strokeWidth:"1px"},"tick".concat(t))})):null,d.length>0?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("line",{x1:d[0][0].x,x2:d[0][d[0].length-1].x,y1:d[0][0].y,y2:d[0][d[0].length-1].y,stroke:"grey",strokeWidth:"2px"}),Object(y.jsx)("line",{x1:d[0][d[0].length-1].x,x2:d[d.length-1][0].x,y1:d[0][d[0].length-1].y,y2:d[d.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(y.jsx)("line",{x1:d[0][0].x,x2:d[d.length-1][0].x,y1:d[0][0].y,y2:d[d.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(y.jsx)("circle",{cx:(d[0][s].x+d[0][s+1].x)/2,cy:(d[0][s].y+d[0][s+1].y)/2,r:.01*h,fill:"white"}),Object(y.jsx)("circle",{cx:(d[0][s].x+d[0][s+1].x)/2,cy:(d[0][s].y+d[0][s+1].y)/2,r:.01*h,stroke:"black",strokeWidth:1,fill:"transparent"})]}):null]})]})};var Re=function(e){var t=e.wavescapesData,a=e.currentWavescapeSubdiv,i=e.elemsWidth;return Object(y.jsx)(b.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:t.length>0?t.map((function(e,t){return Object(y.jsx)(Ie,{wsNumber:t+1,wavescapeMatrix:e,currentWavescapeSubdiv:a,wavescapeWidth:i},"w.".concat(t))})):Object(y.jsx)(m.a,{color:"error",children:"No midi file uploaded"})})},Te=a(421),ze=null;var Ne=function(e){var t,a=e.coeffNumber,n=e.protoDataCoeff,s=e.traceDataCoeff,r=e.userPcvsCoeff,o=e.currentSubdiv,u=e.performanceCoeff,d=e.targetCircleWidth,h=e.showMagAndPhase,f=e.showFullTrace,p=Object(i.useRef)(null),j=Object(i.useState)({mu:0,phi:0}),x=Object(l.a)(j,2),g=x[0],v=x[1],O=445,w=O,q=45,C=177.5,k=.01;function A(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=180*Math.atan2(t,e)/Math.PI,n=Math.sqrt(e*e+t*t);return a&&(n/=C),i=Math.round(i+Number.EPSILON),{mu:n=Math.round(100*(n+Number.EPSILON))/100,phi:i}}function D(){var e=p.current.getContext("2d");e.fillStyle="rgba(0, 0, 0, 0.1)",s.forEach((function(t){e.beginPath(),e.arc(t.x*C,-t.y*C,2.225,0,2*Math.PI,!0),e.fill()}))}return Object(i.useEffect)((function(){if(s){var e=s[o].x,t=s[o].y;v(A(e,t))}}),[o,s]),Object(i.useEffect)((function(){var e=p.current,t=e.getContext("2d"),a=Math.floor(C*devicePixelRatio),i=t.createImageData(2*a,2*a),n=i.data;if(e.width=O*devicePixelRatio,e.height=w*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width="445px",e.style.height="445px",!ze){for(var r=-a;r<a;r++)for(var c=-a;c<a;c++){var o=Math.sqrt(r*r+c*c);if(!(o>a)){var l=4*(r+a+(c+a)*(2*a)),u=I(r,c,o/a);n[l]=u.r,n[l+1]=u.g,n[l+2]=u.b,n[l+3]=u.a}}ze=i}t.putImageData(ze,0,0),s&&f&&(t.save(),t.translate(177.5,177.5),D(),t.restore())}),[O,w,C,s,f]),Object(i.useEffect)((function(){p.current.getContext("2d").getImageData(0,0,1,1)}),[]),Object(i.useEffect)((function(){if(s){var e=p.current.getContext("2d");e.save(),e.translate(177.5,177.5),D(),e.restore()}}),[s]),Object(y.jsx)(b.a,{sx:{marginBottom:2},children:Object(y.jsxs)("svg",{width:d,height:d,viewBox:"0 0 ".concat(O," ").concat(w),xmlns:"http://www.w3.org/2000/svg",children:[Object(y.jsxs)("g",{transform:"translate(32,8)",children:[Object(y.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"black"}),Object(y.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:a})]}),Object(y.jsx)("g",{transform:"translate(".concat(125,",0)"),children:h?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("text",{x:"120",y:"23",style:{fontSize:"24px"},children:"\u03c6: ".concat(g.phi,"\xb0")}),Object(y.jsx)("text",{x:"34",y:"24",style:{fontSize:"24px"},children:"\u03bc: ".concat(g.mu)})]}):null}),Object(y.jsxs)("g",{transform:"translate(0,".concat(15,")"),children:[Object(y.jsx)("foreignObject",{x:q,y:q,width:O,height:w,children:Object(y.jsx)("canvas",{id:"circle".concat(a),style:{zIndex:"-1"},width:O,height:w,ref:p})}),Object(y.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(y.jsx)("path",{fill:"azure",d:P.a().innerRadius(176.5).outerRadius(180.5).startAngle(0).endAngle(2*Math.PI)()}),n?n.map((function(e,t){return function(e,t){var a=P.a().innerRadius(4.45).outerRadius(6.675).startAngle(0).endAngle(2*Math.PI),i="",n="",s=!1;if(e.label.includes("_")||e.label.includes("^"))for(var r=0;r<e.label.length;r++)"_"===e.label[r]&&(i=e.label.slice(0,r),n=e.label.slice(r+1,e.label.length),s=!0),"^"===e.label[r]&&(i=e.label.slice(0,r),n=e.label.slice(r+1,e.label.length));else i=e.label;var c=18*Math.sign(e.x),o=18*-Math.sign(e.y)+7;return"\u266f"===i&&(o-=3),"WT"===i&&"2"===n&&(c*=1.2),"WT"===i&&"1"===n&&(c*=1.4),"C"===i&&"o7"===n&&(c*=1.2),"O"===i&&"1,2"===n&&(o*=1.1),"C\u266f"===i&&"o7"===n&&(c*=1.1,o*=1.1),"D"===i&&"o7"===n&&(c*=.7,o*=.7),"H"===i&&"2,3"===n&&(c*=1.2,o*=1.2),"H"===i&&"1,2"===n&&(c*=.7,o*=.7),"\u03a9"===i&&(c=15,o=5),Object(y.jsxs)("g",{transform:"translate(".concat(e.x*C,",").concat(-e.y*C,")"),children:[Object(y.jsx)("path",{fill:"grey",d:a()},t),Object(y.jsxs)("text",{textAnchor:"middle",dx:c,dy:o,fontSize:"20px",children:[i,s?Object(y.jsx)("tspan",{fontSize:15,baselineShift:"sub",children:n}):Object(y.jsx)("tspan",{fontSize:15,baselineShift:"super",children:n})]})]},"p.".concat(t))}(e,t)})):null,0===u.x&&0===u.y?null:(t=u,Object(y.jsxs)("g",{transform:"translate(".concat(t.x*C,",").concat(-t.y*C,")"),children:[Object(y.jsx)("line",{x1:"0",x2:"0",y1:"7",y2:"-7",stroke:"black",strokeWidth:"1.5"}),Object(y.jsx)("line",{x1:"7",x2:"-7",y1:"0",y2:"0",stroke:"black",strokeWidth:"1.5"})]})),r?r.map((function(e,t){if(!e.isDisabled)return function(e,t,a,i,n,s){var r,o=A(a,i,!0),l=40;return Object(y.jsx)(Te.a,{placement:"top",arrow:!0,title:Object(y.jsxs)(L.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[Object(y.jsxs)("svg",{width:l,height:l,viewBox:"0 0 ".concat(l," ").concat(l),children:[Object(y.jsx)("circle",{cx:20,cy:20,r:20,strokeWidth:"1",fill:"#FFF",fillOpacity:1}),Object(y.jsx)("polyline",{transform:"translate(".concat(20,",").concat(20,") scale(",1.8,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]}),Object(y.jsxs)(L.a,{children:[Object(y.jsx)(m.a,{children:e}),Object(y.jsx)(m.a,{children:"\u03bc: ".concat(o.mu," \u03c6: ").concat(-o.phi,"\xb0")})]})]}),children:Object(y.jsxs)("g",{children:[Object(y.jsx)("polyline",(r={transform:"translate(".concat(a,",").concat(i,") scale(").concat(n,")"),fill:"none",stroke:"black",strokeWidth:"1px"},Object(c.a)(r,"fill","#FFF"),Object(c.a)(r,"fillOpacity",0),Object(c.a)(r,"points",t),r)),Object(y.jsx)("polyline",{transform:"translate(".concat(a,",").concat(i,") scale(").concat(n,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]})},"rtt.".concat(s))}(e.label,e.rosePoints,e.x*C,-e.y*C,.7,t)})):null,s?function(e){var t=P.a().innerRadius(0).outerRadius(e*O/2).startAngle(0).endAngle(2*Math.PI),a=P.a().innerRadius(e*O/2).outerRadius((e+.005)*O/2).startAngle(0).endAngle(2*Math.PI),i=[];i.push(1),i.push(.5);for(var n=2;n<7;n++)i.push(Math.round(100*(i[n-1]-.1))/100);return(o<7?s.slice(0,o+1):s.slice(o-7+1,o+1)).reverse().map((function(e,n){return Object(y.jsxs)("g",{children:[Object(y.jsx)("path",{transform:"translate(".concat(e.x*C,",").concat(-e.y*C,")"),fill:"white",fillOpacity:i[n],d:t()},n),Object(y.jsx)("path",{transform:"translate(".concat(e.x*C,",").concat(-e.y*C,")"),fill:"black",fillOpacity:i[n],d:a()},"t.".concat(n))]},"g.".concat(n))}))}(k):null]})]})]})})},Be=[[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"C\u266f",x:.866,y:-.5},{label:"D",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"E",x:-.5,y:-.866},{label:"F",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"G",x:-.866,y:.5},{label:"A\u266d",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"B\u266d",x:.5,y:.866},{label:"B",x:.866,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"T_0",x:1,y:0},{label:"T_1",x:.5,y:-.866},{label:"T_2",x:-.5,y:-.866},{label:"T_3",x:-1,y:0},{label:"T_4",x:-.5,y:.866},{label:"T_5",x:.5,y:.866}],[{label:"\u03a9",x:0,y:0},{label:"C+",x:1,y:0},{label:"C\u266f+",x:0,y:-1},{label:"D+",x:-1,y:0},{label:"D\u266f+",x:0,y:1},{label:"H_0,3",x:.5,y:.5},{label:"H_0,1",x:.5,y:-.5},{label:"H_1,2",x:-.5,y:-.5},{label:"H_2,3",x:-.5,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"C^o7",x:1,y:0},{label:"C\u266f^o7",x:-.5,y:-.866},{label:"D^o7",x:-.5,y:.866},{label:"O_0,2",x:.25,y:.433},{label:"O_0,1",x:.25,y:-.433},{label:"O_1,2",x:-.5,y:0}],[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"F",x:.866,y:-.5},{label:"B\u266d",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"A\u266d",x:-.5,y:-.866},{label:"C\u266f",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"B",x:-.866,y:.5},{label:"E",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"D",x:.5,y:.866},{label:"G",x:.866,y:.5},{label:"\u266e",x:.267,y:.462},{label:"5\u266d",x:0,y:-.533},{label:"2\u266f",x:-.267,y:.462},{label:"3\u266d",x:.462,y:-.267},{label:"4\u266f",x:-.533,y:0},{label:"\u266d",x:.462,y:.267},{label:"6\u266f",x:-.267,y:-.462},{label:"\u266f",x:0,y:.533},{label:"4\u266d",x:.267,y:-.462},{label:"3\u266f",x:-.462,y:.267},{label:"2\u266d",x:.533,y:0},{label:"5\u266f",x:-.462,y:-.267}],[{label:"\u03a9",x:0,y:0},{label:"WT_1",x:1,y:0},{label:"WT_2",x:-1,y:0}]];var Ge=function(e){var t=e.coeffTracesData,a=e.showPrototypes,n=e.showMagAndPhase,s=e.userPcvs,r=e.currentSubdiv,c=e.midiDevNotesDftCoeffs,o=e.elemsWidth,u=e.showFullTrace,d=Object(i.useState)(Be),h=Object(l.a)(d,2),m=h[0],f=h[1],p=Object(i.useState)([]),j=Object(l.a)(p,2),x=j[0],g=j[1];return Object(i.useEffect)((function(){f(a?Be:[])}),[a]),Object(i.useEffect)((function(){for(var e=[],t=1;t<7;t++){for(var a=[],i=0;i<s.length;i++)a.push({x:s[i].coeffs[t].re,y:s[i].coeffs[t].im,rosePoints:s[i].rosePoints,isDisabled:s[i].isDisabled,label:s[i].label});e.push(a)}g(e)}),[s]),Object(y.jsx)(b.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[1,2,3,4,5,6].map((function(e){return Object(y.jsx)(Ne,{coeffNumber:e,protoDataCoeff:m[e-1],traceDataCoeff:t[e-1],userPcvsCoeff:x[e-1],currentSubdiv:r,performanceCoeff:c[e],targetCircleWidth:o,showMagAndPhase:n,showFullTrace:u},"w.".concat(e))}))})},Le=a(373),Ve=a(447),_e=a(429),He=a(430),Ue=a(422),Qe=Object(x.a)(d.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));var Je,Ke,Xe=function(e){var t=e.fileName,a=e.setInAnalysisPage,n=e.open,s=e.setOpen,r=e.wavescapesData,c=e.coeffTracesData,o=e.currentSubdiv,u=e.currentWavescapeSubdiv,d=e.userPcvs,f=Object(i.useState)(!0),p=Object(l.a)(f,2),j=p[0],x=p[1],g=Object(i.useState)(!0),v=Object(l.a)(g,2),O=v[0],w=v[1],q=Object(i.useState)(!0),C=Object(l.a)(q,2),k=C[0],A=C[1],D=Object(i.useState)(re([0,0,0,0,0,0,0,0,0,0,0,0]).map((function(e){return{x:e.re,y:e.im}}))),S=Object(l.a)(D,2),E=S[0],P=S[1],F=Object(i.useRef)(null),M=Object(i.useState)(100),W=Object(l.a)(M,2),I=W[0],R=W[1],T=Object(i.useState)(6),z=Object(l.a)(T,2),N=z[0],B=z[1],L=Object(i.useState)(440),V=Object(l.a)(L,2),_=V[0],H=V[1];function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=20;F.current&&H((F.current.clientWidth+e)/N-t)}function Q(){U(0)}return Object(i.useEffect)((function(){a(!0),s(!0),U(),window.addEventListener("resize",Q)}),[]),Object(i.useEffect)((function(){A(!0)}),[c]),Object(i.useEffect)((function(){U(),window.addEventListener("resize",Q)}),[N]),Object(i.useEffect)((function(){U(n?-400:400)}),[n]),Object(i.useEffect)((function(){U()}),[I]),Object(i.useEffect)((function(){var e=[],t=new G.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function a(a){var i=a.data[0];if(144===i||128===i){var n=G.a(a.data[1],"midi").toNote();if(128!==i||e.includes(n)){var s=Math.round(.05*a.data[2]);switch(i){case 144:s>0?(t.triggerAttack(n,G.f(),s),e.push(n)):(t.triggerRelease(n,G.f()),e=e.filter((function(e){return e!==n})));break;case 128:t.triggerRelease(n,G.f()),e=e.filter((function(e){return e!==n}))}!function(e){var t=[0,0,0,0,0,0,0,0,0,0,0,0];e.forEach((function(e){switch(e.includes("#")?e.slice(0,2):e.slice(0,1)){case"C":t[0]+=1;break;case"C#":t[1]+=1;break;case"D":t[2]+=1;break;case"D#":t[3]+=1;break;case"E":t[4]+=1;break;case"F":t[5]+=1;break;case"F#":t[6]+=1;break;case"G":t[7]+=1;break;case"G#":t[8]+=1;break;case"A":t[9]+=1;break;case"A#":t[10]+=1;break;case"B":t[11]+=1}}));var a=re(t);a=a.map((function(e){return{x:e.re,y:e.im}})),P(a)}(e)}}}function i(e){console.log("Name: ".concat(e.port.name,", Brand: ").concat(e.port.manufacturer,", State: ").concat(e.port.state,", Type: ").concat(e.port.type))}t.volume.value=-30,navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then((function(e){e.onstatechange=i,e.inputs.forEach((function(e){e.onmidimessage=a}))}),(function(){console.log("Could not connect MIDI")}))}),[]),Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(b.a,{sx:{padding:0,margin:"auto",marginBottom:"70px",width:"".concat(I,"%")},children:[Object(y.jsxs)(De.a,{defaultExpanded:!0,children:[Object(y.jsx)(Se.a,{expandIcon:Object(y.jsx)(Fe.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(y.jsx)(m.a,{variant:"h6",children:"Wavescapes"})}),Object(y.jsx)(Ee.a,{ref:F,sx:{padding:0},children:Object(y.jsx)(Re,{wavescapesData:r,currentWavescapeSubdiv:u,elemsWidth:_})})]}),Object(y.jsxs)(De.a,{defaultExpanded:!0,children:[Object(y.jsx)(Se.a,{expandIcon:Object(y.jsx)(Fe.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(y.jsx)(m.a,{variant:"h6",children:"Fourier Coefficient Spaces"})}),Object(y.jsx)(Ee.a,{sx:{padding:0},children:Object(y.jsx)(Ge,{coeffTracesData:c,currentSubdiv:o,showPrototypes:j,showMagAndPhase:O,showFullTrace:k,userPcvs:d,midiDevNotesDftCoeffs:E,elemsWidth:_})})]})]}),Object(y.jsx)(Qe,{position:"fixed",open:n,color:"secondary",sx:{top:"auto",bottom:0,maxHeight:"74px"},children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)(te,{fileName:t,currentWavescapeSubdiv:u}),Object(y.jsx)(b.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5%",maxWidth:"100px",justifyContent:"space-evenly"},children:Object(y.jsxs)(Le.a,{children:[Object(y.jsx)(fe.a,{control:Object(y.jsx)(Ve.a,{onChange:function(){A(!k)},checked:k,size:"small"}),label:Object(y.jsx)(m.a,{noWrap:!0,children:"Show full trace"})}),Object(y.jsx)(fe.a,{control:Object(y.jsx)(Ve.a,{onChange:function(){x(!j)},checked:j,size:"small"}),label:Object(y.jsx)(m.a,{noWrap:!0,children:"Show Prototypes"})}),Object(y.jsx)(fe.a,{control:Object(y.jsx)(Ve.a,{onChange:function(){w(!O)},checked:O,size:"small"}),label:Object(y.jsx)(m.a,{noWrap:!0,children:"Show \u03bc and \u03c6"})})]})}),Object(y.jsxs)(b.a,{sx:{minWidth:"20%",padding:"1% 3% 1% 2%",marginTop:1},children:[Object(y.jsx)(m.a,{children:"Plots size"}),Object(y.jsx)(K.a,{min:20,max:100,value:I,defaultValue:100,"aria-label":"Plots size",valueLabelDisplay:"auto",onChange:function(e,t){R(t)},marks:[{value:20,label:"20%"},{value:50,label:"50%"},{value:100,label:"100%"}]})]}),Object(y.jsx)(b.a,{sx:{minWidth:120},children:Object(y.jsxs)(me.a,{size:"small",variant:"standard",fullWidth:!0,children:[Object(y.jsx)(_e.a,{children:"Layout"}),Object(y.jsxs)(Ue.a,{value:N,label:"Layout",onChange:function(e){R(100),B(e.target.value)},children:[Object(y.jsx)(He.a,{value:6,children:"1x6"}),Object(y.jsx)(He.a,{value:3,children:"2x3"}),Object(y.jsx)(He.a,{value:2,children:"3x2"}),Object(y.jsx)(He.a,{value:1,children:"6x1"})]})]})})]})})]})},Ye=a(29),Ze=a(432),$e=a(177),et=a.n($e),tt=a(419),at=80,it=Object(x.a)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(u.a)({flexGrow:1,padding:t.spacing(3),backgroundColor:"#e0e0e0",transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(400,"px")},a&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0,backgroundColor:"#e0e0e0"})})),nt=Object(x.a)("div")((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"space-between"})}));var st=function(){var e,t=Object(Ye.a)(),a=Object(i.useState)(!1),n=Object(l.a)(a,2),s=n[0],r=n[1],u=Object(i.useState)(""),d=Object(l.a)(u,2),h=d[0],p=d[1],x=Object(i.useState)([]),g=Object(l.a)(x,2),w=g[0],k=g[1],S=Object(i.useState)([]),P=Object(l.a)(S,2),F=P[0],M=P[1],W=Object(i.useState)(0),I=Object(l.a)(W,2),T=I[0],z=I[1],G=Object(i.useState)({noteResolutionValue:1,seconds:1.5,useSeconds:!1}),V=Object(l.a)(G,2),_=V[0],H=V[1],U=Object(i.useState)(10),Q=Object(l.a)(U,2),J=Q[0],K=Q[1],X=Object(i.useState)(1),Y=Object(l.a)(X,2),Z=Y[0],ee=Y[1],te=Object(i.useState)([]),ae=Object(l.a)(te,2),ie=ae[0],ne=ae[1],be=Object(i.useRef)(null),he=Object(i.useState)(!1),me=Object(l.a)(he,2),fe=me[0],je=me[1],xe=Object(i.useState)(!1),ge=Object(l.a)(xe,2),ve=ge[0],Oe=ge[1],we=Object(i.useState)([]),Ce=Object(l.a)(we,2),De=Ce[0],Se=Ce[1];function Ee(e){var t,a=[];try{t=function(e){for(var t=[],a=!1,i=!1,n=0;n<e.length;n++)if("{"!==e[n]&&"("!==e[n]||(a=!0,"{"===e[n]&&(i=!0)),a){for(var s=[],r=n+1;"}"!==e[r]&&")"!==e[r];r++){if(","!==e[r]&&"."!==e[r]&&" "!==e[r]&&isNaN(parseFloat(e[r])))throw new Error("Found NaN");" "!==e[r]&&s.push(e[r])}if(""===(s=s.join("")))throw new Error("Empty input");for(var c=[],o=0,l=0;l<s.length;l++){if(","===s[l]){var u=s.slice(l-o,l);if(0===u.length)throw new Error("Two consecutive comas");c.push(+u),o=-1}o++}var d=s.slice(s.length-o,s.length);if(0===d.length)throw new Error("Missing last number");if(c.push(+d),i){for(var b=[0,0,0,0,0,0,0,0,0,0,0,0],h=0;h<c.length;h++){if(c[h]<0||c[h]>=12)throw new Error("Set notation: out of range");b[c[h]]+=1}t.push(b)}else{if(12!==c.length)throw new Error("Vectorial notation: missing elements");t.push(c)}a=!1,i=!1,n+=o}if(0===t.length)throw new Error("Invalid input");return t}(e)}catch(i){return console.log(i.message),void je(!0)}t.forEach((function(e){return a.push({label:"(".concat(e,")"),isDisabled:!1,coeffs:re(e,!0,!0,!1),rosePoints:[],n:-1,d:-1})})),ie.map((function(e){return e.label})).forEach((function(e){a=a.filter((function(t){return t.label!==e}))})),a.forEach((function(e){for(var t=!1,a=0;a<De.length&&!t;a++)for(var i=0;i<De[a].length&&!t;i++)De[a][i].usable&&!De[a][i].used&&(t=!0,e.rosePoints=De[a][i].points,De[a][i].used=!0,e.n=De[a][i].n,e.d=De[a][i].d)})),ne([].concat(Object(o.a)(ie),Object(o.a)(a)))}return Object(i.useEffect)((function(){var e=document.getElementById("file").files[0];if(Ke=e?e.name:"",e){var t=new FileReader;t.readAsArrayBuffer(e),t.onload=function(e){var t=function(e){var t=new se.Midi(e),a=t.header.tempos.map((function(e){return Math.round(e.bpm)})),i=Math.max.apply(Math,Object(o.a)(a)),n=t.tracks.filter((function(e){return!1===e.instrument.percussion}));return t.tracks=n,{midiData:t,midiBpm:i}}(e.target.result),a=t.midiData,i=t.midiBpm;at=i;var n=(Je=a).duration/50;K(n),k(function(e){for(var t=e[0].length,a=e[0].length,i=2,n=1;n<t;n++){for(var s=[],r=0;r+i<=a;r++){var c=e[0].slice(r,r+i);s.push(ce(c))}i++,e.push(s)}for(var o=[],l=0;l<6;l++){for(var u=[],d=0;d<e.length;d++){for(var b=[],h=0;h<e[d].length;h++)b.push("");u.push(b)}o.push(u)}for(var m=0;m<e.length;m++)for(var f=0;f<e[m].length;f++)for(var p=1;p<e[m][f].length;p++)o[p-1][m][f]=R(e[m][f][p]);return o}(function(e,t){var a=[];e.tracks.forEach((function(i){return a.push(ue(i.notes,t,e.duration))}));for(var i=[],n=0;n<a[0].length;n++)i.push(new oe);for(var s=0;s<a.length;s++)for(var r=0;r<a[s].length;r++)for(var c=0;c<a[s][r].length;c++){var o=a[s][r][c],l=o.pitch,u=o.duration;i[r].addNoteDuration(l,u)}var d=i.map((function(e){return re(e.getPcvAsArray())})),b=[];return b.push(d),b}(Je,n)));var s=le(a,_,at),r=s.tracesData,c=s.resolution;ee(c),M(r),$(Je,c,z),console.log(a)}}}),[h]),Object(i.useEffect)((function(){for(var e=[],t=1;t<=7;t++){for(var a=[],i=1;i<=7;i++){var n={n:i,d:t,used:!1,usable:!0,points:[]};i%t===0&&1!==t&&(n.usable=!1),!0===n.usable&&(n.points=de(i,t)),a.push(n)}e.push(a)}e[0][0].usable=!1,Se(e);var s=[[1,0,0,0,1,0,0,1,0,0,0,0],[1,0,0,1,0,0,0,1,0,0,0,0],[1,0,0,1,0,0,1,0,0,0,0,0]].map((function(e){return{label:"(".concat(e.toString(),")"),isDisabled:!1,coeffs:re(e,!0,!0,!1),rosePoints:[],n:-1,d:-1}}));s.forEach((function(t){for(var a=!1,i=0;i<e.length&&!a;i++)for(var n=0;n<e[i].length&&!a;n++)e[i][n].usable&&!e[i][n].used&&(a=!0,t.rosePoints=e[i][n].points,e[i][n].used=!0,t.n=e[i][n].n,t.d=e[i][n].d)})),s[1].isDisabled=!0,s[2].isDisabled=!0,ne(s)}),[]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(j.a,{children:[Object(y.jsx)(D.a,{}),Object(y.jsx)(q,{open:s,setOpen:r,setInAnalysisPage:Oe,inAnalysisPage:ve}),Object(y.jsxs)(b.a,{sx:{display:"flex"},children:[Object(y.jsxs)(Ze.a,{sx:{width:400,flexShrink:0,"& .MuiDrawer-paper":{width:400,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:s,children:[Object(y.jsxs)(nt,{children:[Object(y.jsxs)(L.a,{sx:{flexGrow:"2",maxWidth:"85%",marginBottom:1},children:[Object(y.jsx)(m.a,{sx:{fontWeight:"bold"},children:"Upload a midi file"}),Object(y.jsxs)(L.a,{spacing:2,direction:"row",sx:{alignItems:"center"},children:[Object(y.jsxs)("label",{htmlFor:"file",children:[Object(y.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"file",value:h,onChange:function(e){return p(e.target.value)}}),Object(y.jsx)(f.a,{variant:"contained",size:"small",color:"primary",component:"span",children:"Upload"})]}),Object(y.jsx)(m.a,{noWrap:!0,color:Ke?"primary":"error",children:h?Ke:"No midi file uploaded"})]})]}),Object(y.jsx)(O.a,{onClick:function(){r(!1)},children:"ltr"===t.direction?Object(y.jsx)(et.a,{}):Object(y.jsx)(v.a,{})})]}),Object(y.jsx)(tt.a,{}),Object(y.jsx)(m.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Time resolution"}),Object(y.jsx)(b.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5% 0 2%",width:"90%",justifyContent:"space-evenly"},children:Object(y.jsx)(ye,{setResolutionMode:H,resolutionMode:_,retriggerAnalysis:function(){if(null!=Je){var e=le(Je,_,at),t=e.tracesData,a=e.resolution;ee(a),M(t),$(Je,a,z)}}})}),Object(y.jsx)(tt.a,{}),Object(y.jsx)(m.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Custom Pitch-Class Vectors"}),Object(y.jsxs)(b.a,{sx:{flexDirection:"column",display:"flex",alignItems:"center",margin:"3% 5%",height:"40%",maxHeight:"350px",justifyContent:"flex-start"},component:"form",noValidate:!0,autoComplete:"off",children:[Object(y.jsx)(pe.a,(e={fullWidth:!0,label:'margin="dense"',error:fe,helperText:fe&&"Invalid input",id:"outlined-basic"},Object(c.a)(e,"label","e.g. {0,0,4,7,10} (2,0,0,0,1,0,0,1,0,0,1,0)"),Object(c.a)(e,"variant","outlined"),Object(c.a)(e,"onKeyPress",(function(e){"Enter"===e.key&&(e.preventDefault(),Ee(be.current.value),be.current.value="")})),Object(c.a)(e,"onChange",(function(){je(!1)})),Object(c.a)(e,"inputRef",be),e)),Object(y.jsx)(ke,{userPcvs:ie,setUserPcvs:ne,rosesMat:De})]}),Object(y.jsx)(tt.a,{}),Object(y.jsx)(m.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Legend of coefficients"}),Object(y.jsx)(b.a,{sx:{margin:"5px 10px"},children:Object(y.jsx)(qe.a,{children:Object(y.jsxs)(L.a,{children:[Object(y.jsxs)(L.a,{direction:"row",children:[Object(y.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(y.jsx)("circle",{cx:"12",cy:"12",r:"8",fill:"black"}),Object(y.jsx)("text",{fontSize:"15",textAnchor:"middle",x:"12",y:"17",fill:"white",children:"k"})]}),"Fourier Coefficient number"]}),Object(y.jsxs)(L.a,{direction:"row",children:[Object(y.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(y.jsx)("circle",{cx:"12",cy:"12",r:"6",fill:"black"})}),"MIDI file segments"]}),Object(y.jsxs)(L.a,{direction:"row",children:[Object(y.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(y.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"white"}),Object(y.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"none",stroke:"black",strokeWidth:"3px"})]}),"MIDI playback"]}),Object(y.jsxs)(L.a,{direction:"row",children:[Object(y.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(y.jsxs)("g",{transform:"translate(12,12)",children:[Object(y.jsx)("line",{x1:"0",x2:"0",y1:"7",y2:"-7",stroke:"black",strokeWidth:"1.5"}),Object(y.jsx)("line",{x1:"7",x2:"-7",y1:"0",y2:"0",stroke:"black",strokeWidth:"1.5"})]})}),"MIDI controller input"]}),Object(y.jsxs)(L.a,{direction:"row",children:[Object(y.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(y.jsx)("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"grey",strokeWidth:"2px"})}),"Prototypes"]}),Object(y.jsxs)(L.a,{direction:"row",children:[Object(y.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:De.length>0?Object(y.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:De[3][0].points}):null}),"Custom Pitch-Class Vectors"]})]})})}),Object(y.jsx)(f.a,{variant:"contained",size:"small",color:"primary",sx:{width:"50%",margin:"auto",marginTop:1,marginBottom:1},onClick:function(){var e=new E.a,t="<svg xmlns='http://www.w3.org/2000/svg' width='".concat(20,"' height='",20,"'>\n                          <circle cx='12' cy='12' r='12' fill='black' />\n                        </svg>");[1,2,3,4,5,6].forEach((function(a){var i=function(e){var t=Object(y.jsx)(N,{traceData:F,printablePitchClasses:[],userPcv:[],coeffNumber:e});return A.a.renderToStaticMarkup(t)}(a);e.file("wavescapes/wavescape".concat(a,".svg"),t),e.file("fourier/space".concat(a,".svg"),i)})),e.generateAsync({type:"blob"}).then((function(e){Object(B.saveAs)(e,"images.zip")}))},children:"Save"})]}),Object(y.jsx)(it,{open:s,children:Object(y.jsxs)(C.c,{children:[Object(y.jsx)(C.a,{exact:!0,path:"/",render:function(){return Object(y.jsx)(Ae,{setOpen:r,setInAnalysisPage:Oe})}}),Object(y.jsx)(C.a,{exact:!0,path:"/theory",render:function(){return Object(y.jsx)(Me,{setOpen:r,setInAnalysisPage:Oe})}}),Object(y.jsx)(C.a,{exact:!0,path:"/analysis",render:function(){return Object(y.jsx)(Xe,{fileName:Ke,setInAnalysisPage:Oe,open:s,setOpen:r,wavescapesData:w,coeffTracesData:F,currentSubdiv:T,currentWavescapeSubdiv:Math.floor(T*Z/J),userPcvs:ie})}})]})})]})]})})},rt=a(178),ct=a(431),ot=Object(rt.a)({palette:{primary:{main:"#323232"},secondary:{main:"#fefefe"},background:{default:"#e0e0e0"}}});r.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(ct.a,{theme:ot,children:Object(y.jsx)(st,{})})}),document.getElementById("root"))}},[[359,1,2]]]);
//# sourceMappingURL=main.50d16339.chunk.js.map