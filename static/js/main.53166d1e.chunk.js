(this.webpackJsonpmidft=this.webpackJsonpmidft||[]).push([[0],{354:function(e,t){},368:function(e,t,a){"use strict";a.r(t);var n,c,r=a(1),s=a.n(r),i=a(68),l=a.n(i),o=a(6),u=a(18),h=a(11),j=a(9),b=a(89),f=a(26),d=a(29),x=a(429),g=a(430),p=a(180),O=a.n(p),A=a(179),m=a.n(A),v=a(178),y=a.n(v),w=a(457),C=a(444),D=a(10),k=a(456),P=a(0),S=0,F=Object(D.a)(k.a)({fontSize:"0.75rem",opacity:.38,fontWeight:500,letterSpacing:.2});function M(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return"".concat(t,":").concat(a<9?"0".concat(a):a)}function B(e,t,a){d.d.cancel(0),a(0),d.d.stop(),S=e.duration;var c=[];e.tracks.forEach((function(e){return e.notes.forEach((function(e){c.push(e)}))})),c.forEach((function(e){e.subdiv=Math.floor(e.time/t)})),(n=new d.b((function(e,t){E.triggerAttackRelease(t.name,t.duration,e,t.velocity),a(t.subdiv)}),[].concat(c)).start(0)).loop=!0,n.loopEnd=S}var E=new d.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function I(e){var t=this,a=e.fileName,s=Object(r.useState)(0),i=Object(h.a)(s,2),l=i[0],o=i[1];function u(){"running"!==d.e.state&&(console.log("state running"),d.e.resume()),d.d.start(),!c&&n&&(c=setInterval((function(){return o(n.progress)}),1e3))}return Object(r.useEffect)((function(){document.addEventListener("keydown",function(e){32===e.which&&(e.preventDefault(),"paused"===d.d.state||"stopped"===d.d.state?u():"started"===d.d.state&&(d.d.pause(),T()))}.bind(t))}),[]),Object(P.jsxs)(x.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"60%"},children:[Object(P.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[Object(P.jsxs)(g.a,{direction:"row",sx:{flexGrow:1,paddingLeft:"10%"},children:[Object(P.jsx)(w.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){console.log("stop"),d.d.stop(),T()},size:"large",children:Object(P.jsx)(y.a,{fontSize:"large"})}),Object(P.jsx)(w.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){console.log("pause"),d.d.pause(),T()},size:"large",children:Object(P.jsx)(m.a,{fontSize:"large"})}),Object(P.jsx)(w.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){return u()},size:"large",children:Object(P.jsx)(O.a,{fontSize:"large"})})]}),Object(P.jsx)(k.a,{color:a?"primary":"error",noWrap:!0,sx:{flexGrow:"2",paddingRight:"10%"},children:a||"No midi file uploaded"})]}),Object(P.jsx)(C.a,{"aria-label":"Playback",size:"small",value:l?100*l:0,onChange:function(e,t){o(t/100),d.d.seconds=t/100*S},sx:{width:"90%"}}),Object(P.jsxs)(x.a,{sx:{display:"flex",width:"90%",alignItems:"center",justifyContent:"space-between",mt:-1},children:[Object(P.jsxs)(F,{children:["-",M(S-l*S)]}),Object(P.jsx)(F,{children:M(S)})]})]})}function T(){clearInterval(c),c=null}E.volume.value=-20;var W=a(3),G=a(4),z=a(181),R=a(439);function L(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=e.length,r=[],s=0;s<c/2+1;s++){for(var i=0,l=0;l<c;l++)i=R.a(R.e(e[l],R.c(R.e(R.d,-2*R.f*s*l/c))),i);r.push(i)}if(r=r.slice(),t){var o=r[0];0!=o&&(r=r.map((function(e){return R.b(e,o)})))}return a&&r.forEach((function(e){e.re=Math.round(1e4*e.re)/1e4,e.im=Math.round(1e4*e.im)/1e4})),n&&(r=r.map((function(e){return e.toPolar()}))),r}function N(e){for(var t=e[0],a=1;a<e.length;a++){for(var n=[],c=0;c<e[a].length;c++)n.push(R.a(t[c],e[a][c]));t=n.slice()}var r=t[0];return 0!=r&&(t=t.map((function(e){return R.b(e,r)}))),t}var Q=a(42),H=Q.c().domain([0,1]).range(Q.b(0,255,1)),J=function(e){var t,a,n;return e>=0&&e<R.f/3?(t=1,a=3*e/R.f,n=0):e>=R.f/3&&e<2*R.f/3?(t=2-3*e/R.f,a=1,n=0):e>=2*R.f/3&&e<R.f?(t=0,a=1,n=3*e/R.f-2):e>=R.f&&e<4*R.f/3?(t=0,a=4-3*e/R.f,n=1):e>=4*R.f/3&&e<5*R.f/3?(t=3*e/R.f-4,a=0,n=1):e>=5*R.f/3&&e<2*R.f&&(t=1,a=0,n=6-3*e/R.f),t=H(t),a=H(a),n=H(n),"rgb(".concat(t,", ").concat(a,", ").concat(n,")")},V=function(e,t,a){var n,c,r,s=Math.atan2(t,e);return(s=-s)<0&&(s+=2*Math.PI),s>=0&&s<R.f/3?(n=1,c=3*s/R.f,r=0):s>=R.f/3&&s<2*R.f/3?(n=2-3*s/R.f,c=1,r=0):s>=2*R.f/3&&s<R.f?(n=0,c=1,r=3*s/R.f-2):s>=R.f&&s<4*R.f/3?(n=0,c=4-3*s/R.f,r=1):s>=4*R.f/3&&s<5*R.f/3?(n=3*s/R.f-4,c=0,r=1):s>=5*R.f/3&&s<2*R.f&&(n=1,c=0,r=6-3*s/R.f),{r:n=H(n),g:c=H(c),b:r=H(r),a:H(a)}};function Y(e){var t=e.toPolar(),a=t.phi,n=t.r;a<0&&a>-1e-5&&(a=0),a<0&&(a+=2*Math.PI);var c=J(a).slice(3,-1);return"rgba".concat(c,", ").concat(n,")")}var K=function(){function e(){Object(W.a)(this,e),this.C=0,this.Cs=0,this.D=0,this.Ds=0,this.E=0,this.F=0,this.Fs=0,this.G=0,this.Gs=0,this.A=0,this.As=0,this.B=0}return Object(G.a)(e,[{key:"addNoteDuration",value:function(e,t){switch(e){case"C":this.C+=t;break;case"C#":this.Cs+=t;break;case"D":this.D+=t;break;case"D#":this.Ds+=t;break;case"E":this.E+=t;break;case"F":this.F+=t;break;case"F#":this.Fs+=t;break;case"G":this.G+=t;break;case"G#":this.Gs+=t;break;case"A":this.A+=t;break;case"A#":this.As+=t;break;case"B":this.B+=t}}},{key:"getPcvAsArray",value:function(){return[this.C,this.Cs,this.D,this.Ds,this.E,this.F,this.Fs,this.G,this.Gs,this.A,this.As,this.B]}},{key:"add",value:function(e){this.C=e.C,this.Cs=e.Cs,this.D=e.D,this.Ds=e.Ds,this.E=e.E,this.F=e.F,this.Fs=e.Fs,this.G=e.G,this.Gs=e.Gs,this.A=e.A,this.As=e.As,this.B=e.B}}]),e}();function Z(e,t,a){var n,c=t.noteResolutionValue,r=t.seconds,s=t.useSeconds;n=s?isNaN(r)?1:r:c*(60/a);var i=e.duration,l=[];e.tracks.forEach((function(e){l.push(q(e.notes,n,i))}));for(var o=[],u=0;u<l[0].length;u++)o.push(new K);for(var h=0;h<l.length;h++)for(var j=0;j<l[h].length;j++)for(var b=0;b<l[h][j].length;b++){var f=l[h][j][b],d=f.pitch,x=f.duration;o[j].addNoteDuration(d,x)}for(var g=o.map((function(e){return L(e.getPcvAsArray())})),p=[],O=1;O<7;O++){for(var A=[],m=0;m<g.length;m++)A.push({x:g[m][O].re,y:g[m][O].im});p.push(A)}return{tracesData:p,resolution:n}}function q(e,t,a){for(var n=[],c=t,r=function(t){var a=[];e.forEach((function(e){var n=e.time,r=e.duration;if(function(e,t,a,n){if(e>a&&e<a+n||e+t>a&&e+t<a+n||e<=a&&e+t>=a+n)return!0;return!1}(n,r,t,c)){var s={pitch:e.pitch};s.duration=n<t?n+r<t+c?n+r-t:c:n+r<=t+c?r:t+c-n,a.push(s)}})),n.push(a)},s=0;s<a;s+=t)r(s);return n}function U(e,t){for(var a=[],n=0;n<2*Math.PI*t;n+=.01){var c=10*Math.cos(e/t*n),r=c*Math.cos(n),s=c*Math.sin(n);a.push([r,s])}return a}var X=a(460),_=a(461),$=a(459),ee=a(462),te=a(115),ae=a.n(te),ne=Object(D.a)(X.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(j.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));function ce(e){var t=e.open,a=e.setOpen,n=e.inAnalysisPage;return Object(P.jsx)(x.a,{sx:{flexGrow:1},children:Object(P.jsx)(ne,{position:"static",open:t,children:Object(P.jsxs)(_.a,{children:[Object(P.jsx)(w.a,{disabled:!n,color:"inherit","aria-label":"open drawer",onClick:function(){a(!0)},edge:"start",sx:Object(j.a)({mr:2},t&&{display:"none"}),children:Object(P.jsx)(ae.a,{})}),Object(P.jsx)(k.a,{variant:"h3",component:"div",sx:{flexGrow:1},children:"Mi_DFT"}),Object(P.jsxs)(ee.a,{"aria-label":"outlined button group",children:[Object(P.jsx)($.a,{component:b.b,to:"/",variant:"contained",disableElevation:!0,children:"Home"}),Object(P.jsx)($.a,{component:b.b,to:"/theory",variant:"contained",disableElevation:!0,children:"Theory"}),Object(P.jsx)($.a,{component:b.b,to:"/analysis",variant:"contained",disableElevation:!0,children:"Analysis"})]})]})})})}var re=a(443),se=a(431),ie=a(463),le=a(464),oe=a(448),ue=a.p+"static/media/whole.69e31bd8.svg",he=a.p+"static/media/half.7d756528.svg",je=a.p+"static/media/quarter.a35808dc.svg",be=a.p+"static/media/eighth.347a1769.svg",fe=a.p+"static/media/sixteenth.91907e68.svg";var de=function(e){var t=e.resolutionMode,a=e.setResolutionMode,n=e.retriggerAnalysis,c=Object(r.useState)(!1),s=Object(h.a)(c,2),i=s[0],l=s[1],o=Object(r.useRef)(null);return Object(P.jsx)(x.a,{children:Object(P.jsx)(ie.a,{component:"fieldset",children:Object(P.jsxs)(se.a,{row:!0,defaultValue:"quarter",onChange:function(e){var n=Object(j.a)({},t);switch(n.seconds=parseFloat(o.current.value),e.target.value){case"sixteenth":n.noteResolutionValue=.25,n.useSeconds=!1;break;case"eighth":n.noteResolutionValue=.5,n.useSeconds=!1;break;case"quarter":n.noteResolutionValue=1,n.useSeconds=!1;break;case"half":n.noteResolutionValue=2,n.useSeconds=!1;break;case"whole":n.noteResolutionValue=4,n.useSeconds=!1;break;case"seconds":n.useSeconds=!0}a(n)},"aria-label":"resolution",name:"row-radio-buttons-group",sx:{display:"flex",justifyContent:"space-between"},children:[Object(P.jsx)(le.a,{value:"sixteenth",control:Object(P.jsx)(re.a,{size:"small"}),label:Object(P.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3)"},src:fe})}),Object(P.jsx)(le.a,{value:"eighth",control:Object(P.jsx)(re.a,{size:"small"}),label:Object(P.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3) translate(0, 0)"},src:be})}),Object(P.jsx)(le.a,{value:"quarter",control:Object(P.jsx)(re.a,{size:"small"}),label:Object(P.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(1, 3)"},src:je})}),Object(P.jsx)(le.a,{value:"half",control:Object(P.jsx)(re.a,{size:"small"}),label:Object(P.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(3.7, 3.2) "},src:he})}),Object(P.jsx)(le.a,{value:"whole",control:Object(P.jsx)(re.a,{size:"small"}),label:Object(P.jsx)("img",{style:{width:10,height:10,marginTop:0,transform:"scale(1.5, 1)"},src:ue})}),Object(P.jsx)(le.a,{value:"seconds",control:Object(P.jsx)(re.a,{size:"small"}),label:Object(P.jsx)(oe.a,{sx:{minHeight:"4.4rem",maxWidth:"5rem"},error:i,helperText:i&&"Invalid input",label:"in seconds",id:"standard-size-small",defaultValue:"1.5",size:"small",variant:"standard",onChange:function(){var e=Object(j.a)({},t);e.seconds=parseFloat(o.current.value),isNaN(e.seconds)?l(!0):(a(e),l(!1))},inputRef:o})}),Object(P.jsx)($.a,{variant:"contained",onClick:n,sx:{width:"22%",height:"15%",marginTop:2},children:"Change"})]})})})},xe=a(453),ge=a(458),pe=Object(D.a)("li")((function(e){return{margin:e.theme.spacing(.5)}}));function Oe(e){var t=e.userPcvs,a=e.setUserPcvs,n=e.rosesMat;return Object(P.jsx)(ge.a,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",p:"3px",overflow:"auto",height:"100%",width:"100%"},component:"ul",children:t.map((function(e,c){return Object(P.jsx)(pe,{children:Object(P.jsx)(xe.a,{variant:e.isDisabled?"outlined":"filled",icon:Object(P.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(P.jsx)("g",{children:Object(P.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:e.rosePoints})})}),label:e.label,onDelete:(r=e,function(){n[r.d-1][r.n-1].used=!1,a((function(e){return e.filter((function(e){return e.label!==r.label}))}))}),onClick:function(){e.isDisabled=!e.isDisabled,a(Object(u.a)(t))}})},"".concat(c));var r}))})}var Ae=a(143),me=a.n(Ae),ve=a(182),ye=a.n(ve),we=a(183),Ce=function(e){var t=e.traceData,a=e.userPcv,n=e.prototypesData,c=e.coeffNumber,r=e.showNumber,s=450,i=180,l=2*R.f/50,o=Q.b(0,2*R.f,l),u=Q.b(0,1,.05);return Object(P.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:450,children:[r?Object(P.jsxs)("g",{transform:"translate(32,20)",children:[Object(P.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(P.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:c})]}):null,Object(P.jsxs)("g",{transform:"translate(".concat(225,",").concat(225,")"),children:[u.map((function(e){return o.map((function(t,a){return function(e,t,a,n){var c=-R.f/2,r=Q.a().innerRadius(360*n/2).outerRadius(360*(n+.05)/2).startAngle(-(e+c)).endAngle(-(e+l+c));return Object(P.jsx)("path",{fill:J(e),fillOpacity:n,stroke:J(e),strokeOpacity:n/10,d:r()},"".concat(a,".").concat(t))}(t,a,c,e)}))})),t.map((function(e,t){return function(e,t,a,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=Q.a().innerRadius(0).outerRadius(t*s/2).startAngle(0).endAngle(2*Math.PI);return Object(P.jsx)("path",{transform:"translate(".concat(e.x*i,",").concat(-e.y*i,")"),fill:a,fillOpacity:c,d:r()},n)}(e,.01,"black",t,.2)})),a?a.map((function(e,t){if(!e.isDisabled)return function(e,t,a,n,c){return Object(P.jsx)("g",{children:Object(P.jsx)("polyline",{transform:"translate(".concat(t,",").concat(a,") scale(").concat(n,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:e})},"rose".concat(c))}(e.rosePoints,e.x*i,-e.y*i,.7,t)})):null,n.map((function(e,t){return function(e,t){var a=Q.a().innerRadius(4.5).outerRadius(6.75).startAngle(0).endAngle(2*Math.PI),n="",c="",r=!1;if(e.label.includes("_")||e.label.includes("^"))for(var s=0;s<e.label.length;s++)"_"===e.label[s]&&(n=e.label.slice(0,s),c=e.label.slice(s+1,e.label.length),r=!0),"^"===e.label[s]&&(n=e.label.slice(0,s),c=e.label.slice(s+1,e.label.length));else n=e.label;var l=18*Math.sign(e.x),o=18*-Math.sign(e.y)+7;return"\u266f"===n&&(o-=3),"WT"===n&&"1"===c&&(l*=1.2),"WT"===n&&"0"===c&&(l*=1.4),"C"===n&&"o7"===c&&(l*=1.2),"O"===n&&"1,2"===c&&(o*=1.1),"C\u266f"===n&&"o7"===c&&(l*=1.1,o*=1.1),"D"===n&&"o7"===c&&(l*=.7,o*=.7),"H"===n&&"2,3"===c&&(l*=1.2,o*=1.2),"H"===n&&"1,2"===c&&(l*=.7,o*=.7),"\u03a9"===n&&(l=15,o=5),Object(P.jsxs)("g",{transform:"translate(".concat(e.x*i,",").concat(-e.y*i,")"),children:[Object(P.jsx)("path",{fill:"grey",d:a()},t),Object(P.jsxs)("text",{textAnchor:"middle",dx:l,dy:o,fontSize:"20px",children:[n,r?Object(P.jsx)("tspan",{fontSize:15,baselineShift:"sub",children:c}):Object(P.jsx)("tspan",{fontSize:15,baselineShift:"super",children:c})]})]},"p.".concat(t))}(e,t)}))]})]},"circle".concat(c))},De=Math.sin(Math.PI/3);var ke=function(e){var t,a,n=e.wsNumber,c=e.wavescapeMatrix,r=e.showNumber,s=400,i=[10,10],l=[s-i[0],s-i[1]];return t=c[0].length,a=function(e,t,a,n,c){for(var r=e/a,s=[],i=0;i<a+1;i++){for(var l=[],o=0;o<a+1;o++)i<=o&&l.push({x:(o-i)*r+i*r/2+n,y:i*r+c});s.push(l)}return s}(l[0],0,t,i[0],i[1]),Object(P.jsxs)("svg",{id:"wavescape".concat(n),width:410,height:400,xmlns:"http://www.w3.org/2000/svg",children:[r?Object(P.jsxs)("g",{transform:"translate(32,20)",children:[Object(P.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(P.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:n})]}):null,Object(P.jsxs)("g",{transform:"scale(".concat(1,", ",-De,") translate(",0,",").concat(-420,")"),children:[a.length>0?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("line",{x1:a[0][0].x,x2:a[0][a[0].length-1].x,y1:a[0][0].y,y2:a[0][a[0].length-1].y,stroke:"grey",strokeWidth:"1px"}),Object(P.jsx)("line",{x1:a[0][a[0].length-1].x,x2:a[a.length-1][0].x,y1:a[0][a[0].length-1].y,y2:a[a.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(P.jsx)("line",{x1:a[0][0].x,x2:a[a.length-1][0].x,y1:a[0][0].y,y2:a[a.length-1][0].y,stroke:"grey",strokeWidth:"1px"})]}):null,c.map((function(e,t){return e.map((function(e,n){return 0===t?Object(P.jsx)("polygon",{points:"".concat(a[t][n].x,",").concat(a[t][n].y,"\n                 ").concat(a[t][n+1].x,",").concat(a[t][n+1].y," \n                 ").concat(a[t+1][n].x,",").concat(a[t+1][n].y),fill:e}):Object(P.jsx)("polygon",{points:"\n                 ".concat(a[t][n].x,",").concat(a[t][n].y,"\n                 ").concat(a[t-1][n+1].x,",").concat(a[t-1][n+1].y,"\n                 ").concat(a[t][n+1].x,",").concat(a[t][n+1].y," \n                 ").concat(a[t+1][n].x,",").concat(a[t+1][n].y,"\n                 "),fill:e})}))}))]})]})};var Pe=[[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"C\u266f",x:.866,y:-.5},{label:"D",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"E",x:-.5,y:-.866},{label:"F",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"G",x:-.866,y:.5},{label:"A\u266d",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"B\u266d",x:.5,y:.866},{label:"B",x:.866,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"T_0",x:1,y:0},{label:"T_1",x:.5,y:-.866},{label:"T_2",x:-.5,y:-.866},{label:"T_3",x:-1,y:0},{label:"T_4",x:-.5,y:.866},{label:"T_5",x:.5,y:.866}],[{label:"\u03a9",x:0,y:0},{label:"C+",x:1,y:0},{label:"C\u266f+",x:0,y:-1},{label:"D+",x:-1,y:0},{label:"D\u266f+",x:0,y:1},{label:"H_0,3",x:.5,y:.5},{label:"H_0,1",x:.5,y:-.5},{label:"H_1,2",x:-.5,y:-.5},{label:"H_2,3",x:-.5,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"C^o7",x:1,y:0},{label:"C\u266f^o7",x:-.5,y:-.866},{label:"D^o7",x:-.5,y:.866},{label:"O_0,2",x:.25,y:.433},{label:"O_0,1",x:.25,y:-.433},{label:"O_1,2",x:-.5,y:0}],[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"F",x:.866,y:-.5},{label:"B\u266d",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"A\u266d",x:-.5,y:-.866},{label:"C\u266f",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"B",x:-.866,y:.5},{label:"E",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"D",x:.5,y:.866},{label:"G",x:.866,y:.5},{label:"\u266e",x:.267,y:.462},{label:"5\u266d",x:0,y:-.533},{label:"2\u266f",x:-.267,y:.462},{label:"3\u266d",x:.462,y:-.267},{label:"4\u266f",x:-.533,y:0},{label:"\u266d",x:.462,y:.267},{label:"6\u266f",x:-.267,y:-.462},{label:"\u266f",x:0,y:.533},{label:"4\u266d",x:.267,y:-.462},{label:"3\u266f",x:-.462,y:.267},{label:"2\u266d",x:.533,y:0},{label:"5\u266f",x:-.462,y:-.267}],[{label:"\u03a9",x:0,y:0},{label:"WT_0",x:1,y:0},{label:"WT_1",x:-1,y:0}]],Se=a(466),Fe=a(470),Me=a(468),Be=a(469),Ee=a(467),Ie=a(383),Te=a(445),We=a(436),Ge=a(465);var ze=function(e){var t=e.traces,a=e.userPcvs,n=e.wavescapesData,c=Object(r.useState)(!1),s=Object(h.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)(!0),u=Object(h.a)(o,2),j=u[0],b=u[1],f=Object(r.useState)(!0),d=Object(h.a)(f,2),x=d[0],g=d[1],p=Object(r.useState)(!0),O=Object(h.a)(p,2),A=O[0],m=O[1],v=Object(r.useState)(!0),y=Object(h.a)(v,2),w=y[0],C=y[1],D=Object(r.useState)([]),S=Object(h.a)(D,2),F=S[0],M=S[1],B=function(){l(!1)},E=Object(r.useState)(!1),I=Object(h.a)(E,2),T=I[0],W=I[1],G=Object(r.useState)(null),z=Object(h.a)(G,2),R=z[0],L=z[1],N=Boolean(R),Q=i?"simple-popover":void 0;Object(r.useEffect)((function(){n.length>0?W(!0):W(!1)}),[n]),Object(r.useEffect)((function(){for(var e=[],t=1;t<7;t++){for(var n=[],c=0;c<a.length;c++)n.push({x:a[c].coeffs[t].re,y:a[c].coeffs[t].im,rosePoints:a[c].rosePoints,isDisabled:a[c].isDisabled,label:a[c].label});e.push(n)}M(e)}),[a]);var H=function(){var e=new ye.a;[1,2,3,4,5,6].forEach((function(a){var c=function(e){var a=Object(P.jsx)(Ce,{traceData:t.length>0&&x?t[e-1]:[],prototypesData:A?Pe[e-1]:[],userPcv:w?F[e-1]:[],coeffNumber:e,showNumber:j});return me.a.renderToStaticMarkup(a)}(a),r=function(e){var t=Object(P.jsx)(ke,{wavescapeMatrix:n.length>0?n[e-1]:[],wsNumber:e,showNumber:j});return me.a.renderToStaticMarkup(t)}(a);e.file("wavescapes/wavescape".concat(a,".svg"),r),e.file("fourier/space".concat(a,".svg"),c)})),e.generateAsync({type:"blob"}).then((function(e){Object(we.saveAs)(e,"images.zip")})),l(!1)};return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)($.a,{variant:"contained",size:"small",color:"primary",sx:{width:"35%",margin:"auto",marginTop:1,marginBottom:1},onClick:function(){l(!0)},children:"Export images"}),Object(P.jsxs)(Se.a,{open:i,onClose:B,children:[Object(P.jsx)(Ee.a,{children:"Saving options"}),Object(P.jsx)(Me.a,{children:Object(P.jsxs)(Be.a,{children:[Object(P.jsx)(k.a,{sx:{color:"black"},children:"Check the box in order to include the correspondent element in the exported images:"}),Object(P.jsx)(We.a,{sx:{marginLeft:2,marginTop:1},children:Object(P.jsxs)(Ie.a,{sx:{color:"black"},children:[Object(P.jsx)(le.a,{control:Object(P.jsx)(Te.a,{size:"small",checked:j,onChange:function(){b(!j)}}),label:"Coefficients numbers"}),Object(P.jsx)(le.a,{control:Object(P.jsx)(Te.a,{size:"small",checked:x,onChange:function(){g(!x)}}),label:"Full trace"}),Object(P.jsx)(le.a,{control:Object(P.jsx)(Te.a,{size:"small",checked:A,onChange:function(){m(!A)}}),label:"Prototypes"}),Object(P.jsx)(le.a,{control:Object(P.jsx)(Te.a,{size:"small",checked:w,onChange:function(){C(!w)}}),label:"Custom pitch-class vectors"})]})})]})}),Object(P.jsxs)(Fe.a,{children:[Object(P.jsx)($.a,{onClick:B,children:"Close"}),Object(P.jsx)($.a,{onClick:function(e){T?H():L(e.currentTarget)},autoFocus:!0,children:"Save"}),Object(P.jsx)(Ge.a,{id:Q,open:N,anchorEl:R,onClose:function(){L(null)},anchorOrigin:{vertical:"center",horizontal:"left"},children:Object(P.jsx)(k.a,{color:"error",sx:{p:2},children:"Upload a MIDI file"})})]})]})]})},Re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAOVBMVEVHcEz///////+lpaX////////////19fX///////9gYGD////GxsaAgICvr6/d3d1vb2+VlZWhoaHW4gGJAAAACnRSTlMAfpftYz63+h3Y0xC33AAAEDFJREFUeNrs3Ot2sjAWgGFlATtAjtz/xU79ZjK1KqJpqiZ5n78um7WasE+hPQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgDYpNQxD3/fHqO/7YRiUOqBiauiP3ThOsmyTaRy7Yz9wFGqihr4bp+U509hxDsqn+uMoSzoZjz2noExquNr79FNALCiL6rtp2SbinP5iI/3FOZFl29QRCgoxbGy+OK3XYIyft3ljgtXaycYhGA74aKofl2tO22D8/AxvgtVuuTYSCD7WcJyun3obzJzOBHsdDaYjgeDzXO++6NXMOZhVC2fgo6nL3Xc2+DknH6y7PAPkgg/RTxdPftz8zHy4iARTf8C7Dd3Fo2/mv2QuAgF9wVupnw+/W/389/zqljMTbcG7qC5p9/OfgY4j8AbDmLz7+c/ASCZIkKvwE23mdzBaKAjf47zrc2F+n+A4Aq/XyxKJNfN7GStLJByB1wZ/WedPsApR4GX66TNi/0/BcQReYpiWSJv5kxi9RBMdwR9R46du/8URGJkL/AHVffL2nxjNaOjv9PLh239iNA3BXyd/97nbf2IcpUB+qvvAyn9LcOSBzHr5rL5/jxXywJ/U/trPZfCafiCbXspI/j8ZRxDIQo1lRf9vqxAEfq+X0qL/N68JAr8Vi3/5/Nr/liCxHTggwTCV+/j/j2YmkO4YH/+Sir9LJgaB4wFPUWPxj/8/XlMLphimorP/uSCkgaf1sfcv+/H/Lx9nAnQDz1b/dq6DpRt4hpoqqP5u14IThcC+QSoK/5dpQCgE9gyx+p/rErsBTsBj3X9po/99KxOBB3TVpf9vRigF94wVpv/rQmA84CY11Zn+/89rmoGW9/8LJ2Cbmmot/86tnICd/S9/+H9f4ATcpKTe8v9mMyCcgHNDM/t/OgEMBVvef07Advyvs/2/5skCPyipefxzi3ecgG9qam3/TyeAXqDl/ecEfFNTW/k/8sIJ+KfR/f8+AYe2jS31fz8Z4W7w0LW7/6cT0Pz7Af3yT5v7P8+m9dfFhzbuf7aFtt8THFq4/71vbfkEKKn+/Y99uuGR4MT+f9HNNoPdcuLmxnnXaCvQtzoAuuSlyVZgaLsBPGdaLATV1HwD8G1t8FZgpAA8o5ubCR8pAH9wjf3V4EAB+JOXtsqAiQLwQmhqGtBV9f9f8rANTQN6CoAbXDPTACUUADd4aeVSYGQCcNPaSC/YMwHYoJtIAiSAvV6w8iQw0gFuMg0kARJA20mABHBf9Z1A1/hLoHtC5eOggQSwQ9d9JzCRAHZ4qflOoGcEtGutuA5Uwh3APldvHdgxAniAqbYOVFSAD9G1zgNHKsCHeKlzHjjwFsiDbJ2t4EQF+ChXYyvYMwN8WKixFSQAtB0CelrAJ5j6QsBEC/gMXVsIIAA0HgKEAJAQAuRQCwJA4yGACqDtKoAA0HgIIAC0HQIGAkACU8+NwMgQMIWr5VJQcQuQJNTyXkC3fJEZz5I6Xg1SvAmaaK0jBPQEgFRSRSc48SJQKltDJ0gPmKiWTrCjB0znKigD6QGTxU7wUDJKwHRVlIFcA6Sr4UJAUQL+iil9FHCkBPwdV/g/kZ6YAv7OWnYOGJYT/hwwnS97FEAGaDwHkAHazgFkgMZzABmg8RxABmg7BygyQAa+3FlQTwbIwRV7HzDyKkgOtti3g7kHyMKUeic8cBOchxTaCHbcBOehC30vaOJdoDxCmY0gTWAW5TaCNIF5FNsIdjSBudgiiwBKgLaLAEqAxosApgC5FDoJODIFyEcXeCU8chWcz1rgdQAXAbmUeR2gKAFykuKqQMZA+RQ5CjoyBsrJFlcFjoyBsimyChRqwJxMaf88XC0nM3IpbRY4vL8GNCZYq61dg/HzY7wJq7U2BOMzLJOVK2wW2OedA4awhrCaJ76gZTnj7P53jXXLN9EhwzL56MLagMx3wcvyzFzRaFmuiPV3v+NufMOkLZNdgTfCmZuAZXniQNnlNgl39nK5Sfu0ZfILhbUBU2wCXh4BjFs2ObPVZG2RkLZMdqawVwKWE/+GCLAu94h5+FmObNoyufmybgPiTcDLD0A4L+PWYLw3YXVLdDMq6fPKLxhvgtVnXwlpy2RV3G1Ahi4wKQWYjTAc3PbDqW9+xX9XeCZtmUR19IEZusCUCGAk7kuYL9j4kfiLYL6V7b2NnyQuk6aOPvD4JwdgfeQp2VrZy80PTdxLv10brGnLZFTcS0Fd/L29NALYu797724ldRf3/84PlMRlslqLGgTEMcBLI0B8+PTO53K5mdsBW8eFk5ZJUscgYIzF0wsjQNwtN28J1yFd7hftPv7ItGVyMkUdgOkNB8DHov3xIxL3yu59I3GZFHVMgmT54l+bAtYYmffPiP9ZAYjfe5pD4jIZ+aLeCIiPzSsjgHtgBKN//iCzv5kSv5C0TE4ljQLjIPCFByBupvsPe/e23agOgwGYsABB5fP7P+w0zbgkIQQwDsX2/93ttaf1mrGQJZvD14Y/pGYmM9owgZLfCgwPgPAlwK1qvvRDga5n5inaMNvkEwDhO8HhGUCsWnfFwzVPMytAvGE2ymUv+EMB4PZfdO7+N8mZXxtvmKIDQByaAcy6ZVfe/yY3c51GHCYikVAANJ8JALf/n9zc/zHFM91KvGE2yuU0qDkgAwRec/eNn4gcANNhEACHBYBduerSJADo65GxL8itw5QdAOODgQcsAdMtu+WZ0W+6QMcvuMBhAuTweGBIAIRngE0Fnb805wPA8gtqxzAIgOMCYPnS5MAA2DoMAuCkS4Cfz0lPH3UJ8MMgALyjugC3oT/zReCqDLBxGASA/9ufbB/AV/Fr20D/h1TYMAiAwzKAWVp1p+d/438sB4ALGwYBEDkD7G28/EW/oaLTfKXChkEAfJ3sNNDP3+p87gMgdJgyA+DwncAx69o1a7PaME8++YQPU+BO4AGHQWF34YjH6dPLl7PPEkHDIACOyAAe+dlcrBTp6XJWy4nFhQ5TZgC0RwbAltncfjlr/yPhwxR4P8ABdwQFPBcwvV3bT69bfshjxzCl3hG0NwDiPxkkJk28XUrWmm9UyDDlBsCRdwVPr1b1/ryIzHSCxdJ7gFzIMGFyuCv44OcCPMHvAkW++r9u5YtgVMAw22UTAAc/GeQZejOdll6mbv1mvhT/cgHDBMrhyaCjnw307Ox7uozgGzIzQaPNu/eAqYBhgmTybOBnng7W4jX74prVzjy80nF2YiR7Qr54cyDZMQA2DRMok6eDu9gB8JabrNo+XpRzSghij+TbRE9COWutU5rGH9DjEBuGCZXJ+wE6/maPDADPbn9/n6W3PyDGDLB+mGCZvCGk5m/q0ADwrOY5wmx566evC+z4d1k/TLg8XhZ8OS4ApgM52vwCV0Xzv9eMMbZ6mHBZnAb706CjM4BnlOZnYmEfeZzOSXmnfSxsGCZcDmdBJ/hehLyfHBLWrPoR4h+ktZKBw+yVxU7wWb4aKKXd+h0PI6XZPUx8qW0EVhU+HR5Dum8LrwZ8NCyGVPeB8NnAOJLdBqiqGh8OjSDZbYDfPhD2SbULPMV3A/OSVheIL4dGku6XQ/Ht4BgS/nYw2oCym4CquqAN2C3Zo6CrBlVgTDqxJuAspwHZSOwkAFVgTEnWgP+rQPcFMbjkasCqumAvMJLkPhp406IIiIcS2we86nFLQDQmuX3AqwFbQbHYxG4GwIlwTAmeBWMrKKYkt4FQBKAEQBFQeAlQVTV2AuIQSZYA2AmII9FdgB+M44AYZGKPBIw6NIIxqAQPAtAIxpJsE4hGMIqEm8CrAUfC+7lEm8CrC9aA/XSCR8FeizVgN8OpNoFYA4pfAbAGFL4CYA0ofQXAGlD4CoA1oPAVoKp6nAfsIhPeBboZcCa8h0h8BaiqBmfCe1Cy5wC/GPcFhbPJngSPapSB4XSi9wLda1EGBpOJbwLcDLgtJJRKvgREGbiHyaAE/NYzdgPDuOQ3AW5qpIAwlEEJeNWjEwxiM0kAVdWhEwyhk70bGJ3gbtn0gDgQCJPFMcCoQQrYTHIWPSBSABLA1QUpoOgEUFWEFLCNSPDVkKgCkABQBaACQApAAnhpwHbgejq7BFBVDU4EVrMZJgCkgMITQFW1jFuD1lEZnQJMDgUJDwouMZTNMeCjltEKriGyuQ/gWY1WcAXJmdwINNUT6sCVFSDlmACqqsH9oYtcli2gN6AOXGAoyxYQdeBaItMW0KuxH/iWzbcCvOkJi8AbhjKuAG8aLAJviKwrwJsOmwGzJGe6B4hFAAsAFgEsAF6HTuAlW8ICcNUT3h9a7gJw1TDOBKZ0IQvAVY17QyZU7ltADwb0gk8kZ30G8Kxl9IIPDGV+BvDsgjLggebEXwq9WYfdgDuilA5w1A+4OeSX46uhhA5w1DIKwf8kF1YA3DQoBG8MFbQDcK9GIfhDF7UDcG9AIfhNlLUDcK8nRMCX4GKOAKZaLr4VcGUWgF7LhR8N27Lnv6ouZTeDkgttAJ5bASozAiQV2wCMunIjQFJ5O8AvDKVuCBkqtwG81xcaAYZKPAF4EwG6rAgwGvNfcgRg/u/1VFoEGF3yBuBUT2XVAYYw/49aKqkblMRXVO4GYNkRgPl/pS8mAiTy/0v9UMbJkGXU/3MRUMLpsMP8v4uA7O8QEZj/kiPACP7RYf5ndJzzlpDRjPO/BTXn2wxIYpz/L2o411LQMe7/WaPlPAsBwaXf/7dWSxkWAkYztv/W6ofsCgFLaP82loJZvUVGMcq/bRrOaBkwGuXfZq1fBtI/GvhN/1j+t+g7vhFpJwEjGLt/YS6cQS0oibm49//E0g7JJwHBSP971Jx0JWAJ1f9ODaWbBIzgG0L1H6EWpNQOBxyh+oubBHRKxaDUjOY/XhJIbR0wgnH5R9RQWuuAIqz+cfU1p9MPWM3/1bj8Y+4JpFEKSM3o/T+7DrA4bwhIwcj+H1wHTh4CUjCy/yf13ZlDQApG7f9p7XDWEJCCsfgfoRnY0+fpCKxmb8Dif0AInGtfwBGm/1ANsUdKfv0tqYhR+h+tGfgcK4HVjKt/4ugQoD8qCKUgTP/faTseaWe+jmWc5lGHyv8P9DX/SQz42ce2z5/rm2ESA0fP/tBg+v9SW/M9reSHi37N92rk/j/nC0KPhP1MIjBWEDOj8Duf/jLwA62siTz5SvOD4YLUfybtcwwwCSfjpH0niJ9nH6n/fKYxwKSVlXvm3ipNjNlPRt90PKWFstJsS/nSKqF5qkPRf3ZtPfArpIVwVkrzdt6vEy808SsDav5E9E098DwircU35YlvWhPxvKHGpZ+Wvr10xDFQd2kx+WnqGx8FwXOPCz95fdvU3cDbDF3d4LrPSt82l7rrBuJ5NHRdfcHMZ67v27ZtmubiNU3Ttm2PaQcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIB/7cEBCQAAAICg/6+DdqgAAAAAAAAAAAAAAAAAC9Cnkh50vLqIAAAAAElFTkSuQmCC",Le=a(476);var Ne=function(){var e=100;return Object(P.jsxs)(x.a,{sx:{marginTop:1,textAlign:"center"},children:[Object(P.jsxs)(g.a,{sx:{justifyContent:"center"},direction:"row",children:[Object(P.jsx)("img",{width:e,height:e,src:Re}),Object(P.jsx)("img",{width:e,height:e,src:Re}),Object(P.jsx)("img",{width:e,height:e,src:Re})]}),Object(P.jsx)(k.a,{children:"Project \u201cEnabling interactive music visualization for a wider community\u201d"}),Object(P.jsxs)(g.a,{sx:{justifyContent:"center"},direction:"row",children:[Object(P.jsx)(k.a,{sx:{marginRight:1},children:"Project lead: Fabian C. Moss; Daniel Harasim"}),Object(P.jsx)("span",{children:"\u2013"}),Object(P.jsx)(k.a,{sx:{marginLeft:1},children:"Developer: Giovanni Affatato"})]}),Object(P.jsxs)(g.a,{sx:{justifyContent:"center"},direction:"row",children:[Object(P.jsx)(Le.a,{sx:{marginRight:1},href:"https://github.com/DCMLab/MIDFT",children:"GitHub repo"}),Object(P.jsx)("span",{children:"\u2022"}),Object(P.jsx)(Le.a,{sx:{marginLeft:1,marginRight:1},href:"https://www.epfl.ch/labs/dcml/",children:"DCML page"}),Object(P.jsx)("span",{children:"\u2022"}),Object(P.jsx)(k.a,{sx:{marginLeft:1},href:"",children:"Copyright"})]})]})},Qe=a(55),He=a(184),Je=["to"];var Ve={overrides:{h1:{component:k.a,props:{gutterBottom:!0,variant:"h4",component:"h1"}},h2:{component:k.a,props:{gutterBottom:!0,variant:"h6",component:"h2"}},h3:{component:k.a,props:{gutterBottom:!0,variant:"subtitle1"}},h4:{component:k.a,props:{gutterBottom:!0,variant:"caption",paragraph:!0}},p:{component:k.a,props:{paragraph:!0}},a:{component:function(e){e.to;var t=Object(Qe.a)(e,Je),a=r.useRef(null);return isNaN(parseInt(t.href[1]))?Object(P.jsx)(Le.a,Object(j.a)({},t)):Object(P.jsx)(Le.a,Object(j.a)(Object(j.a)({ref:a,onClick:function(e){e.preventDefault(),a.current.scrollIntoView({behavior:"smooth"})}},t),{},{id:"reference".concat(t.href[1]),href:"/#".concat(t.href[1])}))}},li:{component:function(e){return Object(P.jsx)(x.a,Object(j.a)({component:"li",sx:{mt:1,typography:"body1"}},e))}}}};function Ye(e){return Object(P.jsx)(He.a,Object(j.a)({options:Ve},e))}var Ke=a.p+"static/media/HomeMarkdown.4682608b.md";function Ze(e){var t=e.setOpen,a=e.setInAnalysisPage,n=Object(r.useState)(""),c=Object(h.a)(n,2),s=c[0],i=c[1];return Object(r.useEffect)((function(){a(!1),t(!1),fetch(Ke).then((function(e){return e.text()})).then((function(e){i(e)}))}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(ge.a,{sx:{margin:"auto",maxWidth:"1200px"},children:Object(P.jsx)(x.a,{sx:{padding:3},children:Object(P.jsx)(Ye,{children:s})})}),Object(P.jsx)(Ne,{})]})}var qe=a.p+"static/media/TheoryMarkdown.26c0a4ee.md",Ue=a(144);a(367);function Xe(e){var t=e.setOpen,a=e.setInAnalysisPage,n=Object(r.useState)(""),c=Object(h.a)(n,2),s=c[0],i=c[1];return Object(r.useEffect)((function(){a(!1),t(!1),fetch(qe).then((function(e){return e.text()})).then((function(e){i(e)}))}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(ge.a,{sx:{margin:"auto",maxWidth:"1200px"},children:Object(P.jsxs)(x.a,{sx:{padding:3},children:[Object(P.jsx)(Ye,{children:s}),Object(P.jsx)(Ye,{children:"TEST Given a **formula** below"}),Object(P.jsx)(Ue.a,{math:"s = ut + \\frac{1}{2}at^{2}",block:!0}),Object(P.jsx)(Ye,{children:"TEST Given this **inline formula** "}),Object(P.jsx)(Ue.a,{math:" s = ut + \\frac{1}{2}at^{2}"}),Object(P.jsx)(Ye,{children:" I can continue writing on the same line"})]})}),Object(P.jsx)(Ne,{})]})}var _e=Math.sin(Math.PI/3),$e=function(e){var t,a=e.wsNumber,n=e.wavescapeMatrix,c=e.currentWavescapeSubdiv,s=e.wavescapeWidth,i=Object(r.useRef)(null),l=Object(r.useState)([]),o=Object(h.a)(l,2),u=o[0],j=o[1],b=s-10,f=s,d=Object(r.useState)(3),x=Object(h.a)(d,2),g=x[0],p=x[1];return Object(r.useEffect)((function(){b=s,f=s,p(g<1?1:Math.floor(.01*s))}),[s]),Object(r.useEffect)((function(){var e,a=i.current,c=a.getContext("2d"),r=[10,10],s=[a.width-r[0],a.height-r[1]];n&&(e=n[0].length,c.clearRect(0,0,c.canvas.width,c.canvas.height),t=function(e,t,a,n,c){for(var r=e/a,s=[],i=0;i<a+1;i++){for(var l=[],o=0;o<a+1;o++)i<=o&&l.push({x:(o-i)*r+i*r/2+n,y:i*r+c});s.push(l)}return s}(s[0],0,e,r[0],r[1]),j(t),function(e,t,a){for(var n=0;n<e.length-1;n++)for(var c=0;c<e[n].length-1;c++)0===n?(t.beginPath(),t.moveTo(e[n][c].x,e[n][c].y),t.lineTo(e[n][c+1].x,e[n][c+1].y),t.lineTo(e[n+1][c].x,e[n+1][c].y),t.fillStyle=a[n][c],t.fill()):(t.beginPath(),t.moveTo(e[n][c].x,e[n][c].y),t.lineTo(e[n-1][c+1].x,e[n-1][c+1].y),t.lineTo(e[n][c+1].x,e[n][c+1].y),t.lineTo(e[n+1][c].x,e[n+1][c].y),t.fillStyle=a[n][c],t.fill())}(t,c,n))}),[n,b,f]),Object(P.jsxs)("svg",{id:"wavescape".concat(a),width:b+10,height:f,xmlns:"http://www.w3.org/2000/svg",children:[Object(P.jsxs)("g",{transform:"translate(".concat(.06*b,",").concat(.1*b,")"),children:[Object(P.jsx)("circle",{cx:"5%",cy:"1%",r:"".concat(b/100*2.8,"px"),fill:"black"}),Object(P.jsx)("text",{fontSize:"".concat(b/100*5.2,"px"),textAnchor:"middle",x:"5%",y:"2.8%",fill:"white",children:a})]}),Object(P.jsxs)("g",{transform:"scale(".concat(1,", ",-_e,") translate(",0,",").concat(-f,")"),children:[Object(P.jsx)("foreignObject",{x:0,y:0,width:b,height:f,children:Object(P.jsx)("canvas",{width:b,height:f,ref:i})}),u.length>0?u[0].map((function(e,t){return Object(P.jsx)("line",{x1:e.x,x2:e.x,y1:e.y-g,y2:e.y+g,stroke:"grey",strokeWidth:"1px"},"tick".concat(t))})):null,u.length>0&&u[0].length>0?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("line",{x1:u[0][0].x,x2:u[0][u[0].length-1].x,y1:u[0][0].y,y2:u[0][u[0].length-1].y,stroke:"grey",strokeWidth:"2px"}),Object(P.jsx)("line",{x1:u[0][u[0].length-1].x,x2:u[u.length-1][0].x,y1:u[0][u[0].length-1].y,y2:u[u.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(P.jsx)("line",{x1:u[0][0].x,x2:u[u.length-1][0].x,y1:u[0][0].y,y2:u[u.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(P.jsx)("circle",{cx:(u[0][c].x+u[0][c+1].x)/2,cy:(u[0][c].y+u[0][c+1].y)/2,r:.01*b,fill:"white"}),Object(P.jsx)("circle",{cx:(u[0][c].x+u[0][c+1].x)/2,cy:(u[0][c].y+u[0][c+1].y)/2,r:.01*b,stroke:"black",strokeWidth:1,fill:"transparent"})]}):null]})]})};var et=function(e){var t=e.wavescapesData,a=e.currentWavescapeSubdiv,n=e.elemsWidth;return Object(P.jsx)(x.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:t.length>0?t.map((function(e,t){return Object(P.jsx)($e,{wsNumber:t+1,wavescapeMatrix:e,currentWavescapeSubdiv:a,wavescapeWidth:n},"w.".concat(t))})):Object(P.jsx)(k.a,{color:"error",children:"No midi file uploaded"})})},tt=a(440),at=null;var nt=function(e){var t,a=e.coeffNumber,n=e.protoDataCoeff,c=e.fullTrace,s=e.traceDataCoeff,i=e.userPcvsCoeff,l=e.currentSubdiv,u=e.performanceCoeff,j=e.targetCircleWidth,b=e.showMagAndPhase,f=e.showFullTrace,d=Object(r.useRef)(null),p=Object(r.useState)({mu:0,phi:0}),O=Object(h.a)(p,2),A=O[0],m=O[1],v=445,y=v,w=45,C=177.5,D=.01;function S(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=180*Math.atan2(t,e)/Math.PI,c=Math.sqrt(e*e+t*t);return a&&(c/=C),n=Math.round(n+Number.EPSILON),{mu:c=Math.round(100*(c+Number.EPSILON))/100,phi:n}}function F(){var e=d.current.getContext("2d");e.fillStyle="rgba(0, 0, 0, 0.1)",s.forEach((function(t){e.beginPath(),e.arc(t.x*C,-t.y*C,2.225,0,2*Math.PI,!0),e.fill()}))}return Object(r.useEffect)((function(){var e=d.current,t=e.getContext("2d"),a=Math.floor(C*devicePixelRatio),n=t.createImageData(2*a,2*a),c=n.data;if(e.width=v*devicePixelRatio,e.height=y*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width="445px",e.style.height="445px",!at){for(var r=-a;r<a;r++)for(var i=-a;i<a;i++){var l=Math.sqrt(r*r+i*i);if(!(l>a)){var o=4*(r+a+(i+a)*(2*a)),u=V(r,i,l/a);c[o]=u.r,c[o+1]=u.g,c[o+2]=u.b,c[o+3]=u.a}}at=n}t.putImageData(at,0,0),f&&s&&(t.save(),t.translate(177.5,177.5),F(),t.restore())}),[v,y,C,s,f]),Object(r.useEffect)((function(){if(s&&s[l]){var e=s[l].x,t=s[l].y;m(S(e,t))}}),[l,s]),Object(r.useEffect)((function(){d.current.getContext("2d").getImageData(0,0,1,1)}),[]),Object(r.useEffect)((function(){if(s){var e=d.current.getContext("2d");e.save(),e.translate(177.5,177.5),F(),e.restore()}}),[c]),Object(P.jsx)(x.a,{sx:{marginBottom:2},children:Object(P.jsxs)("svg",{width:j,height:j,viewBox:"0 0 ".concat(v," ").concat(y),xmlns:"http://www.w3.org/2000/svg",children:[Object(P.jsxs)("g",{transform:"translate(32,8)",children:[Object(P.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(P.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:a})]}),Object(P.jsx)("g",{transform:"translate(".concat(125,",0)"),children:b?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("text",{x:"120",y:"23",style:{fontSize:"24px"},children:"\u03c6: ".concat(A.phi,"\xb0")}),Object(P.jsx)("text",{x:"34",y:"24",style:{fontSize:"24px"},children:"\u03bc: ".concat(A.mu)})]}):null}),Object(P.jsxs)("g",{transform:"translate(0,".concat(15,")"),children:[Object(P.jsx)("foreignObject",{x:w,y:w,width:v,height:y,children:Object(P.jsx)("canvas",{id:"circle".concat(a),style:{zIndex:"-1"},width:v,height:y,ref:d})}),Object(P.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(P.jsx)("path",{fill:"azure",d:Q.a().innerRadius(176.5).outerRadius(180.5).startAngle(0).endAngle(2*Math.PI)()}),n?n.map((function(e,t){return function(e,t){var a=Q.a().innerRadius(4.45).outerRadius(6.675).startAngle(0).endAngle(2*Math.PI),n="",c="",r=!1;if(e.label.includes("_")||e.label.includes("^"))for(var s=0;s<e.label.length;s++)"_"===e.label[s]&&(n=e.label.slice(0,s),c=e.label.slice(s+1,e.label.length),r=!0),"^"===e.label[s]&&(n=e.label.slice(0,s),c=e.label.slice(s+1,e.label.length));else n=e.label;var i=18*Math.sign(e.x),l=18*-Math.sign(e.y)+7;return"\u266f"===n&&(l-=3),"WT"===n&&"1"===c&&(i*=1.2),"WT"===n&&"0"===c&&(i*=1.4),"C"===n&&"o7"===c&&(i*=1.2),"O"===n&&"1,2"===c&&(l*=1.1),"C\u266f"===n&&"o7"===c&&(i*=1.1,l*=1.1),"D"===n&&"o7"===c&&(i*=.7,l*=.7),"H"===n&&"2,3"===c&&(i*=1.2,l*=1.2),"H"===n&&"1,2"===c&&(i*=.7,l*=.7),"\u03a9"===n&&(i=15,l=5),Object(P.jsxs)("g",{transform:"translate(".concat(e.x*C,",").concat(-e.y*C,")"),children:[Object(P.jsx)("path",{fill:"grey",d:a()},t),Object(P.jsxs)("text",{textAnchor:"middle",dx:i,dy:l,fontSize:"20px",children:[n,r?Object(P.jsx)("tspan",{fontSize:15,baselineShift:"sub",children:c}):Object(P.jsx)("tspan",{fontSize:15,baselineShift:"super",children:c})]})]},"p.".concat(t))}(e,t)})):null,0===u.x&&0===u.y?null:(t=u,Object(P.jsxs)("g",{transform:"translate(".concat(t.x*C,",").concat(-t.y*C,")"),children:[Object(P.jsx)("line",{x1:"0",x2:"0",y1:"7",y2:"-7",stroke:"black",strokeWidth:"1.5"}),Object(P.jsx)("line",{x1:"7",x2:"-7",y1:"0",y2:"0",stroke:"black",strokeWidth:"1.5"})]})),i?i.map((function(e,t){if(!e.isDisabled)return function(e,t,a,n,c,r){var s,i=S(a,n,!0),l=40;return Object(P.jsx)(tt.a,{placement:"top",arrow:!0,title:Object(P.jsxs)(g.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[Object(P.jsxs)("svg",{width:l,height:l,viewBox:"0 0 ".concat(l," ").concat(l),children:[Object(P.jsx)("circle",{cx:20,cy:20,r:20,strokeWidth:"1",fill:"#FFF",fillOpacity:1}),Object(P.jsx)("polyline",{transform:"translate(".concat(20,",").concat(20,") scale(",1.8,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]}),Object(P.jsxs)(g.a,{children:[Object(P.jsx)(k.a,{children:e}),Object(P.jsx)(k.a,{children:"\u03bc: ".concat(i.mu," \u03c6: ").concat(-i.phi,"\xb0")})]})]}),children:Object(P.jsxs)("g",{children:[Object(P.jsx)("polyline",(s={transform:"translate(".concat(a,",").concat(n,") scale(").concat(c,")"),fill:"none",stroke:"black",strokeWidth:"1px"},Object(o.a)(s,"fill","#FFF"),Object(o.a)(s,"fillOpacity",0),Object(o.a)(s,"points",t),s)),Object(P.jsx)("polyline",{transform:"translate(".concat(a,",").concat(n,") scale(").concat(c,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]})},"rtt.".concat(r))}(e.label,e.rosePoints,e.x*C,-e.y*C,.7,t)})):null,s?function(e){var t=Q.a().innerRadius(0).outerRadius(e*v/2).startAngle(0).endAngle(2*Math.PI),a=Q.a().innerRadius(e*v/2).outerRadius((e+.005)*v/2).startAngle(0).endAngle(2*Math.PI),n=[];n.push(1),n.push(.5);for(var c=2;c<7;c++)n.push(Math.round(100*(n[c-1]-.1))/100);return(l<7?s.slice(0,l+1):s.slice(l-7+1,l+1)).reverse().map((function(e,c){return Object(P.jsxs)("g",{children:[Object(P.jsx)("path",{transform:"translate(".concat(e.x*C,",").concat(-e.y*C,")"),fill:"white",fillOpacity:n[c],d:t()},c),Object(P.jsx)("path",{transform:"translate(".concat(e.x*C,",").concat(-e.y*C,")"),fill:"black",fillOpacity:n[c],d:a()},"t.".concat(c))]},"g.".concat(c))}))}(D):null]})]})]})})};var ct=function(e){var t=e.fullTraces,a=e.coeffTracesData,n=e.showPrototypes,c=e.showMagAndPhase,s=e.userPcvs,i=e.currentSubdiv,l=e.midiDevNotesDftCoeffs,o=e.elemsWidth,u=e.showFullTrace,j=Object(r.useState)(Pe),b=Object(h.a)(j,2),f=b[0],d=b[1],g=Object(r.useState)([]),p=Object(h.a)(g,2),O=p[0],A=p[1];return Object(r.useEffect)((function(){d(n?Pe:[])}),[n]),Object(r.useEffect)((function(){for(var e=[],t=1;t<7;t++){for(var a=[],n=0;n<s.length;n++)a.push({x:s[n].coeffs[t].re,y:s[n].coeffs[t].im,rosePoints:s[n].rosePoints,isDisabled:s[n].isDisabled,label:s[n].label});e.push(a)}A(e)}),[s]),Object(P.jsx)(x.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[1,2,3,4,5,6].map((function(e){return Object(P.jsx)(nt,{coeffNumber:e,protoDataCoeff:f[e-1],fullTrace:t[e-1],traceDataCoeff:a[e-1],userPcvsCoeff:O[e-1],currentSubdiv:i,performanceCoeff:l[e],targetCircleWidth:o,showMagAndPhase:c,showFullTrace:u},"w.".concat(e))}))})},rt=a(473),st=a(449),it=a(450),lt=a(441),ot=a(446),ut=a(471),ht=a(472),jt=a(146),bt=a.n(jt),ft=Object(D.a)(X.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(j.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));var dt,xt,gt=function(e){var t=e.fileName,a=e.setInAnalysisPage,n=e.open,c=e.setOpen,s=e.wavescapesData,i=e.fullTraces,l=e.coeffTracesData,o=e.currentSubdiv,u=e.currentWavescapeSubdiv,j=e.userPcvs,b=Object(r.useState)(!0),f=Object(h.a)(b,2),g=f[0],p=f[1],O=Object(r.useState)(!0),A=Object(h.a)(O,2),m=A[0],v=A[1],y=Object(r.useState)(!0),w=Object(h.a)(y,2),D=w[0],S=w[1],F=Object(r.useState)(L([0,0,0,0,0,0,0,0,0,0,0,0]).map((function(e){return{x:e.re,y:e.im}}))),M=Object(h.a)(F,2),B=M[0],E=M[1],T=Object(r.useRef)(null),W=Object(r.useState)(100),G=Object(h.a)(W,2),z=G[0],R=G[1],N=Object(r.useState)(3),Q=Object(h.a)(N,2),H=Q[0],J=Q[1],V=Object(r.useState)(440),Y=Object(h.a)(V,2),K=Y[0],Z=Y[1];function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=10;T.current&&Z((T.current.clientWidth+e)/H-t)}function U(){q(0)}return Object(r.useEffect)((function(){a(!0),c(!0),q(),window.addEventListener("resize",U)}),[]),Object(r.useEffect)((function(){S(!0)}),[i]),Object(r.useEffect)((function(){q(),window.addEventListener("resize",U)}),[H]),Object(r.useEffect)((function(){q(n?-400:400)}),[n]),Object(r.useEffect)((function(){q()}),[z]),Object(r.useEffect)((function(){var e=[],t=new d.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function a(a){var n=a.data[0];if(144===n||128===n){var c=d.a(a.data[1],"midi").toNote();if(128!==n||e.includes(c)){var r=Math.round(.05*a.data[2]);switch(n){case 144:r>0?(t.triggerAttack(c,d.f(),r),e.push(c)):(t.triggerRelease(c,d.f()),e=e.filter((function(e){return e!==c})));break;case 128:t.triggerRelease(c,d.f()),e=e.filter((function(e){return e!==c}))}!function(e){var t=[0,0,0,0,0,0,0,0,0,0,0,0];e.forEach((function(e){switch(e.includes("#")?e.slice(0,2):e.slice(0,1)){case"C":t[0]+=1;break;case"C#":t[1]+=1;break;case"D":t[2]+=1;break;case"D#":t[3]+=1;break;case"E":t[4]+=1;break;case"F":t[5]+=1;break;case"F#":t[6]+=1;break;case"G":t[7]+=1;break;case"G#":t[8]+=1;break;case"A":t[9]+=1;break;case"A#":t[10]+=1;break;case"B":t[11]+=1}}));var a=L(t);a=a.map((function(e){return{x:e.re,y:e.im}})),E(a)}(e)}}}function n(e){console.log("Name: ".concat(e.port.name,", Brand: ").concat(e.port.manufacturer,", State: ").concat(e.port.state,", Type: ").concat(e.port.type))}t.volume.value=-30,navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then((function(e){e.onstatechange=n,e.inputs.forEach((function(e){e.onmidimessage=a}))}),(function(){console.log("Could not connect MIDI")}))}),[]),Object(P.jsxs)(x.a,{children:[Object(P.jsxs)(x.a,{sx:{padding:0,margin:"auto",marginBottom:"70px",width:"".concat(z,"%")},children:[Object(P.jsxs)(ot.a,{defaultExpanded:!0,children:[Object(P.jsx)(ut.a,{expandIcon:Object(P.jsx)(bt.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(P.jsx)(k.a,{variant:"h6",children:"Wavescapes"})}),Object(P.jsx)(ht.a,{ref:T,sx:{padding:0},children:Object(P.jsx)(et,{wavescapesData:s,currentWavescapeSubdiv:u,elemsWidth:K})})]}),Object(P.jsxs)(ot.a,{defaultExpanded:!0,children:[Object(P.jsx)(ut.a,{expandIcon:Object(P.jsx)(bt.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(P.jsx)(k.a,{variant:"h6",children:"Fourier Coefficient Spaces"})}),Object(P.jsx)(ht.a,{sx:{padding:0},children:Object(P.jsx)(ct,{fullTraces:i,coeffTracesData:l,currentSubdiv:o,showPrototypes:g,showMagAndPhase:m,showFullTrace:D,userPcvs:j,midiDevNotesDftCoeffs:B,elemsWidth:K})})]})]}),Object(P.jsx)(ft,{position:"fixed",open:n,color:"secondary",sx:{top:"auto",bottom:0,maxHeight:"74px"},children:Object(P.jsxs)(_.a,{children:[Object(P.jsx)(x.a,{sx:{minWidth:120},children:Object(P.jsxs)(ie.a,{size:"small",variant:"standard",fullWidth:!0,children:[Object(P.jsx)(st.a,{children:"Layout"}),Object(P.jsxs)(lt.a,{value:H,label:"Layout",onChange:function(e){R(100),J(e.target.value)},children:[Object(P.jsx)(it.a,{value:6,children:"1x6"}),Object(P.jsx)(it.a,{value:3,children:"2x3"}),Object(P.jsx)(it.a,{value:2,children:"3x2"}),Object(P.jsx)(it.a,{value:1,children:"6x1"})]})]})}),Object(P.jsx)(I,{fileName:t,currentWavescapeSubdiv:u}),Object(P.jsx)(x.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5%",maxWidth:"100px",justifyContent:"space-evenly"},children:Object(P.jsxs)(Ie.a,{children:[Object(P.jsx)(le.a,{control:Object(P.jsx)(rt.a,{onChange:function(){S(!D)},checked:D,size:"small"}),label:Object(P.jsx)(k.a,{noWrap:!0,children:"Show full trace"})}),Object(P.jsx)(le.a,{control:Object(P.jsx)(rt.a,{onChange:function(){p(!g)},checked:g,size:"small"}),label:Object(P.jsx)(k.a,{noWrap:!0,children:"Show Prototypes"})}),Object(P.jsx)(le.a,{control:Object(P.jsx)(rt.a,{onChange:function(){v(!m)},checked:m,size:"small"}),label:Object(P.jsx)(k.a,{noWrap:!0,children:"Show \u03bc and \u03c6"})})]})}),Object(P.jsxs)(x.a,{sx:{minWidth:"20%",padding:"1% 3% 1% 2%",marginTop:1},children:[Object(P.jsx)(k.a,{children:"Plots size"}),Object(P.jsx)(C.a,{min:20,max:100,value:z,defaultValue:100,"aria-label":"Plots size",valueLabelDisplay:"auto",onChange:function(e,t){R(t)},marks:[{value:20,label:"20%"},{value:50,label:"50%"},{value:100,label:"100%"}]})]})]})})]})},pt=a(30),Ot=a(437),At=a(452),mt=a(186),vt=a.n(mt),yt=a(438),wt=80,Ct=Object(D.a)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(j.a)({flexGrow:1,padding:t.spacing(3),backgroundColor:"#e0e0e0",transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(400,"px")},a&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0,backgroundColor:"#e0e0e0"})})),Dt=Object(D.a)("div")((function(e){var t=e.theme;return Object(j.a)(Object(j.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"space-between"})}));var kt=function(){var e,t=Object(pt.a)(),a=Object(r.useState)(!1),n=Object(h.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(""),l=Object(h.a)(i,2),j=l[0],d=l[1],p=Object(r.useState)(!1),O=Object(h.a)(p,2),A=O[0],m=O[1],v=Object(r.useState)([]),y=Object(h.a)(v,2),D=y[0],S=y[1],F=Object(r.useState)([]),M=Object(h.a)(F,2),E=M[0],I=M[1],T=Object(r.useState)([]),W=Object(h.a)(T,2),G=W[0],R=W[1],Q=Object(r.useState)(0),H=Object(h.a)(Q,2),J=H[0],V=H[1],X=Object(r.useState)(1),_=Object(h.a)(X,2),ee=_[0],te=_[1],ne=Object(r.useState)({noteResolutionValue:1,seconds:1.5,useSeconds:!1}),re=Object(h.a)(ne,2),se=re[0],ie=re[1],le=Object(r.useState)(10),ue=Object(h.a)(le,2),he=ue[0],je=ue[1],be=Object(r.useState)(1),fe=Object(h.a)(be,2),xe=fe[0],pe=fe[1],Ae=Object(r.useState)(!1),me=Object(h.a)(Ae,2),ve=me[0],ye=me[1],we=Object(r.useState)("1"),Ce=Object(h.a)(we,2),De=Ce[0],ke=Ce[1],Pe=Object(r.useState)([]),Se=Object(h.a)(Pe,2),Fe=Se[0],Me=Se[1],Be=Object(r.useRef)(null),Ee=Object(r.useState)(!1),Ie=Object(h.a)(Ee,2),Te=Ie[0],We=Ie[1],Ge=Object(r.useState)([]),Re=Object(h.a)(Ge,2),Le=Re[0],Ne=Re[1];function Qe(e){var t,a=[];try{t=function(e){for(var t=[],a=!1,n=!1,c=0;c<e.length;c++)if("{"!==e[c]&&"("!==e[c]||(a=!0,"{"===e[c]&&(n=!0)),a){for(var r=[],s=c+1;"}"!==e[s]&&")"!==e[s];s++){if(","!==e[s]&&"."!==e[s]&&" "!==e[s]&&isNaN(parseFloat(e[s])))throw new Error("Found NaN");" "!==e[s]&&r.push(e[s])}if(""===(r=r.join("")))throw new Error("Empty input");for(var i=[],l=0,o=0;o<r.length;o++){if(","===r[o]){var u=r.slice(o-l,o);if(0===u.length)throw new Error("Two consecutive comas");i.push(+u),l=-1}l++}var h=r.slice(r.length-l,r.length);if(0===h.length)throw new Error("Missing last number");if(i.push(+h),n){for(var j=[0,0,0,0,0,0,0,0,0,0,0,0],b=0;b<i.length;b++){if(i[b]<0||i[b]>=12)throw new Error("Set notation: out of range");j[i[b]]+=1}t.push(j)}else{if(12!==i.length)throw new Error("Vectorial notation: missing elements");t.push(i)}a=!1,n=!1,c+=l}if(0===t.length)throw new Error("Invalid input");return t}(e)}catch(n){return console.log(n.message),void We(!0)}t.forEach((function(e){return a.push({label:"(".concat(e,")"),isDisabled:!1,coeffs:L(e,!0,!0,!1),rosePoints:[],n:-1,d:-1})})),Fe.map((function(e){return e.label})).forEach((function(e){a=a.filter((function(t){return t.label!==e}))})),a.forEach((function(e){for(var t=!1,a=0;a<Le.length&&!t;a++)for(var n=0;n<Le[a].length&&!t;n++)Le[a][n].usable&&!Le[a][n].used&&(t=!0,e.rosePoints=Le[a][n].points,Le[a][n].used=!0,e.n=Le[a][n].n,e.d=Le[a][n].d)})),Me([].concat(Object(u.a)(Fe),Object(u.a)(a)))}return Object(r.useEffect)((function(){var e=[];1===ee?R(E):(E.forEach((function(t){for(var a=[],n=0;n<=t.length-ee;n++){for(var c={x:0,y:0},r=0;r<ee;r++)c.x+=t[n+r].x,c.y+=t[n+r].y;a.push(c)}a.forEach((function(e){e.x=e.x/ee,e.y=e.y/ee})),e.push(a)})),R(e))}),[ee,E]),Object(r.useEffect)((function(){var e=document.getElementById("file").files[0];if(e){var t=new FileReader;t.readAsArrayBuffer(e),t.onload=function(t){try{var a=function(e){var t=new z.Midi(e),a=t.header.tempos.map((function(e){return Math.round(e.bpm)})),n=Math.max.apply(Math,Object(u.a)(a)),c=t.tracks.filter((function(e){return!1===e.instrument.percussion}));return t.tracks=c,{midiData:t,midiBpm:n}}(t.target.result),n=a.midiData,c=a.midiBpm;wt=c,dt=n,xt=e.name;var r=dt.duration/50;je(r),S(function(e){for(var t=[],a=0;a<6;a++){for(var n=[],c=0;c<e.length;c++){for(var r=[],s=0;s<e[c].length;s++)r.push("");n.push(r)}t.push(n)}for(var i=0;i<e.length;i++)for(var l=0;l<e[i].length;l++)for(var o=1;o<e[i][l].length;o++)t[o-1][i][l]=Y(e[i][l][o]);return t}(function(e,t){var a=[];e.tracks.forEach((function(n){return a.push(q(n.notes,t,e.duration))}));for(var n=[],c=0;c<a[0].length;c++)n.push(new K);for(var r=0;r<a.length;r++)for(var s=0;s<a[r].length;s++)for(var i=0;i<a[r][s].length;i++){var l=a[r][s][i],o=l.pitch,u=l.duration;n[s].addNoteDuration(o,u)}var h=n.map((function(e){return L(e.getPcvAsArray())})),j=[];j.push(h);for(var b=j[0].length,f=j[0].length,d=2,x=1;x<b;x++){for(var g=[],p=0;p+d<=f;p++){var O=j[0].slice(p,p+d);g.push(N(O))}d++,j.push(g)}return j}(n,r)));var s=Z(n,se,wt),i=s.tracesData,l=s.resolution;pe(l),I(i),B(dt,l,V),te(1),ke("1")}catch(o){return void console.log(o)}}}}),[j]),Object(r.useEffect)((function(){for(var e=[],t=1;t<=7;t++){for(var a=[],n=1;n<=7;n++){var c={n:n,d:t,used:!1,usable:!0,points:[]};n%t===0&&1!==t&&(c.usable=!1),!0===c.usable&&(c.points=U(n,t)),a.push(c)}e.push(a)}e[0][0].usable=!1,Ne(e);var r=[[1,0,0,0,1,0,0,1,0,0,0,0],[1,0,0,1,0,0,0,1,0,0,0,0],[1,0,0,1,0,0,1,0,0,0,0,0]].map((function(e){return{label:"(".concat(e.toString(),")"),isDisabled:!1,coeffs:L(e,!0,!0,!1),rosePoints:[],n:-1,d:-1}}));r.forEach((function(t){for(var a=!1,n=0;n<e.length&&!a;n++)for(var c=0;c<e[n].length&&!a;c++)e[n][c].usable&&!e[n][c].used&&(a=!0,t.rosePoints=e[n][c].points,e[n][c].used=!0,t.n=e[n][c].n,t.d=e[n][c].d)})),r[1].isDisabled=!0,r[2].isDisabled=!0,Me(r)}),[]),Object(P.jsxs)(b.a,{children:[Object(P.jsx)(Ot.a,{}),Object(P.jsx)(ce,{open:c,setOpen:s,setInAnalysisPage:m,inAnalysisPage:A}),Object(P.jsxs)(x.a,{sx:{display:"flex"},children:[Object(P.jsxs)(At.a,{sx:{width:400,flexShrink:0,"& .MuiDrawer-paper":{width:400,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:c,children:[Object(P.jsxs)(Dt,{children:[Object(P.jsxs)(g.a,{sx:{flexGrow:"2",maxWidth:"85%",marginBottom:1},children:[Object(P.jsx)(k.a,{sx:{fontWeight:"bold"},children:"Upload a midi file"}),Object(P.jsxs)(g.a,{spacing:2,direction:"row",sx:{alignItems:"center"},children:[Object(P.jsxs)("label",{htmlFor:"file",children:[Object(P.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"file",value:j,onChange:function(e){return d(e.target.value)}}),Object(P.jsx)($.a,{variant:"contained",size:"small",color:"primary",component:"span",children:"Upload"})]}),Object(P.jsx)(k.a,{noWrap:!0,color:xt?"primary":"error",children:D.length>0?xt:"No midi file uploaded"})]})]}),Object(P.jsx)(w.a,{onClick:function(){s(!1)},children:"ltr"===t.direction?Object(P.jsx)(vt.a,{}):Object(P.jsx)(ae.a,{})})]}),Object(P.jsx)(yt.a,{}),Object(P.jsx)(k.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Time resolution"}),Object(P.jsx)(x.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5% 0 2%",width:"90%",justifyContent:"space-evenly"},children:Object(P.jsx)(de,{setResolutionMode:ie,resolutionMode:se,retriggerAnalysis:function(){if(null!=dt){var e=Z(dt,se,wt),t=e.tracesData,a=e.resolution;pe(a),I(t),te(1),ke("1"),B(dt,a,V)}}})}),Object(P.jsx)(yt.a,{}),Object(P.jsx)(k.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Window Length"}),Object(P.jsxs)(g.a,{sx:{margin:"auto",marginBottom:1,marginTop:1},direction:"row",children:[Object(P.jsx)(k.a,{sx:{marginLeft:1,paddingTop:"5px",marginRight:"5px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"="}),Object(P.jsx)(oe.a,{inputProps:{style:{textAlign:"center"}},sx:{width:"15%"},error:ve,onChange:function(e){ke(e.target.value);var t=parseInt(e.target.value);isNaN(t)?ye(!0):(ye(!1),E.length>0?t<1?(ye(!0),te(1)):t>E[0].length?(ye(!0),te(E[0].length)):te(t):te(t))},value:De,variant:"standard"}),Object(P.jsx)(k.a,{sx:{marginLeft:1,paddingTop:"5px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"\xd7 time resolution"})]}),Object(P.jsx)(C.a,{sx:{margin:"auto",width:"80%",marginBottom:3,marginTop:1,heigth:"10%"},value:ee,onChange:function(e,t){te(t),ke(t)},"aria-label":"Window Length",defaultValue:1,valueLabelDisplay:"auto",min:1,max:E.length>0?E[0].length:100,marks:E.length>0?[{value:1,label:"1"},{value:E[0].length,label:"".concat(E[0].length)}]:[{value:1,label:"1"},{value:100,label:"100"}]}),Object(P.jsx)(yt.a,{}),Object(P.jsx)(k.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Custom pitch-class vectors"}),Object(P.jsxs)(x.a,{sx:{flexDirection:"column",display:"flex",alignItems:"center",margin:"3% 5%",height:"40%",maxHeight:"350px",justifyContent:"flex-start"},component:"form",noValidate:!0,autoComplete:"off",children:[Object(P.jsx)(oe.a,(e={fullWidth:!0,label:'margin="dense"',error:Te,helperText:Te&&"Invalid input",id:"outlined-basic"},Object(o.a)(e,"label","e.g. {0,0,4,7,10} (2,0,0,0,1,0,0,1,0,0,1,0)"),Object(o.a)(e,"variant","outlined"),Object(o.a)(e,"onKeyPress",(function(e){"Enter"===e.key&&(e.preventDefault(),Qe(Be.current.value),Be.current.value="")})),Object(o.a)(e,"onChange",(function(){We(!1)})),Object(o.a)(e,"inputRef",Be),e)),Object(P.jsx)(Oe,{userPcvs:Fe,setUserPcvs:Me,rosesMat:Le})]}),Object(P.jsx)(yt.a,{}),Object(P.jsx)(k.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Legend of coefficients"}),Object(P.jsx)(x.a,{sx:{margin:"5px 10px"},children:Object(P.jsx)(ge.a,{children:Object(P.jsxs)(g.a,{children:[Object(P.jsxs)(g.a,{direction:"row",children:[Object(P.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(P.jsx)("circle",{cx:"12",cy:"12",r:"8",fill:"black"}),Object(P.jsx)("text",{fontSize:"15",textAnchor:"middle",x:"12",y:"17",fill:"white",children:"k"})]}),"Fourier coefficient number"]}),Object(P.jsxs)(g.a,{direction:"row",children:[Object(P.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(P.jsx)("circle",{cx:"12",cy:"12",r:"6",fill:"black"})}),"MIDI file segments"]}),Object(P.jsxs)(g.a,{direction:"row",children:[Object(P.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(P.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"white"}),Object(P.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"none",stroke:"black",strokeWidth:"3px"})]}),"MIDI playback"]}),Object(P.jsxs)(g.a,{direction:"row",children:[Object(P.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(P.jsxs)("g",{transform:"translate(12,12)",children:[Object(P.jsx)("line",{x1:"0",x2:"0",y1:"7",y2:"-7",stroke:"black",strokeWidth:"1.5"}),Object(P.jsx)("line",{x1:"7",x2:"-7",y1:"0",y2:"0",stroke:"black",strokeWidth:"1.5"})]})}),"MIDI controller input"]}),Object(P.jsxs)(g.a,{direction:"row",children:[Object(P.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(P.jsx)("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"grey",strokeWidth:"2px"})}),"Prototypes"]}),Object(P.jsxs)(g.a,{direction:"row",children:[Object(P.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Le.length>0?Object(P.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:Le[3][0].points}):null}),"Custom pitch-class vectors"]})]})})}),Object(P.jsx)(ze,{traces:G,userPcvs:Fe,wavescapesData:D})]}),Object(P.jsx)(Ct,{open:c,children:Object(P.jsxs)(f.c,{children:[Object(P.jsx)(f.a,{exact:!0,path:"/",render:function(){return Object(P.jsx)(Ze,{setOpen:s,setInAnalysisPage:m})}}),Object(P.jsx)(f.a,{exact:!0,path:"/theory",render:function(){return Object(P.jsx)(Xe,{setOpen:s,setInAnalysisPage:m})}}),Object(P.jsx)(f.a,{exact:!0,path:"/analysis",render:function(){return Object(P.jsx)(gt,{fileName:xt,setInAnalysisPage:m,open:c,setOpen:s,wavescapesData:D,fullTraces:E,coeffTracesData:G,currentSubdiv:G.length>0&&Math.floor(ee/2)+J>=G[0].length?G[0].length-1:Math.floor(ee/2)+J,currentWavescapeSubdiv:Math.floor(J*xe/he),userPcvs:Fe})}})]})})]})]})},Pt=a(147),St=a(451),Ft=Object(Pt.a)({palette:{primary:{main:"#323232"},secondary:{main:"#fefefe"},background:{default:"#e0e0e0"}}});l.a.render(Object(P.jsx)(s.a.StrictMode,{children:Object(P.jsx)(St.a,{theme:Ft,children:Object(P.jsx)(kt,{})})}),document.getElementById("root"))}},[[368,1,2]]]);
//# sourceMappingURL=main.53166d1e.chunk.js.map