(this.webpackJsonpmidiverto=this.webpackJsonpmidiverto||[]).push([[0],{355:function(e,t){},369:function(e,t,a){"use strict";a.r(t);var n,s,c=a(1),i=a.n(c),r=a(69),o=a.n(r),l=a(18),h=a(10),d=a(9),j=a(91),u=a(26),b=a(29),x=a(428),f=a(429),p=a(185),g=a.n(p),O=a(184),m=a.n(O),v=a(183),y=a.n(v),w=a(456),k=a(443),C=a(11),D=a(455),S=a(0),I=0,M=Object(C.a)(D.a)({fontSize:"0.75rem",opacity:.38,fontWeight:500,letterSpacing:.2});function A(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return"".concat(t,":").concat(a<9?"0".concat(a):a)}function P(e,t,a){b.d.cancel(0),a(0),b.d.stop(),I=e.duration;var s=[];e.tracks.forEach((function(e){return e.notes.forEach((function(e){s.push(e)}))})),s.forEach((function(e){e.subdiv=Math.floor(e.time/t)})),(n=new b.b((function(e,t){T.triggerAttackRelease(t.name,t.duration,e,t.velocity),a(t.subdiv)}),[].concat(s)).start(0)).loop=!0,n.loopEnd=I}var T=new b.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function F(e){var t=this,a=e.fileName,i=Object(c.useState)(0),r=Object(h.a)(i,2),o=r[0],l=r[1];function d(){"running"!==b.e.state&&(console.log("state running"),b.e.resume()),b.d.start(),!s&&n&&(s=setInterval((function(){return l(n.progress)}),1e3))}return Object(c.useEffect)((function(){document.addEventListener("keydown",function(e){32===e.which&&(e.preventDefault(),"paused"===b.d.state||"stopped"===b.d.state?d():"started"===b.d.state&&(b.d.pause(),W()))}.bind(t))}),[]),Object(S.jsxs)(x.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"60%"},children:[Object(S.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[Object(S.jsxs)(f.a,{direction:"row",sx:{flexGrow:1,paddingLeft:"10%"},children:[Object(S.jsx)(w.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){console.log("stop"),b.d.stop(),W()},size:"large",children:Object(S.jsx)(y.a,{fontSize:"large"})}),Object(S.jsx)(w.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){console.log("pause"),b.d.pause(),W()},size:"large",children:Object(S.jsx)(m.a,{fontSize:"large"})}),Object(S.jsx)(w.a,{disableFocusRipple:!0,sx:{padding:"0"},onClick:function(){return d()},size:"large",children:Object(S.jsx)(g.a,{fontSize:"large"})})]}),Object(S.jsx)(D.a,{color:a?"primary":"error",noWrap:!0,sx:{flexGrow:"2",paddingRight:"10%"},children:a||"No midi file uploaded"})]}),Object(S.jsx)(k.a,{"aria-label":"Playback",size:"small",value:o?100*o:0,onChange:function(e,t){l(t/100),b.d.seconds=t/100*I},sx:{width:"90%"}}),Object(S.jsxs)(x.a,{sx:{display:"flex",width:"90%",alignItems:"center",justifyContent:"space-between",mt:-1},children:[Object(S.jsxs)(M,{children:["-",A(I-o*I)]}),Object(S.jsx)(M,{children:A(I)})]})]})}function W(){clearInterval(s),s=null}T.volume.value=-20;var E=a(3),R=a(4),z=a(186),B=a(438);function N(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e.length,c=[],i=0;i<s/2+1;i++){for(var r=0,o=0;o<s;o++)r=B.a(B.e(e[o],B.c(B.e(B.d,-2*B.f*i*o/s))),r);c.push(r)}if(c=c.slice(),t){var l=c[0];0!=l&&(c=c.map((function(e){return B.b(e,l)})))}return a&&c.forEach((function(e){e.re=Math.round(1e4*e.re)/1e4,e.im=Math.round(1e4*e.im)/1e4})),n&&(c=c.map((function(e){return e.toPolar()}))),c}function _(e){for(var t=e[0],a=1;a<e.length;a++){for(var n=[],s=0;s<e[a].length;s++)n.push(B.a(t[s],e[a][s]));t=n.slice()}var c=t[0];return 0!=c&&(t=t.map((function(e){return B.b(e,c)}))),t}var L=a(37),H=L.c().domain([0,1]).range(L.b(0,255,1)),V=function(e){var t,a,n;return e>=0&&e<B.f/3?(t=1,a=3*e/B.f,n=0):e>=B.f/3&&e<2*B.f/3?(t=2-3*e/B.f,a=1,n=0):e>=2*B.f/3&&e<B.f?(t=0,a=1,n=3*e/B.f-2):e>=B.f&&e<4*B.f/3?(t=0,a=4-3*e/B.f,n=1):e>=4*B.f/3&&e<5*B.f/3?(t=3*e/B.f-4,a=0,n=1):e>=5*B.f/3&&e<2*B.f&&(t=1,a=0,n=6-3*e/B.f),t=H(t),a=H(a),n=H(n),"rgb(".concat(t,", ").concat(a,", ").concat(n,")")},G=function(e,t,a){var n,s,c,i=Math.atan2(t,e);return(i=-i)<0&&(i+=2*Math.PI),i>=0&&i<B.f/3?(n=1,s=3*i/B.f,c=0):i>=B.f/3&&i<2*B.f/3?(n=2-3*i/B.f,s=1,c=0):i>=2*B.f/3&&i<B.f?(n=0,s=1,c=3*i/B.f-2):i>=B.f&&i<4*B.f/3?(n=0,s=4-3*i/B.f,c=1):i>=4*B.f/3&&i<5*B.f/3?(n=3*i/B.f-4,s=0,c=1):i>=5*B.f/3&&i<2*B.f&&(n=1,s=0,c=6-3*i/B.f),{r:n=H(n),g:s=H(s),b:c=H(c),a:H(a)}};function q(e){var t=e.toPolar(),a=t.phi,n=t.r;a<0&&a>-1e-5&&(a=0),a<0&&(a+=2*Math.PI);var s=V(a).slice(3,-1);return"rgba".concat(s,", ").concat(n,")")}var U=function(){function e(){Object(E.a)(this,e),this.C=0,this.Cs=0,this.D=0,this.Ds=0,this.E=0,this.F=0,this.Fs=0,this.G=0,this.Gs=0,this.A=0,this.As=0,this.B=0}return Object(R.a)(e,[{key:"addNoteDuration",value:function(e,t){switch(e){case"C":this.C+=t;break;case"C#":this.Cs+=t;break;case"D":this.D+=t;break;case"D#":this.Ds+=t;break;case"E":this.E+=t;break;case"F":this.F+=t;break;case"F#":this.Fs+=t;break;case"G":this.G+=t;break;case"G#":this.Gs+=t;break;case"A":this.A+=t;break;case"A#":this.As+=t;break;case"B":this.B+=t}}},{key:"getPcvAsArray",value:function(){return[this.C,this.Cs,this.D,this.Ds,this.E,this.F,this.Fs,this.G,this.Gs,this.A,this.As,this.B]}},{key:"add",value:function(e){this.C+=e.C,this.Cs+=e.Cs,this.D+=e.D,this.Ds+=e.Ds,this.E+=e.E,this.F+=e.F,this.Fs+=e.Fs,this.G+=e.G,this.Gs+=e.Gs,this.A+=e.A,this.As+=e.As,this.B+=e.B}}]),e}();function J(e,t,a,n){var s,c=t.noteResolutionValue,i=t.seconds,r=t.useSeconds;s=r?isNaN(i)?1:i:c*(60/a);var o=e.duration,h=[];e.tracks.forEach((function(e){h.push(Y(e.notes,s,o))}));for(var d=[],j=0;j<h[0].length;j++)d.push(new U);for(var u=0;u<h.length;u++)for(var b=0;b<h[u].length;b++)for(var x=0;x<h[u][b].length;x++){var f=h[u][b][x],p=f.pitch,g=f.duration;d[b].addNoteDuration(p,g)}for(var O=Object(l.a)(d).map((function(e){var t=new U;return t.add(e),t})),m=(d=X(d)).map((function(e){return N(e.getPcvAsArray(),!1)})),v=[],y=1;y<7;y++){for(var w=[],k=0;k<m.length;k++)w.push({x:m[k][y].re,y:m[k][y].im});v.push(w)}return{tracesData:v,resolution:s,currPcDistributions:O}}function Y(e,t,a){for(var n=[],s=t,c=function(t){var a=[];e.forEach((function(e){var n=e.time,c=e.duration;if(function(e,t,a,n){if(e>a&&e<a+n||e+t>a&&e+t<a+n||e<=a&&e+t>=a+n)return!0;return!1}(n,c,t,s)){var i={pitch:e.pitch};i.duration=n<t?n+c<t+s?n+c-t:s:n+c<=t+s?c:t+s-n,a.push(i)}})),n.push(a)},i=0;i<a;i+=t)c(i);return n}function K(e,t){return Z(X(function(e,t){for(var a=[],n=Math.ceil(t/2),s=n,c=0;c<n;c++){for(var i=new U,r=0;r<s;r++)i.add(e[r]);a.push(i),s++}for(var o=0;o<=e.length-t;o++){for(var l=new U,h=0;h<t;h++)l.add(e[o+h]);a.push(l)}s=n;for(var d=0;d<n;d++){for(var j=new U,u=0;u<s;u++)j.add(e[e.length-u-1]);a.push(j),s++}return a}(e,t)).map((function(e){return N(e.getPcvAsArray(),!1)})))}function X(e){var t=Object(l.a)(e).map((function(e){var t=new U;return t.add(e),t}));return t.forEach((function(e){var t=0;for(var a in e)t+=e[a];if(0!==t)for(var n in e)e[n]=e[n]/t})),t}function Z(e){for(var t=[],a=1;a<7;a++){for(var n=[],s=0;s<e.length;s++)n.push({x:e[s][a].re,y:e[s][a].im});t.push(n)}return t}function Q(e,t){for(var a=[],n=0;n<2*Math.PI*t;n+=.01){var s=10*Math.cos(e/t*n),c=s*Math.cos(n),i=s*Math.sin(n);a.push([c,i])}return a}var $=a(460),ee=a(461),te=a(458),ae=a(462),ne=a(119),se=a.n(ne),ce=Object(C.a)($.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(d.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));function ie(e){var t=e.open,a=e.setOpen,n=e.inAnalysisPage;return Object(S.jsx)(x.a,{sx:{flexGrow:1},children:Object(S.jsx)(ce,{position:"static",open:t,children:Object(S.jsxs)(ee.a,{children:[Object(S.jsx)(w.a,{disabled:!n,color:"inherit","aria-label":"open drawer",onClick:function(){a(!0)},edge:"start",sx:Object(d.a)({mr:2},t&&{display:"none"}),children:Object(S.jsx)(se.a,{})}),Object(S.jsx)(D.a,{variant:"h3",component:"div",sx:{flexGrow:1},children:"midiVERTO"}),Object(S.jsxs)(ae.a,{"aria-label":"outlined button group",children:[Object(S.jsx)(te.a,{component:j.b,to:"/",variant:"contained",disableElevation:!0,children:"Home"}),Object(S.jsx)(te.a,{component:j.b,to:"/theory",variant:"contained",disableElevation:!0,children:"Docs"}),Object(S.jsx)(te.a,{component:j.b,to:"/analysis",variant:"contained",disableElevation:!0,children:"Analysis"})]})]})})})}var re=a(442),oe=a(430),le=a(459),he=a(463),de=a(447),je=a.p+"static/media/whole.bc0fb0be.svg",ue=a.p+"static/media/half.7f42e3ea.svg",be=a.p+"static/media/quarter.2f619208.svg",xe=a.p+"static/media/eighth.f964a835.svg",fe=a.p+"static/media/sixteenth.b53671bd.svg";var pe=function(e){var t=e.resolutionMode,a=e.setResolutionMode,n=e.retriggerAnalysis,s=Object(c.useState)(!1),i=Object(h.a)(s,2),r=i[0],o=i[1],l=Object(c.useRef)(null);return Object(S.jsx)(x.a,{children:Object(S.jsx)(le.a,{component:"fieldset",children:Object(S.jsxs)(oe.a,{row:!0,defaultValue:"quarter",onChange:function(e){var n=Object(d.a)({},t);switch(n.seconds=parseFloat(l.current.value),e.target.value){case"sixteenth":n.noteResolutionValue=.25,n.useSeconds=!1;break;case"eighth":n.noteResolutionValue=.5,n.useSeconds=!1;break;case"quarter":n.noteResolutionValue=1,n.useSeconds=!1;break;case"half":n.noteResolutionValue=2,n.useSeconds=!1;break;case"whole":n.noteResolutionValue=4,n.useSeconds=!1;break;case"seconds":n.useSeconds=!0}a(n)},"aria-label":"resolution",name:"row-radio-buttons-group",sx:{display:"flex",justifyContent:"space-between"},children:[Object(S.jsx)(he.a,{value:"sixteenth",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3)"},src:fe})}),Object(S.jsx)(he.a,{value:"eighth",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)("img",{style:{width:10,height:10,transform:"scale(3, 3) translate(0, 0)"},src:xe})}),Object(S.jsx)(he.a,{value:"quarter",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(1, 3)"},src:be})}),Object(S.jsx)(he.a,{value:"half",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)("img",{style:{width:10,height:10,marginTop:8,transform:"scale(3.7, 3.2) "},src:ue})}),Object(S.jsx)(he.a,{value:"whole",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)("img",{style:{width:10,height:10,marginTop:0,transform:"scale(1.5, 1)"},src:je})}),Object(S.jsx)(he.a,{value:"seconds",control:Object(S.jsx)(re.a,{size:"small"}),label:Object(S.jsx)(de.a,{sx:{minHeight:"4.4rem",maxWidth:"5rem"},error:r,helperText:r&&"Invalid input",label:"in seconds",id:"standard-size-small",defaultValue:"1.5",size:"small",variant:"standard",onChange:function(){var e=Object(d.a)({},t);e.seconds=parseFloat(l.current.value),isNaN(e.seconds)?o(!0):(a(e),o(!1))},inputRef:l})}),Object(S.jsx)(te.a,{variant:"contained",onClick:n,sx:{width:"22%",height:"15%",marginTop:2},children:"Change"})]})})})},ge=a(452),Oe=a(457),me=Object(C.a)("li")((function(e){return{margin:e.theme.spacing(.5)}}));function ve(e){var t=e.userPcvs,a=e.setUserPcvs,n=e.rosesMat;return Object(S.jsx)(Oe.a,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",p:"3px",overflow:"auto",height:"100%",width:"100%"},component:"ul",children:t.map((function(e,s){return Object(S.jsx)(me,{children:Object(S.jsx)(ge.a,{variant:e.isDisabled?"outlined":"filled",icon:Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(S.jsx)("g",{children:Object(S.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:e.rosePoints})})}),label:e.label,onDelete:(c=e,function(){n[c.d-1][c.n-1].used=!1,a((function(e){return e.filter((function(e){return e.label!==c.label}))}))}),onClick:function(){e.isDisabled=!e.isDisabled,a(Object(l.a)(t))}})},"".concat(s));var c}))})}var ye=a(148),we=a.n(ye),ke=a(187),Ce=a.n(ke),De=a(188),Se=function(e){var t=e.traceData,a=e.userPcv,n=e.prototypesData,s=e.coeffNumber,c=e.showNumber,i=450,r=180,o=2*B.f/50,l=L.b(0,2*B.f,o),h=L.b(0,1,.05);return Object(S.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:450,children:[c?Object(S.jsxs)("g",{transform:"translate(32,20)",children:[Object(S.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(S.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:s})]}):null,Object(S.jsxs)("g",{transform:"translate(".concat(225,",").concat(225,")"),children:[h.map((function(e){return l.map((function(t,a){return function(e,t,a,n){var s=-B.f/2,c=L.a().innerRadius(360*n/2).outerRadius(360*(n+.05)/2).startAngle(-(e+s)).endAngle(-(e+o+s));return Object(S.jsx)("path",{fill:V(e),fillOpacity:n,stroke:V(e),strokeOpacity:n/10,d:c()},"".concat(a,".").concat(t))}(t,a,s,e)}))})),t.map((function(e,t){return function(e,t,a,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=L.a().innerRadius(0).outerRadius(t*i/2).startAngle(0).endAngle(2*Math.PI);return Object(S.jsx)("path",{transform:"translate(".concat(e.x*r,",").concat(-e.y*r,")"),fill:a,fillOpacity:s,d:c()},n)}(e,.01,"black",t,.2)})),a?a.map((function(e,t){if(!e.isDisabled)return function(e,t,a,n,s){return Object(S.jsx)("g",{children:Object(S.jsx)("polyline",{transform:"translate(".concat(t,",").concat(a,") scale(").concat(n,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:e})},"rose".concat(s))}(e.rosePoints,e.x*r,-e.y*r,.7,t)})):null,n.map((function(e,t){return function(e,t){var a=L.a().innerRadius(4.5).outerRadius(6.75).startAngle(0).endAngle(2*Math.PI),n="",s="",c=!1;if(e.label.includes("_")||e.label.includes("^"))for(var i=0;i<e.label.length;i++)"_"===e.label[i]&&(n=e.label.slice(0,i),s=e.label.slice(i+1,e.label.length),c=!0),"^"===e.label[i]&&(n=e.label.slice(0,i),s=e.label.slice(i+1,e.label.length));else n=e.label;var o=18*Math.sign(e.x),l=18*-Math.sign(e.y)+7;return"\u266f"===n&&(l-=3),"WT"===n&&"1"===s&&(o*=1.2),"WT"===n&&"0"===s&&(o*=1.4),"C"===n&&"o7"===s&&(o*=1.2),"O"===n&&"1,2"===s&&(l*=1.1),"C\u266f"===n&&"o7"===s&&(o*=1.1,l*=1.1),"D"===n&&"o7"===s&&(o*=.7,l*=.7),"H"===n&&"2,3"===s&&(o*=1.2,l*=1.2),"H"===n&&"1,2"===s&&(o*=.7,l*=.7),"\u03a9"===n&&(o=15,l=5),Object(S.jsxs)("g",{transform:"translate(".concat(e.x*r,",").concat(-e.y*r,")"),children:[Object(S.jsx)("path",{fill:"grey",d:a()},t),Object(S.jsxs)("text",{textAnchor:"middle",dx:o,dy:l,fontSize:"20px",children:[n,c?Object(S.jsx)("tspan",{fontSize:15,baselineShift:"sub",children:s}):Object(S.jsx)("tspan",{fontSize:15,baselineShift:"super",children:s})]})]},"p.".concat(t))}(e,t)}))]})]},"circle".concat(s))},Ie=Math.sin(Math.PI/3);var Me=function(e){var t,a,n=e.wsNumber,s=e.wavescapeMatrix,c=e.showNumber,i=e.wsPhantomCurveHeight,r=10,o=400,l=o,h=[r,r],d=[o-h[0],o-h[1]];return t=s[0].length,a=function(e,t,a,n,s){for(var c=e/a,i=[],r=0;r<a+1;r++){for(var o=[],l=0;l<a+1;l++)r<=l&&o.push({x:(l-r)*c+r*c/2+n,y:r*c+s});i.push(o)}return i}(d[0],0,t,h[0],h[1]),Object(S.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"wavescape".concat(n),width:410,height:l,children:[c?Object(S.jsxs)("g",{transform:"translate(32,20)",children:[Object(S.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(S.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:n})]}):null,Object(S.jsxs)("g",{transform:"scale(".concat(1,", ",-Ie,") translate(",0,",").concat(-420,")"),children:[Object(S.jsx)("line",{x1:.5*i*o+5,y1:380*i+r,x2:-.5*i*o+o+5,y2:380*i+r,stroke:"black",strokeDasharray:"4 2"}),a.length>0?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("line",{x1:a[0][0].x,x2:a[0][a[0].length-1].x,y1:a[0][0].y,y2:a[0][a[0].length-1].y,stroke:"grey",strokeWidth:"1px"}),Object(S.jsx)("line",{x1:a[0][a[0].length-1].x,x2:a[a.length-1][0].x,y1:a[0][a[0].length-1].y,y2:a[a.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(S.jsx)("line",{x1:a[0][0].x,x2:a[a.length-1][0].x,y1:a[0][0].y,y2:a[a.length-1][0].y,stroke:"grey",strokeWidth:"1px"})]}):null,s.map((function(e,t){return e.map((function(e,n){return 0===t?Object(S.jsx)("polygon",{points:"".concat(a[t][n].x,",").concat(a[t][n].y,"\n                 ").concat(a[t][n+1].x,",").concat(a[t][n+1].y," \n                 ").concat(a[t+1][n].x,",").concat(a[t+1][n].y),fill:e.rgb,fillOpacity:e.alpha}):Object(S.jsx)("polygon",{points:"\n                 ".concat(a[t][n].x,",").concat(a[t][n].y,"\n                 ").concat(a[t-1][n+1].x,",").concat(a[t-1][n+1].y,"\n                 ").concat(a[t][n+1].x,",").concat(a[t][n+1].y," \n                 ").concat(a[t+1][n].x,",").concat(a[t+1][n].y,"\n                 "),fill:e.rgb,fillOpacity:e.alpha})}))}))]})]})};var Ae=[[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"C\u266f",x:.866,y:-.5},{label:"D",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"E",x:-.5,y:-.866},{label:"F",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"G",x:-.866,y:.5},{label:"A\u266d",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"B\u266d",x:.5,y:.866},{label:"B",x:.866,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"T_0",x:1,y:0},{label:"T_1",x:.5,y:-.866},{label:"T_2",x:-.5,y:-.866},{label:"T_3",x:-1,y:0},{label:"T_4",x:-.5,y:.866},{label:"T_5",x:.5,y:.866}],[{label:"\u03a9",x:0,y:0},{label:"C+",x:1,y:0},{label:"C\u266f+",x:0,y:-1},{label:"D+",x:-1,y:0},{label:"D\u266f+",x:0,y:1},{label:"H_0,3",x:.5,y:.5},{label:"H_0,1",x:.5,y:-.5},{label:"H_1,2",x:-.5,y:-.5},{label:"H_2,3",x:-.5,y:.5}],[{label:"\u03a9",x:0,y:0},{label:"C^o7",x:1,y:0},{label:"C\u266f^o7",x:-.5,y:-.866},{label:"D^o7",x:-.5,y:.866},{label:"O_0,2",x:.25,y:.433},{label:"O_0,1",x:.25,y:-.433},{label:"O_1,2",x:-.5,y:0}],[{label:"\u03a9",x:0,y:0},{label:"C",x:1,y:0},{label:"F",x:.866,y:-.5},{label:"B\u266d",x:.5,y:-.866},{label:"E\u266d",x:0,y:-1},{label:"A\u266d",x:-.5,y:-.866},{label:"C\u266f",x:-.866,y:-.5},{label:"F\u266f",x:-1,y:0},{label:"B",x:-.866,y:.5},{label:"E",x:-.5,y:.866},{label:"A",x:0,y:1},{label:"D",x:.5,y:.866},{label:"G",x:.866,y:.5},{label:"\u266e",x:.267,y:.462},{label:"5\u266d",x:0,y:-.533},{label:"2\u266f",x:-.267,y:.462},{label:"3\u266d",x:.462,y:-.267},{label:"4\u266f",x:-.533,y:0},{label:"\u266d",x:.462,y:.267},{label:"6\u266f",x:-.267,y:-.462},{label:"\u266f",x:0,y:.533},{label:"4\u266d",x:.267,y:-.462},{label:"3\u266f",x:-.462,y:.267},{label:"2\u266d",x:.533,y:0},{label:"5\u266f",x:-.462,y:-.267}],[{label:"\u03a9",x:0,y:0},{label:"WT_0",x:1,y:0},{label:"WT_1",x:-1,y:0}]],Pe=a(465),Te=a(469),Fe=a(467),We=a(468),Ee=a(466),Re=a(384),ze=a(444),Be=a(435),Ne=a(464);var _e=function(e){var t=e.traces,a=e.userPcvs,n=e.wavescapesData,s=e.wsPhantomCurveHeight,i=Object(c.useState)(!1),r=Object(h.a)(i,2),o=r[0],l=r[1],d=Object(c.useState)(!0),j=Object(h.a)(d,2),u=j[0],b=j[1],x=Object(c.useState)(!0),f=Object(h.a)(x,2),p=f[0],g=f[1],O=Object(c.useState)(!0),m=Object(h.a)(O,2),v=m[0],y=m[1],w=Object(c.useState)(!0),k=Object(h.a)(w,2),C=k[0],I=k[1],M=Object(c.useState)([]),A=Object(h.a)(M,2),P=A[0],T=A[1],F=Object(c.useState)([]),W=Object(h.a)(F,2),E=W[0],R=W[1],z=function(){l(!1)},B=Object(c.useState)(!1),N=Object(h.a)(B,2),_=N[0],L=N[1],H=Object(c.useState)(null),V=Object(h.a)(H,2),G=V[0],q=V[1],U=Boolean(G),J=o?"simple-popover":void 0;Object(c.useEffect)((function(){n.length>0?L(!0):L(!1);for(var e=[],t=0;t<n.length;t++){for(var a=[],s=0;s<n[t].length;s++){for(var c=[],i=0;i<n[t][s].length;i++){var r={},o=n[t][s][i].replace(/[^\d,]/g,"").split(",");r.rgb="rgb(".concat(o[0],", ").concat(o[1],", ").concat(o[2],")"),r.alpha="0.".concat(o[3].substring(1,o[3].length)),c.push(r)}a.push(c)}e.push(a)}R(e)}),[n]),Object(c.useEffect)((function(){for(var e=[],t=1;t<7;t++){for(var n=[],s=0;s<a.length;s++)n.push({x:a[s].coeffs[t].re,y:a[s].coeffs[t].im,rosePoints:a[s].rosePoints,isDisabled:a[s].isDisabled,label:a[s].label});e.push(n)}T(e)}),[a]);var Y=function(){var e=new Ce.a;[1,2,3,4,5,6].forEach((function(a){var c,i=function(e){var a=Object(S.jsx)(Se,{traceData:t.length>0&&p?t[e-1]:[],prototypesData:v?Ae[e-1]:[],userPcv:C?P[e-1]:[],coeffNumber:e,showNumber:u});return we.a.renderToStaticMarkup(a)}(a);_&&(c=function(e){var t=Object(S.jsx)(Me,{wavescapeMatrix:n.length>0?E[e-1]:[],wsNumber:e,showNumber:u,wsPhantomCurveHeight:s});return we.a.renderToStaticMarkup(t)}(a)),_&&e.file("wavescapes/wavescape".concat(a,".svg"),c),e.file("fourier/space".concat(a,".svg"),i)})),e.generateAsync({type:"blob"}).then((function(e){Object(De.saveAs)(e,"images.zip")})),l(!1)};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(te.a,{variant:"contained",size:"small",color:"primary",sx:{width:"35%",margin:"auto",marginTop:1,marginBottom:1},onClick:function(){l(!0)},children:"Export images"}),Object(S.jsxs)(Pe.a,{open:o,onClose:z,children:[Object(S.jsx)(Ee.a,{children:"Saving options"}),Object(S.jsx)(Fe.a,{children:Object(S.jsxs)(We.a,{children:[Object(S.jsx)(D.a,{sx:{color:"black"},children:"Check the box in order to include the correspondent element in the exported images:"}),Object(S.jsx)(Be.a,{sx:{marginLeft:2,marginTop:1},children:Object(S.jsxs)(Re.a,{sx:{color:"black"},children:[Object(S.jsx)(he.a,{control:Object(S.jsx)(ze.a,{size:"small",checked:u,onChange:function(){b(!u)}}),label:"Coefficients numbers"}),Object(S.jsx)(he.a,{control:Object(S.jsx)(ze.a,{size:"small",checked:p,onChange:function(){g(!p)}}),label:"Full trace"}),Object(S.jsx)(he.a,{control:Object(S.jsx)(ze.a,{size:"small",checked:v,onChange:function(){y(!v)}}),label:"Prototypes"}),Object(S.jsx)(he.a,{control:Object(S.jsx)(ze.a,{size:"small",checked:C,onChange:function(){I(!C)}}),label:"Custom pitch-class vectors"})]})})]})}),Object(S.jsxs)(Te.a,{children:[Object(S.jsx)(te.a,{onClick:z,children:"Close"}),Object(S.jsx)(te.a,{onClick:function(e){Y()},autoFocus:!0,children:"Save"}),Object(S.jsx)(Ne.a,{id:J,open:U,anchorEl:G,onClose:function(){q(null)},anchorOrigin:{vertical:"center",horizontal:"left"},children:Object(S.jsx)(D.a,{color:"error",sx:{p:2},children:"Upload a MIDI file"})})]})]})]})},Le=a.p+"static/media/wavescape1.18ed9789.svg",He=a.p+"static/media/wavescape2.64a2be59.svg",Ve=a.p+"static/media/wavescape3.b4d3de99.svg",Ge=a.p+"static/media/wavescape4.4561a9d9.svg",qe=a.p+"static/media/wavescape5.508bf720.svg",Ue=a.p+"static/media/wavescape6.c7103b5f.svg",Je=a.p+"static/media/space1.566a5ba2.svg",Ye=a.p+"static/media/space2.3e28cc51.svg",Ke=a.p+"static/media/space3.9738264e.svg",Xe=a.p+"static/media/space4.054806a8.svg",Ze=a.p+"static/media/space5.77046a5c.svg",Qe=a.p+"static/media/space6.8a2b4e79.svg",$e=a.p+"static/media/dh_center_logo.b01c2668.svg",et=a.p+"static/media/Logo_EPFL.654485f4.svg",tt=a(470);var at=function(){return Object(S.jsxs)(x.a,{sx:{marginTop:1,textAlign:"center"},children:[Object(S.jsxs)(f.a,{spacing:10,sx:{justifyContent:"center"},direction:"row",children:[Object(S.jsx)("img",{alt:"",width:150,height:150,src:et}),Object(S.jsx)("img",{alt:"",width:150,src:$e})]}),Object(S.jsx)(D.a,{children:"Project \u201cEnabling interactive music visualization for a wider community\u201d"}),Object(S.jsxs)(f.a,{sx:{justifyContent:"center"},direction:"row",children:[Object(S.jsxs)(D.a,{sx:{marginRight:1},children:["Project lead:"," ",Object(S.jsx)(tt.a,{target:"_blank",href:"https://twitter.com/fabianmoss",children:"Fabian C. Moss"}),";"," ",Object(S.jsx)(tt.a,{target:"_blank",href:"https://twitter.com/danielharasim",children:"Daniel Harasim"})]}),Object(S.jsx)("span",{children:"\u2013"}),Object(S.jsxs)(D.a,{sx:{marginLeft:1},children:["Developer:"," ",Object(S.jsx)(tt.a,{href:"mailto:giovanni.affatato97@gmail.com",children:"Giovanni Affatato"})]})]}),Object(S.jsxs)(f.a,{sx:{justifyContent:"center"},direction:"row",children:[Object(S.jsx)(tt.a,{sx:{marginRight:1},href:"https://github.com/DCMLab/MIDFT",children:"GitHub repo"}),Object(S.jsx)("span",{children:"\u2022"}),Object(S.jsx)(tt.a,{sx:{marginLeft:1,marginRight:1},href:"https://www.epfl.ch/labs/dcml/",children:"DCML page"}),Object(S.jsx)("span",{children:"\u2022"}),Object(S.jsx)(tt.a,{sx:{marginLeft:1},href:"https://github.com/DCMLab/MIDFT/blob/main/LICENSE",children:"Copyright"})]})]})},nt=a(436),st=a(56),ct=["href"],it=function(e){return Object(S.jsx)(x.a,{sx:{padding:1,color:"#31708f",backgroundColor:"#d9edf7",borderRadius:"10px",width:"90%",margin:"auto"},children:e.children})},rt=function(e){var t=e.scale,a=e.alt,n=e.src;return Object(S.jsx)(x.a,{sx:{width:t,margin:"auto",marginBottom:2},children:Object(S.jsx)("img",{alt:a,style:{height:"100%",width:"100%",objectFit:"contain"},src:n})})},ot=function(e){var t=Object.assign({},e);return Object(S.jsx)(D.a,Object(d.a)({variant:"body1",sx:{marginBottom:3,fontSize:20}},t))},lt=function(e){var t=e.href,a=Object(st.a)(e,ct);return Object(S.jsx)(tt.a,Object(d.a)(Object(d.a)({target:"_blank",underline:"hover",href:t},a),{},{sx:Object(d.a)({color:"#1976d2",textDecorationColor:"#1976d266"},a.sx),children:a.children}))};function ht(e){var t=e.setOpen,a=e.setInAnalysisPage,n=Object(c.useRef)(null),s=Object(c.useRef)(null),i=Object(c.useRef)(null),r=Object(c.useRef)(null),o=170;return Object(c.useEffect)((function(){a(!1),t(!1)}),[]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Oe.a,{sx:{margin:"auto",maxWidth:"1200px"},children:Object(S.jsxs)(x.a,{sx:{padding:2,width:"1060px",margin:"auto",paddingBottom:5},children:[Object(S.jsx)(D.a,{variant:"h2",style:{fontWeight:"bold",marginLeft:20,textAlign:"center"},children:"Welcome!"}),Object(S.jsx)(nt.a,{sx:{marginBottom:5}}),Object(S.jsxs)(f.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},direction:"row",children:[Object(S.jsx)("img",{alt:"",width:o,height:o,src:Le}),Object(S.jsx)("img",{alt:"",width:o,height:o,src:He}),Object(S.jsx)("img",{alt:"",width:o,height:o,src:Ve}),Object(S.jsx)("img",{alt:"",width:o,height:o,src:Ge}),Object(S.jsx)("img",{alt:"",width:o,height:o,src:qe}),Object(S.jsx)("img",{alt:"",width:o,height:o,src:Ue})]}),Object(S.jsxs)(f.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:6},direction:"row",children:[Object(S.jsx)("img",{alt:"",width:o,height:o,src:Je}),Object(S.jsx)("img",{alt:"",width:o,height:o,src:Ye}),Object(S.jsx)("img",{alt:"",width:o,height:o,src:Ke}),Object(S.jsx)("img",{alt:"",width:o,height:o,src:Xe}),Object(S.jsx)("img",{alt:"",width:o,height:o,src:Ze}),Object(S.jsx)("img",{alt:"",width:o,height:o,src:Qe})]}),Object(S.jsxs)(ot,{children:["This web application is an open-source online tool for interactive music visualization. It aims at bridging the gap between mathematical music theory and music enthusiasts. In recent years, music theorists have discovered that the"," ",Object(S.jsx)(lt,{href:"https://en.wikipedia.org/wiki/Discrete_Fourier_transform",children:"Discrete Fourier Transform (DFT)"})," ","can be used to analyze the pitch-class content of pieces of music, for instance to compare the tonal organization of different pieces. It may also reveal interesting sections in a piece that eluded a theorist\u2019s inspection. This technique has consequently opened up new avenues for both theoretical and historical music research"," ",Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),n.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:Object(S.jsx)("sup",{children:"[1]"})}),","," ",Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),s.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:Object(S.jsx)("sup",{children:"[2]"})}),","," ",Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),i.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:Object(S.jsx)("sup",{children:"[3]"})}),","," ",Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),r.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:Object(S.jsx)("sup",{children:"[4]"})}),". However, applying the DFT to music requires advanced mathematical and computational skills. Harnessing the full power of such a complex method so far remained restricted to only a small group of researchers.The app\u2019s interactive interface enables scholars and students of music, as well as musicians, to employ the DFT method in their research, teaching, and musical practice. It is moreover ideally suited to explore and to teach visualization techniques for complex cultural data, for example in Digital Humanities."]}),Object(S.jsxs)(ot,{children:["The"," ",Object(S.jsx)(lt,{target:"_self",href:"#theory",children:"Theory"})," ","page describes how to use and interpret the DFT for music analysis. It also explains the interface of the"," ",Object(S.jsx)(lt,{target:"_self",href:"#analysis",children:"Analysis"})," ","page. On that page, users can explore the DFT method by either manually entering"," ",Object(S.jsx)(lt,{href:"https://en.wikipedia.org/wiki/Set_theory_(music)",children:"pitch-class sets"}),", by uploading a music piece in"," ",Object(S.jsx)(lt,{href:"https://en.wikipedia.org/wiki/MIDI",children:"MIDI"})," ","format, or by connecting a MIDI device (e.g. MIDI keyboard or software) to the app."]}),Object(S.jsxs)(ot,{children:["No installation is required to use the app, and we hope that this will facilitate its adoption by the music theory community. The full feature set of the app is currently only supported with"," ",Object(S.jsx)(lt,{href:"https://www.google.com/chrome/index.html",children:"chrome"}),". The program code is hosted on"," ",Object(S.jsx)(lt,{href:"https://github.com/DCMLab/MIDFT",children:"GitHub"})," ","under a GPL3 licence."]}),Object(S.jsx)(D.a,{variant:"h5",sx:{marginBottom:1},children:Object(S.jsx)("b",{children:"References"})}),Object(S.jsx)(D.a,{ref:n,children:"1: Amiot (2016). Music Through Fourier Space: Discrete Fourier Transform in Music Theory. Springer."}),Object(S.jsxs)(D.a,{ref:s,children:["2: Noll (2019). Insiders\u2019 Choice: Studying Pitch Class Sets Through Their Discrete Fourier Transformations. In"," ",Object(S.jsx)("i",{children:"Mathematics and Computation in Music"})," (pp. 371\u2013378). Springer."," ",Object(S.jsx)(lt,{href:"https://doi.org/10.1007/978-3-030-21392-3_32",children:"https://doi.org/10.1007/978-3-030-21392-3_32"})]}),Object(S.jsxs)(D.a,{ref:i,children:["3: Tymoczko & Yust (2019). Fourier Phase and Pitch-Class Sum. In",Object(S.jsx)("i",{children:"Mathematics and Computation in Music"})," (pp. 46\u201358). Springer."," ","",Object(S.jsx)(lt,{href:"https://doi.org/10.1007/978-3-030-21392-3_4",children:"https://doi.org/10.1007/978-3-030-21392-3_4"})]}),Object(S.jsxs)(D.a,{ref:r,children:["4: Viaccoz, Harasim, Moss, & Rohrmeier (in press). Wavescapes: A Visual Hierarchical Analysis of Tonality using the Discrete Fourier Transformation. ",Object(S.jsx)("i",{children:"Musicae Scientiae"}),"."," ",Object(S.jsx)(lt,{href:"https://doi.org/10.1177/10298649211034906",children:"https://doi.org/10.1177/10298649211034906"})]})]})}),Object(S.jsx)(at,{})]})}var dt=a(48);a(368);function jt(e){var t=e.setOpen,a=e.setInAnalysisPage,n=Object(c.useRef)(null),s=Object(c.useRef)(null),i=Object(c.useRef)(null),r=Object(c.useRef)(null),o=Object(c.useRef)(null),l=Object(c.useRef)(null),h=Object(c.useRef)(null);return Object(c.useEffect)((function(){a(!1),t(!1)}),[]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Oe.a,{sx:{margin:"auto",maxWidth:"1200px"},children:Object(S.jsxs)(x.a,{sx:{padding:3,width:"1060px",margin:"auto"},children:[Object(S.jsx)(D.a,{variant:"h2",style:{fontWeight:"bold",marginLeft:20},children:"Manual"}),Object(S.jsx)(nt.a,{}),Object(S.jsx)(D.a,{component:"span",children:Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),n.current.scrollIntoView({behavior:"smooth"})},href:"#File upload",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"File upload"})}),Object(S.jsx)("li",{children:Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),s.current.scrollIntoView({behavior:"smooth"})},href:"#Wavescapes",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Wavescapes"})}),Object(S.jsx)("li",{children:Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),i.current.scrollIntoView({behavior:"smooth"})},href:"#Fourier Coefficient Spaces",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Fourier Coefficient Spaces"})}),Object(S.jsx)("li",{children:Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),r.current.scrollIntoView({behavior:"smooth"})},href:"#MIDI playback and overall layout",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"MIDI playback and overall layout"})}),Object(S.jsx)("li",{children:Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),o.current.scrollIntoView({behavior:"smooth"})},href:"#Manual entry of chords",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Manual entry of chords"})}),Object(S.jsx)("li",{children:Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),h.current.scrollIntoView({behavior:"smooth"})},href:"#Download images",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Using midiVERTO with MuseScore"})}),Object(S.jsx)("li",{children:Object(S.jsx)(tt.a,{underline:"hover",onClick:function(e){e.preventDefault(),l.current.scrollIntoView({behavior:"smooth"})},href:"#Download images",sx:{color:"#1976d2",textDecorationColor:"#1976d266"},children:"Download images"})})]})}),Object(S.jsxs)(x.a,{sx:{paddingBottom:5,paddingTop:5},children:[Object(S.jsx)(D.a,{ref:n,variant:"h4",style:{fontWeight:"bold"},children:"File upload"}),Object(S.jsx)(nt.a,{sx:{marginBottom:2}}),Object(S.jsxs)(ot,{children:["The easiest way to get started using the app is to find a MIDI file on the web and upload it. For example, we can use the main theme of the musical"," ",Object(S.jsx)(lt,{sx:{fontStyle:"italic"},href:"https://bitmidi.com/uploads/6508.mid",children:"Phantom of the Opera"}),". (Right-)Click on the link to download the file, switch to the"," ",Object(S.jsx)(lt,{target:"_self",href:"#/analysis",children:"Analysis"})," ","tab of this app, and upload it."," "]}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/8JdAyNM.png",scale:"50%"}),Object(S.jsxs)(ot,{children:["Before or after uploading the file, you can choose a"," ",Object(S.jsx)("b",{children:"Time resolution"})," either as a musical note value or as a duration in seconds. This affects into how many segments the MIDI file will be divided for analysis. If you change the resolution after the upload, you have to click on ",Object(S.jsx)("b",{children:"CHANGE"})," so that the time-resolution change takes effect. For the"," ",Object(S.jsx)("i",{children:"Phantom of the Opera"})," example, we recommend a resolution of an eighth note."]}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/ykmKgrB.png",scale:"45%"})]}),Object(S.jsxs)(x.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(D.a,{ref:s,variant:"h4",style:{fontWeight:"bold"},children:"Wavescapes"}),Object(S.jsx)(nt.a,{sx:{marginBottom:2}}),Object(S.jsxs)(ot,{children:["Depending on the length of the piece and the chosen time resolution, the app might take a while until the file is processed. When processing has finished, the app visualizes the piece with six triangular plots called ",Object(S.jsx)("i",{children:"Wavescapes"})," (details about this analysis method are described"," ",Object(S.jsx)(lt,{href:"https://doi.org/10.1177/10298649211034906",children:"in this paper"}),")."]}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/ySOPcoP.png",scale:"90%"}),Object(S.jsxs)(ot,{children:["In short, wavescapes use a mathematical formalism called the"," ",Object(S.jsx)(lt,{sx:{fontStyle:"italic"},href:"https://en.wikipedia.org/wiki/Discrete_Fourier_transform",children:"Discrete Fourier Transform"})," ","(DFT), to display regularities with respect to scales that divide the octave into equal parts. Concretely, the wavescapes from 1 to 6 correspond to specific divisions of the octave: into 12 semitones, 6 tritones, 4 augmented triads, 3 diminished-seventh chords, 12 diatonic/pentatonic scales, and two whole-tone scales. If a part of a piece predominantly uses pitches from such a collection, the corresponding areas in the wavescapes will be relatively homogeneous in color. For example, if the notes of the B diminished triad ",Object(S.jsx)("code",{children:"B\xb0 = (11, 2, 5, 8)"})," are used recurrently then this is shown in green in the fourth wavescape. For more details, see"," ",Object(S.jsx)(lt,{href:"https://doi.org/10.1177/10298649211034906",children:"this paper"}),"."]}),Object(S.jsxs)(ot,{children:["Back to the ",Object(S.jsx)("i",{children:"Phantom"})," example: there are a number of interesting observations about the tonality of this piece that we can draw from the wavescapes."]}),Object(S.jsxs)(ot,{children:[Object(S.jsx)("b",{children:"Wavescapes 3 and 5"})," have the strongest colors, meaning that diatonic scales as well as augmented triads play and important role for the harmonic organization of the piece."]}),Object(S.jsxs)(ot,{children:[Object(S.jsx)("b",{children:"On the lower levels of the 3rd wavescape,"})," the colors blue - green - yellow - pink ( - green - ) pink change in regular time intervals. Tracing this sequence of colors in the corresponding Fourier Coefficient Space (see also below), we observe that these colors correspond to the labels ",Object(S.jsx)(dt.a,{math:"H_{1,2}"}),","," ",Object(S.jsx)(dt.a,{math:"H_{2,3}"}),", ",Object(S.jsx)(dt.a,{math:"H_{0, 3}"}),", and ",Object(S.jsx)(dt.a,{math:"H_{0, 1}"}),", respectively (in clockwise direction). A label ",Object(S.jsx)(dt.a,{math:"H_{i,j}"})," denotes the hexatonic scale that contains the"," ",Object(S.jsx)(lt,{href:"https://en.wikipedia.org/wiki/Pitch_class",children:"pitch classes"})," ",Object(S.jsx)(dt.a,{math:"i"})," and ",Object(S.jsx)(dt.a,{math:"j"})," (e.g.,"," ",Object(S.jsx)(dt.a,{math:"H_{1,2}=\\{1,2,5,6,9,10\\}"}),"). The overall harmonic trajectory of this piece moves in descending minor thirds, and at the end it briefly moves across the plane to its hexatonic pole."]}),Object(S.jsxs)(ot,{children:[Object(S.jsx)("b",{children:"On the lower levels of the 5th wavescape,"})," the color pattern is roughly orange/red - green - pink, showing that the initial, middle, and final parts of this piece modulate through different keys. Note that the red and pink areas are adjacent to each other but opposite to the green area, again showing a symmetrical organization in terms of keys."]}),Object(S.jsxs)(ot,{children:[Object(S.jsx)("b",{children:"Finally, the 6th wavescape"})," shows that the first half of the piece is closer to the whole-tone scale containing C (",Object(S.jsx)(dt.a,{math:"WT_0"}),", reddish) and the second half is closer to the whole-tone scale containing C# (",Object(S.jsx)(dt.a,{math:"WT_1"}),", blueish)."]}),Object(S.jsx)(ot,{children:"Observations like these can guide analyses and inspire hearings of musical pieces, in particular regarding the relation of harmony and form."})]}),Object(S.jsxs)(x.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(D.a,{ref:i,variant:"h4",style:{fontWeight:"bold"},children:"Fourier Coefficient Spaces"}),Object(S.jsx)(nt.a,{sx:{marginBottom:2}}),Object(S.jsxs)(ot,{children:["Below the wavescapes you see the respective"," ",Object(S.jsx)("b",{children:"Fourier Coefficient Spaces"}),". Each point in one of these spaces corresponds to the value of that Fourier coefficient for one of the MIDI file's segments."]}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/d8Pzxs6.png",scale:"90%"}),Object(S.jsx)(ot,{children:"Change the window length and see how the arrangement of the points changes, too."}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/pA1WR1E.png",scale:"45%"}),Object(S.jsx)(ot,{children:"Very short window lengths tend to distribute the segments of the piece more evenly throughout the circles. In contrast, long window lengths collapse the segments into a small area, and even into a single point if the window covers the entire piece (this corresponds to the topmost point of the wavescapes). It is therefore a good idea to try different window lengths in order to identify an appropriate level of detail, in which the piece moves along rather smooth paths in at least some coefficients. The gif below shows the effect of increasing the window size."}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/j3OeT3d.gif",scale:"90%"}),Object(S.jsx)(ot,{children:"Changing the parameters time resolution and window length yield different analytical perspectives on the piece and allow for a scalable and dynamic reading of a piece."}),Object(S.jsxs)(it,{children:[Object(S.jsx)("b",{children:"Note:"})," the wavescapes do not change because re-rendering them could last very long if the piece is long and the segmentation is too fine-grained."]})]}),Object(S.jsxs)(x.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(D.a,{ref:r,variant:"h4",style:{fontWeight:"bold"},children:"MIDI playback and overall layout"}),Object(S.jsx)(nt.a,{sx:{marginBottom:2}}),Object(S.jsx)(ot,{children:"On the bottom of the main window, there are options to control the playback of the uploaded MIDI file."}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/JOci5Ww.png",scale:"40%"}),Object(S.jsx)(ot,{children:"Several other options to change the visual layout of the app are available in the bottom menu. You can toggle:"}),Object(S.jsx)(D.a,{sx:{fontSize:20},component:"span",children:Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:"the full trace,"}),Object(S.jsx)("li",{children:"the prototypes (circular legends), and"}),Object(S.jsxs)("li",{children:["the values for phase and magnitude (",Object(S.jsx)(dt.a,{math:"\\phi"})," and"," ",Object(S.jsx)(dt.a,{math:"\\mu"}),")."]})]})}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/tD8U2GU.png",scale:"40%"}),Object(S.jsx)(ot,{children:"The size of the Fourier-space circles can also be adjusted relative to the size of your browser window."}),Object(S.jsx)(ot,{children:"You can modify the overall layout by selecting one of the pre-defined options on the far left (1x6, 2x3, 3x2, 6x1); the default is 2x3. On the top left, next to the file upload, you find an arrow to hide/show the main menu, e.g., to focus on the wavescapes and Fourier coefficients."}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/Ym4gr84.png",scale:"90%"})]}),Object(S.jsxs)(x.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(D.a,{ref:o,variant:"h4",style:{fontWeight:"bold"},children:"Manual entry of chords"}),Object(S.jsx)(nt.a,{sx:{marginBottom:2}}),Object(S.jsxs)(ot,{children:["Apart from uploading a musical piece as a MIDI file, the app also allows you to enter your favorite pitch-class sets. This can be useful if you want to show, for instance, certain chord progressions, harmonic sequences, or voice-leading chains. It can also be useful to display interesting pitch-class sets taken from a particular piece. Those can be entered in the"," ",Object(S.jsx)("b",{children:"Custom pitch-class vectors"})," field which allows for two basic input formats."]}),Object(S.jsx)(D.a,{sx:{fontSize:20},component:"span",children:Object(S.jsxs)("ol",{children:[Object(S.jsxs)("li",{children:["Pitch-class (multi-)sets are enclosed in curly braces"," ",Object(S.jsx)("code",{children:"{"})," and ",Object(S.jsx)("code",{children:"}"})," and contain pitch classes (integers ranging from 0 to 11). We allow for multiple occurrences of pitch classes, for example you can enter"," ",Object(S.jsx)("code",{children:"(0, 0, 4, 7, 10)"})," for a C dominant-seventh chord with doubled C."]}),Object(S.jsxs)("li",{children:["(Weighted) pitch-class vectors are enclosed in parentheses"," ",Object(S.jsx)("code",{children:"("})," and ",Object(S.jsx)("code",{children:")"}),", and must have twelve comma-separated non-negative numbers. Internally, these vectors are normalized to sum to one, so only the relative weights are taken into account. For the C dominant-seventh chord from above one would enter",Object(S.jsx)("code",{children:"(2,0,0,0,1,0,0,1,0,0,1,0)"}),"."]})]})}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/VLfxxV9.png",scale:"40%"}),Object(S.jsxs)(it,{children:[Object(S.jsx)("b",{children:"Note"}),": white space is ignored in the custom input field."]}),Object(S.jsx)(ot,{children:"The collection of manually entered pitch-class vectors is displayed below the input field. Entries in this collection can be toggled by clicking on them, or deleted by clicking on the x. When loading the app, three pitch-class vectors are already in the collection, and the first of them is active. They need to be deactivated or deleted if you don't want them to be displayed."}),Object(S.jsxs)(ot,{children:["This functionality can also be used to visualize pitch-class vectors from concrete compositions. Let's take the anacrusis of"," ",Object(S.jsx)(lt,{href:"https://imslp.org/wiki/3_Pieces,_Op.52_(Scriabin,_Aleksandr)",children:'Scriabin\u2019s op. 52/3 (1907) "Languorous Poem"'})," ","as a real-world example."]}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/cG9J08Z.png",scale:"35%"}),Object(S.jsxs)(ot,{children:["If we count each quarter note as 1 (and eight notes as 0.5), then its pitch-class content can be represented as the pitch-class vector ",Object(S.jsx)("code",{children:"(1.5, 0, 1, 0, 1, 1, 0, 0.5, 0, 0, 1.5, 0)"}),". The figure below shows with an asterisk where it is mapped to in the respective Fourier coefficient spaces."]}),Object(S.jsx)(rt,{alt:" ",src:"https://i.imgur.com/9x6GLVG.png",scale:"90%"}),Object(S.jsxs)(ot,{children:["If we count each quarter note as 1 (and eight notes as 0.5), then its pitch-class content can be represented as the pitch-class vector ",Object(S.jsx)("code",{children:"(1.5, 0, 1, 0, 1, 1, 0, 0.5, 0, 0, 1.5, 0)"}),". The figure below uses an asterisk to show where it is mapped to in the respective Fourier coefficient spaces."]}),Object(S.jsxs)(ot,{children:["This chord can be understood as a C7/9/11 chord despite the fact that the key signature indicates B major / G ",Object(S.jsx)("span",{children:"\u266f"})," ","minor. Being a dominant, it strongly points to the F-major prototype (marked by ",Object(S.jsx)("span",{children:"\u266d"})," ) in the fifth coefficient. Connoisseurs of Scriabin's harmonic language will recognize this chord as the tritone substitution of the extended dominant on F",Object(S.jsx)("span",{children:"\u266f"}),"."]}),Object(S.jsxs)(it,{children:[Object(S.jsx)("b",{children:"Note"}),": Of course you are free to enter any pitch-class vector. It does not need to correspond to standard chords but can also, for example, refer to segments (potentially non-contiguous) in an atonal composition."]})]}),Object(S.jsxs)(x.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(D.a,{ref:h,variant:"h4",style:{fontWeight:"bold"},children:"Using midiVERTO with MuseScore"}),Object(S.jsx)(nt.a,{sx:{marginBottom:2}}),Object(S.jsxs)(ot,{children:["The application and MuseScore can interact via MIDI messages. In order to communicate, we have to set up a virtual MIDI cable that connects MuseScore to the application:",Object(S.jsxs)("ul",{children:[Object(S.jsxs)("li",{children:[Object(S.jsx)("b",{children:"Windows"}),Object(S.jsxs)("ul",{children:[Object(S.jsxs)("li",{children:["Download and install"," ",Object(S.jsx)(lt,{href:"http://www.tobias-erichsen.de/software/loopmidi.html",children:"loopMIDI"})]}),Object(S.jsx)("li",{children:"Open loopMIDI and use the \u201c+\u201d and \u201c-\u201d buttons on the bottom to add or remove MIDI loopbacks. At least one loopback must be active"})]})]}),Object(S.jsxs)("li",{children:[Object(S.jsx)("b",{children:"macOS"}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:"Open Audio MIDI Setup in Applications \u2192 Utilities directory"}),Object(S.jsx)("li",{children:'Double click on IAC Driver and check the "Device is online" box'}),Object(S.jsx)("li",{children:"Add and remove buses in Ports tab, at least one must be active"})]})]}),Object(S.jsxs)("li",{children:[Object(S.jsx)("b",{children:"Linux"}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:'One virtual cable activated by default called "Midi Through Port-0"'}),Object(S.jsxs)("li",{children:["To add more virtual cables (3 in this example), use the commands: ",Object(S.jsx)("br",{}),Object(S.jsx)("code",{children:"sudo modprobe -r snd-seq-dummy"})," ",Object(S.jsx)("br",{}),Object(S.jsx)("code",{children:"sudo modprobe snd-seq-dummy ports=3"})]}),Object(S.jsxs)("li",{children:["To visualize and edit connections, install"," ",Object(S.jsx)("code",{children:"acconectgui"})]})]})]})]}),"Now we have to set up MuseScore to send MIDI messages via the virtual MIDI cable. In Edit \u2192 Preferences\u2026 \u2192 I/O \u2192 PortAudio \u2192 MIDI output, select the just created port. And only at the end open midiVERTO."]}),Object(S.jsxs)(it,{children:[Object(S.jsx)("b",{children:"Note:"})," Follow the steps in the suggested order. It may happen that MuseScore does not detect the MIDI port if it is already in use (for example by the application itself). Thus, set up the cable first, then open MuseScore and change the preferences and at the end open midiVERTO."]})]}),Object(S.jsxs)(x.a,{sx:{paddingBottom:5},children:[Object(S.jsx)(D.a,{ref:l,variant:"h4",style:{fontWeight:"bold"},children:"Download images"}),Object(S.jsx)(nt.a,{sx:{marginBottom:2}}),Object(S.jsxs)(ot,{children:["Finally, to download the results (e.g., for teaching purposes, a presentation, or a publication) click on ",Object(S.jsx)("b",{children:"EXPORT IMAGES"})," at the bottom of the main menu on the left."," "]})]})]})}),Object(S.jsx)(at,{})]})}var ut=Math.sin(Math.PI/3),bt=function(e){var t,a=e.wsNumber,n=e.wavescapeMatrix,s=e.currentWavescapeSubdiv,i=e.wavescapeWidth,r=e.wsPhantomCurveHeight,o=Object(c.useRef)(null),l=Object(c.useState)([]),d=Object(h.a)(l,2),j=d[0],u=d[1],b=10,x=i-b,f=i,p=Object(c.useState)(3),g=Object(h.a)(p,2),O=g[0],m=g[1];return Object(c.useEffect)((function(){x=i,f=i,m(O<1?1:Math.floor(.01*i))}),[i]),Object(c.useEffect)((function(){var e,a=o.current,s=a.getContext("2d"),c=[b,b],i=[a.width-c[0],a.height-c[1]];n&&(e=n[0].length,s.clearRect(0,0,s.canvas.width,s.canvas.height),t=function(e,t,a,n,s){for(var c=e/a,i=[],r=0;r<a+1;r++){for(var o=[],l=0;l<a+1;l++)r<=l&&o.push({x:(l-r)*c+r*c/2+n,y:r*c+s});i.push(o)}return i}(i[0],0,e,c[0],c[1]),u(t),function(e,t,a){for(var n=0;n<e.length-1;n++)for(var s=0;s<e[n].length-1;s++)0===n?(t.beginPath(),t.moveTo(e[n][s].x,e[n][s].y),t.lineTo(e[n][s+1].x,e[n][s+1].y),t.lineTo(e[n+1][s].x,e[n+1][s].y),t.fillStyle=a[n][s],t.fill()):(t.beginPath(),t.moveTo(e[n][s].x,e[n][s].y),t.lineTo(e[n-1][s+1].x,e[n-1][s+1].y),t.lineTo(e[n][s+1].x,e[n][s+1].y),t.lineTo(e[n+1][s].x,e[n+1][s].y),t.fillStyle=a[n][s],t.fill())}(t,s,n))}),[n,x,f]),Object(S.jsxs)("svg",{id:"wavescape".concat(a),width:x+b,height:f,xmlns:"http://www.w3.org/2000/svg",children:[Object(S.jsxs)("g",{transform:"translate(".concat(.06*x,",").concat(.1*x,")"),children:[Object(S.jsx)("circle",{cx:"5%",cy:"1%",r:"".concat(x/100*2.8,"px"),fill:"black"}),Object(S.jsx)("text",{fontSize:"".concat(x/100*5.2,"px"),textAnchor:"middle",x:"5%",y:"2.8%",fill:"white",children:a})]}),Object(S.jsxs)("g",{transform:"scale(".concat(1,", ",-ut,") translate(",0,",").concat(-f,")"),children:[Object(S.jsx)("foreignObject",{x:0,y:0,width:x,height:f,children:Object(S.jsx)("canvas",{width:x,height:f,ref:o})}),Object(S.jsx)("line",{x1:.5*r*x+5,y1:(f-20)*r+b,x2:-.5*r*x+x+5,y2:(f-20)*r+b,stroke:"black",strokeDasharray:"4 2"}),j.length>0?j[0].map((function(e,t){return Object(S.jsx)("line",{x1:e.x,x2:e.x,y1:e.y-O,y2:e.y+O,stroke:"grey",strokeWidth:"1px"},"tick".concat(t))})):null,j.length>0&&j[0].length>0?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("line",{x1:j[0][0].x,x2:j[0][j[0].length-1].x,y1:j[0][0].y,y2:j[0][j[0].length-1].y,stroke:"grey",strokeWidth:"2px"}),Object(S.jsx)("line",{x1:j[0][j[0].length-1].x,x2:j[j.length-1][0].x,y1:j[0][j[0].length-1].y,y2:j[j.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(S.jsx)("line",{x1:j[0][0].x,x2:j[j.length-1][0].x,y1:j[0][0].y,y2:j[j.length-1][0].y,stroke:"grey",strokeWidth:"1px"}),Object(S.jsx)("circle",{cx:(j[0][s].x+j[0][s+1].x)/2,cy:(j[0][s].y+j[0][s+1].y)/2,r:.01*x,fill:"white"}),Object(S.jsx)("circle",{cx:(j[0][s].x+j[0][s+1].x)/2,cy:(j[0][s].y+j[0][s+1].y)/2,r:.01*x,stroke:"black",strokeWidth:1,fill:"transparent"})]}):null]})]})};var xt=function(e){var t=e.wavescapesData,a=e.currentWavescapeSubdiv,n=e.elemsWidth,s=e.wsPhantomCurveHeight;return Object(S.jsx)(x.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:t.length>0?t.map((function(e,t){return Object(S.jsx)(bt,{wsNumber:t+1,wavescapeMatrix:e,currentWavescapeSubdiv:a,wavescapeWidth:n,wsPhantomCurveHeight:s},"w.".concat(t))})):Object(S.jsx)(D.a,{color:"error",children:"No midi file uploaded"})})},ft=a(439),pt=null;var gt=function(e){var t,a=e.coeffNumber,n=e.protoDataCoeff,s=e.fullTrace,i=e.traceDataCoeff,r=e.userPcvsCoeff,o=e.currentSubdiv,l=e.performanceCoeff,d=e.targetCircleWidth,j=e.showMagAndPhase,u=e.showFullTrace,b=Object(c.useRef)(null),p=Object(c.useState)({mu:0,phi:0}),g=Object(h.a)(p,2),O=g[0],m=g[1],v=445,y=v,w=45,k=177.5,C=.01;function I(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=180*Math.atan2(t,e)/Math.PI,s=Math.sqrt(e*e+t*t);return a&&(s/=k),n=Math.round(n+Number.EPSILON),{mu:s=Math.round(100*(s+Number.EPSILON))/100,phi:n}}function M(){var e=b.current.getContext("2d");e.fillStyle="rgba(0, 0, 0, 0.1)",i.forEach((function(t){e.beginPath(),e.arc(t.x*k,-t.y*k,2.225,0,2*Math.PI,!0),e.fill()}))}return Object(c.useEffect)((function(){var e=b.current,t=e.getContext("2d"),a=Math.floor(k*devicePixelRatio),n=t.createImageData(2*a,2*a),s=n.data;if(e.width=v*devicePixelRatio,e.height=y*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width="445px",e.style.height="445px",!pt){for(var c=-a;c<a;c++)for(var r=-a;r<a;r++){var o=Math.sqrt(c*c+r*r);if(!(o>a)){var l=4*(c+a+(r+a)*(2*a)),h=G(c,r,o/a);s[l]=h.r,s[l+1]=h.g,s[l+2]=h.b,s[l+3]=h.a}}pt=n}t.putImageData(pt,0,0),u&&i&&(t.save(),t.translate(177.5,177.5),M(),t.restore())}),[v,y,k,i,u]),Object(c.useEffect)((function(){if(i&&i[o]){var e=i[o].x,t=i[o].y;m(I(e,t))}}),[o,i]),Object(c.useEffect)((function(){b.current.getContext("2d").getImageData(0,0,1,1)}),[]),Object(c.useEffect)((function(){if(i){var e=b.current.getContext("2d");e.save(),e.translate(177.5,177.5),M(),e.restore()}}),[s]),Object(S.jsx)(x.a,{sx:{marginBottom:2},children:Object(S.jsxs)("svg",{width:d,height:d,viewBox:"0 0 ".concat(v," ").concat(y),xmlns:"http://www.w3.org/2000/svg",children:[Object(S.jsxs)("g",{transform:"translate(32,8)",children:[Object(S.jsx)("circle",{cx:"12",cy:"12",r:"13",fill:"black"}),Object(S.jsx)("text",{fontSize:"24",textAnchor:"middle",x:"12",y:"20",fill:"white",children:a})]}),Object(S.jsx)("g",{transform:"translate(".concat(125,",0)"),children:j?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("text",{x:"120",y:"23",style:{fontSize:"24px"},children:"\u03c6: ".concat(O.phi,"\xb0")}),Object(S.jsx)("text",{x:"34",y:"24",style:{fontSize:"24px"},children:"\u03bc: ".concat(O.mu)})]}):null}),Object(S.jsxs)("g",{transform:"translate(0,".concat(15,")"),children:[Object(S.jsx)("foreignObject",{x:w,y:w,width:v,height:y,children:Object(S.jsx)("canvas",{id:"circle".concat(a),style:{zIndex:"-1"},width:v,height:y,ref:b})}),Object(S.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(S.jsx)("path",{fill:"azure",d:L.a().innerRadius(176.5).outerRadius(180.5).startAngle(0).endAngle(2*Math.PI)()}),n?n.map((function(e,t){return function(e,t){var a=L.a().innerRadius(4.45).outerRadius(6.675).startAngle(0).endAngle(2*Math.PI),n="",s="",c=!1;if(e.label.includes("_")||e.label.includes("^"))for(var i=0;i<e.label.length;i++)"_"===e.label[i]&&(n=e.label.slice(0,i),s=e.label.slice(i+1,e.label.length),c=!0),"^"===e.label[i]&&(n=e.label.slice(0,i),s=e.label.slice(i+1,e.label.length));else n=e.label;var r=18*Math.sign(e.x),o=18*-Math.sign(e.y)+7;return"\u266f"===n&&(o-=3),"WT"===n&&"1"===s&&(r*=1.2),"WT"===n&&"0"===s&&(r*=1.4),"C"===n&&"o7"===s&&(r*=1.2),"O"===n&&"1,2"===s&&(o*=1.1),"C\u266f"===n&&"o7"===s&&(r*=1.1,o*=1.1),"D"===n&&"o7"===s&&(r*=.7,o*=.7),"H"===n&&"2,3"===s&&(r*=1.2,o*=1.2),"H"===n&&"1,2"===s&&(r*=.7,o*=.7),"\u03a9"===n&&(r=15,o=5),Object(S.jsxs)("g",{transform:"translate(".concat(e.x*k,",").concat(-e.y*k,")"),children:[Object(S.jsx)("path",{fill:"grey",d:a()},t),Object(S.jsxs)("text",{textAnchor:"middle",dx:r,dy:o,fontSize:"20px",children:[n,c?Object(S.jsx)("tspan",{fontSize:15,baselineShift:"sub",children:s}):Object(S.jsx)("tspan",{fontSize:15,baselineShift:"super",children:s})]})]},"p.".concat(t))}(e,t)})):null,0===l.x&&0===l.y?null:(t=l,Object(S.jsxs)("g",{transform:"translate(".concat(t.x*k,",").concat(-t.y*k,")"),children:[Object(S.jsx)("line",{x1:"0",x2:"0",y1:"7",y2:"-7",stroke:"black",strokeWidth:"1.5"}),Object(S.jsx)("line",{x1:"7",x2:"-7",y1:"0",y2:"0",stroke:"black",strokeWidth:"1.5"})]})),r?r.map((function(e,t){if(!e.isDisabled)return function(e,t,a,n,s,c){var i=I(a,n,!0),r=40;return Object(S.jsx)(ft.a,{placement:"top",arrow:!0,title:Object(S.jsxs)(f.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[Object(S.jsxs)("svg",{width:r,height:r,viewBox:"0 0 ".concat(r," ").concat(r),children:[Object(S.jsx)("circle",{cx:20,cy:20,r:20,strokeWidth:"1",fill:"#FFF",fillOpacity:1}),Object(S.jsx)("polyline",{transform:"translate(".concat(20,",").concat(20,") scale(",1.8,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]}),Object(S.jsxs)(f.a,{children:[Object(S.jsx)(D.a,{children:e}),Object(S.jsx)(D.a,{children:"\u03bc: ".concat(i.mu," \u03c6: ").concat(-i.phi,"\xb0")})]})]}),children:Object(S.jsxs)("g",{children:[Object(S.jsx)("polyline",{transform:"translate(".concat(a,",").concat(n,") scale(").concat(s,")"),fill:"none",stroke:"black",strokeWidth:"1px",fillOpacity:0,points:t}),Object(S.jsx)("polyline",{transform:"translate(".concat(a,",").concat(n,") scale(").concat(s,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:t})]})},"rtt.".concat(c))}(e.label,e.rosePoints,e.x*k,-e.y*k,.7,t)})):null,i?function(e){var t=L.a().innerRadius(0).outerRadius(e*v/2).startAngle(0).endAngle(2*Math.PI),a=L.a().innerRadius(e*v/2).outerRadius((e+.005)*v/2).startAngle(0).endAngle(2*Math.PI),n=[];n.push(1),n.push(.5);for(var s=2;s<7;s++)n.push(Math.round(100*(n[s-1]-.1))/100);return(o<7?i.slice(0,o+1):i.slice(o-7+1,o+1)).reverse().map((function(e,s){return Object(S.jsxs)("g",{children:[Object(S.jsx)("path",{transform:"translate(".concat(e.x*k,",").concat(-e.y*k,")"),fill:"white",fillOpacity:n[s],d:t()},s),Object(S.jsx)("path",{transform:"translate(".concat(e.x*k,",").concat(-e.y*k,")"),fill:"black",fillOpacity:n[s],d:a()},"t.".concat(s))]},"g.".concat(s))}))}(C):null]})]})]})})};var Ot=function(e){var t=e.fullTraces,a=e.coeffTracesData,n=e.showPrototypes,s=e.showMagAndPhase,i=e.userPcvs,r=e.currentSubdiv,o=e.midiDevNotesDftCoeffs,l=e.elemsWidth,d=e.showFullTrace,j=Object(c.useState)(Ae),u=Object(h.a)(j,2),b=u[0],f=u[1],p=Object(c.useState)([]),g=Object(h.a)(p,2),O=g[0],m=g[1];return Object(c.useEffect)((function(){f(n?Ae:[])}),[n]),Object(c.useEffect)((function(){for(var e=[],t=1;t<7;t++){for(var a=[],n=0;n<i.length;n++)a.push({x:i[n].coeffs[t].re,y:i[n].coeffs[t].im,rosePoints:i[n].rosePoints,isDisabled:i[n].isDisabled,label:i[n].label});e.push(a)}m(e)}),[i]),Object(S.jsx)(x.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[1,2,3,4,5,6].map((function(e){return Object(S.jsx)(gt,{coeffNumber:e,protoDataCoeff:b[e-1],fullTrace:t[e-1],traceDataCoeff:a[e-1],userPcvsCoeff:O[e-1],currentSubdiv:r,performanceCoeff:o[e],targetCircleWidth:l,showMagAndPhase:s,showFullTrace:d},"w.".concat(e))}))})},mt=a(471),vt=a(448),yt=a(440),wt=a(449),kt=null;var Ct=function(e){var t=e.fullTraces,a=e.coeffTracesData,n=(e.showPrototypes,e.showMagAndPhase,e.userPcvs,e.currentSubdiv),s=(e.midiDevNotesDftCoeffs,e.elemsWidth),i=(e.showFullTrace,Object(c.useRef)(null)),r=Object(c.useState)(1),o=Object(h.a)(r,2),l=o[0],d=o[1],j=Object(c.useState)(1),u=Object(h.a)(j,2),b=u[0],p=u[1],g=Object(c.useState)(10),O=Object(h.a)(g,2),m=O[0],v=O[1],y=Object(c.useState)({x:0,y:0}),w=Object(h.a)(y,2),k=w[0],C=w[1],I=Object(c.useState)([]),M=Object(h.a)(I,2),A=M[0],P=M[1],T=Object(c.useState)(!1),F=Object(h.a)(T,2),W=F[0],E=F[1];function R(e,t,a,n){var s={x:0,y:0};s.x=e.x*t.x-e.y*t.y,s.y=e.x*t.y+e.y*t.x;var c=s.x,i=s.y;return s.x=c*a.x-i*a.y*n,s.y=c*a.y*n+i*a.x,s}Object(c.useEffect)((function(){if(v(12-l-b),a[0]){var e,n=1;m>6?(e=12-m-1,n=-1):e=m-1;for(var s=[],c=0;c<t[0].length;c++)s.push(R(a[l-1][c],a[b-1][c],a[e][c],n));var i=0;if(W){for(var r=0;r<s.length;r++){var o,h=s[r];o=Math.sqrt(Math.pow(h.x,2)+Math.pow(h.y,2)),i+=Math.pow(o,2)}i=Math.sqrt(i);for(var d=[],j=0;j<s.length;j++){var u,x=s[j];u=Math.sqrt(Math.pow(x.x,2)+Math.pow(x.y,2));var f={x:0,y:0},p=Math.atan(x.y/x.x);f.x=u/i*Math.cos(p),f.y=u/i*Math.sin(p),d.push(f)}P(d)}else P(s)}}),[l,b,m,a,W]),Object(c.useEffect)((function(){A.length>0&&C(A[n])}),[n,A]),Object(c.useEffect)((function(){i.current.getContext("2d").getImageData(0,0,1,1)}),[]);var z=445,B=z,N=45,_=177.5;function H(){var e=i.current.getContext("2d");e.fillStyle="rgba(0, 0, 0, 0.1)",A.forEach((function(t){e.beginPath(),e.arc(t.x*_,-t.y*_,2.225,0,2*Math.PI,!0),e.fill()}))}return Object(c.useEffect)((function(){var e=i.current,t=e.getContext("2d"),a=Math.floor(_*devicePixelRatio),n=t.createImageData(2*a,2*a),s=n.data;if(e.width=z*devicePixelRatio,e.height=B*devicePixelRatio,t.scale(devicePixelRatio,devicePixelRatio),e.style.width="445px",e.style.height="445px",!kt){for(var c=-a;c<a;c++)for(var r=-a;r<a;r++){var o=Math.sqrt(c*c+r*r);if(!(o>a)){var l=4*(c+a+(r+a)*(2*a)),h=G(c,r,o/a);s[l]=h.r,s[l+1]=h.g,s[l+2]=h.b,s[l+3]=h.a}}kt=n}t.putImageData(kt,0,0),A.length>0&&(t.save(),t.translate(177.5,177.5),H(),t.restore())}),[z,B,_,A]),Object(c.useEffect)((function(){if(A){var e=i.current.getContext("2d");e.save(),e.translate(177.5,177.5),H(),e.restore()}}),[A]),Object(S.jsxs)(x.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[Object(S.jsx)(x.a,{sx:{width:"100%"},children:Object(S.jsxs)(f.a,{sx:{margin:"auto",marginBottom:1,marginTop:1,width:"80%"},direction:"row",children:[Object(S.jsx)(D.a,{sx:{marginLeft:1,marginRight:1,paddingTop:"20px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:" Coefficients:  "}),Object(S.jsxs)(le.a,{variant:"standard",sx:{minWidth:"20px"},children:[Object(S.jsx)(vt.a,{children:"First"}),Object(S.jsxs)(yt.a,{value:l,label:"Age",onChange:function(e){d(e.target.value)},children:[Object(S.jsx)(wt.a,{value:1,children:"1"}),Object(S.jsx)(wt.a,{value:2,children:"2"}),Object(S.jsx)(wt.a,{value:3,children:"3"}),Object(S.jsx)(wt.a,{value:4,children:"4"}),Object(S.jsx)(wt.a,{value:5,children:"5"}),Object(S.jsx)(wt.a,{value:6,children:"6"})]})]}),Object(S.jsx)(D.a,{sx:{marginLeft:1,marginRight:1,paddingTop:"20px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:" \xd7 "}),Object(S.jsxs)(le.a,{variant:"standard",sx:{minWidth:"50px"},children:[Object(S.jsx)(vt.a,{children:"Second"}),Object(S.jsxs)(yt.a,{value:b,label:"Age",onChange:function(e){p(e.target.value)},children:[Object(S.jsx)(wt.a,{value:1,children:"1"}),Object(S.jsx)(wt.a,{value:2,children:"2"}),Object(S.jsx)(wt.a,{value:3,children:"3"}),Object(S.jsx)(wt.a,{value:4,children:"4"}),Object(S.jsx)(wt.a,{value:5,children:"5"})]})]}),Object(S.jsx)(D.a,{sx:{marginLeft:1,marginRight:1,paddingTop:"20px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:" \xd7 "}),Object(S.jsx)(de.a,{inputProps:{style:{textAlign:"center"}},sx:{minWidth:"30px",width:"30px",marginTop:2},value:m,variant:"standard"}),Object(S.jsx)(mt.a,{sx:{marginTop:2,marginLeft:5},checked:W,onChange:function(e){E(e.target.checked)}}),Object(S.jsx)(D.a,{sx:{marginTop:3,fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"Normalization"})]})}),Object(S.jsxs)(x.a,{sx:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-around",marginTop:1,marginBottom:2},children:[Object(S.jsx)("svg",{width:s,height:s,viewBox:"0 0 ".concat(z," ").concat(B),xmlns:"http://www.w3.org/2000/svg",children:Object(S.jsxs)("g",{transform:"translate(0,".concat(15,")"),children:[Object(S.jsx)("foreignObject",{x:N,y:N,width:z,height:B,children:Object(S.jsx)("canvas",{id:"circle".concat(1),style:{zIndex:"-1"},width:z,height:B,ref:i})}),Object(S.jsx)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:Object(S.jsx)("path",{fill:"azure",d:L.a().innerRadius(176.5).outerRadius(180.5).startAngle(0).endAngle(2*Math.PI)()})}),Object(S.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(S.jsx)("line",{x1:-222.5,y1:0,x2:222.5,y2:0,stroke:"black"}),Object(S.jsx)("line",{x1:0,y1:-222.5,x2:0,y2:222.5,stroke:"black"}),Object(S.jsx)("circle",{cx:k.x*_,cy:-k.y*_,r:"6"}),Object(S.jsx)("circle",{cx:k.x*_,cy:-k.y*_,r:"3",fill:"white"})]})]})}),Object(S.jsx)("svg",{width:s,height:s,viewBox:"0 0 ".concat(z," ").concat(B),xmlns:"http://www.w3.org/2000/svg",children:Object(S.jsx)("g",{transform:"translate(0,".concat(15,")"),children:Object(S.jsxs)("g",{transform:"translate(".concat(222.5,",").concat(222.5,")"),children:[Object(S.jsx)("line",{x1:-222.5,y1:0,x2:222.5,y2:0,stroke:"black"}),Object(S.jsx)("line",{x1:0,y1:-222.5,x2:0,y2:222.5,stroke:"black"}),Object(S.jsx)("circle",{cx:k.x*_,cy:k.y*_,r:"5"})]})})})]})]})},Dt=a(445),St=a(472),It=a(473),Mt=a(124),At=a.n(Mt),Pt=Object(C.a)($.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(d.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(400,"px)"),marginLeft:"".concat(400,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}));var Tt,Ft,Wt=function(e){var t=e.fileName,a=e.setInAnalysisPage,n=e.open,s=e.setOpen,i=e.wavescapesData,r=e.fullTraces,o=e.coeffTracesData,l=e.currentSubdiv,d=e.currentWavescapeSubdiv,j=e.userPcvs,u=e.wsPhantomCurveHeight,f=Object(c.useState)(!0),p=Object(h.a)(f,2),g=p[0],O=p[1],m=Object(c.useState)(!0),v=Object(h.a)(m,2),y=v[0],w=v[1],C=Object(c.useState)(!0),I=Object(h.a)(C,2),M=I[0],A=I[1],P=Object(c.useState)(N([0,0,0,0,0,0,0,0,0,0,0,0]).map((function(e){return{x:e.re,y:e.im}}))),T=Object(h.a)(P,2),W=T[0],E=T[1],R=Object(c.useRef)(null),z=Object(c.useState)(100),B=Object(h.a)(z,2),_=B[0],L=B[1],H=Object(c.useState)(3),V=Object(h.a)(H,2),G=V[0],q=V[1],U=Object(c.useState)(440),J=Object(h.a)(U,2),Y=J[0],K=J[1];function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=10;R.current&&K((R.current.clientWidth+e)/G-t)}function Z(){X(0)}return Object(c.useEffect)((function(){a(!0),s(!0),X(),window.addEventListener("resize",Z)}),[]),Object(c.useEffect)((function(){A(!0)}),[r]),Object(c.useEffect)((function(){X(),window.addEventListener("resize",Z)}),[G]),Object(c.useEffect)((function(){X(n?-400:400)}),[n]),Object(c.useEffect)((function(){X()}),[_]),Object(c.useEffect)((function(){var e=[],t=new b.c({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function a(a){var n=a.data[0];if(144===n||128===n){var s=b.a(a.data[1],"midi").toNote();if(128!==n||e.includes(s)){var c=Math.round(.05*a.data[2]);switch(n){case 144:c>0?(t.triggerAttack(s,b.f(),c),e.push(s)):(t.triggerRelease(s,b.f()),e=e.filter((function(e){return e!==s})));break;case 128:t.triggerRelease(s,b.f()),e=e.filter((function(e){return e!==s}))}!function(e){var t=[0,0,0,0,0,0,0,0,0,0,0,0];e.forEach((function(e){switch(e.includes("#")?e.slice(0,2):e.slice(0,1)){case"C":t[0]+=1;break;case"C#":t[1]+=1;break;case"D":t[2]+=1;break;case"D#":t[3]+=1;break;case"E":t[4]+=1;break;case"F":t[5]+=1;break;case"F#":t[6]+=1;break;case"G":t[7]+=1;break;case"G#":t[8]+=1;break;case"A":t[9]+=1;break;case"A#":t[10]+=1;break;case"B":t[11]+=1}}));var a=N(t);a=a.map((function(e){return{x:e.re,y:e.im}})),E(a)}(e)}}}function n(e){console.log("Name: ".concat(e.port.name,", Brand: ").concat(e.port.manufacturer,", State: ").concat(e.port.state,", Type: ").concat(e.port.type))}t.volume.value=-30,navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then((function(e){e.onstatechange=n,e.inputs.forEach((function(e){e.onmidimessage=a}))}),(function(){console.log("Could not connect MIDI")}))}),[]),Object(S.jsxs)(x.a,{children:[Object(S.jsxs)(x.a,{sx:{padding:0,margin:"auto",marginBottom:"70px",width:"".concat(_,"%")},children:[Object(S.jsxs)(Dt.a,{defaultExpanded:!0,children:[Object(S.jsx)(St.a,{expandIcon:Object(S.jsx)(At.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(S.jsx)(D.a,{variant:"h6",children:"Wavescapes"})}),Object(S.jsx)(It.a,{ref:R,sx:{padding:0},children:Object(S.jsx)(xt,{wavescapesData:i,currentWavescapeSubdiv:d,elemsWidth:Y,wsPhantomCurveHeight:u})})]}),Object(S.jsxs)(Dt.a,{defaultExpanded:!0,children:[Object(S.jsx)(St.a,{expandIcon:Object(S.jsx)(At.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(S.jsx)(D.a,{variant:"h6",children:"Fourier Coefficient Spaces"})}),Object(S.jsx)(It.a,{sx:{padding:0},children:Object(S.jsx)(Ot,{fullTraces:r,coeffTracesData:o,currentSubdiv:l,showPrototypes:g,showMagAndPhase:y,showFullTrace:M,userPcvs:j,midiDevNotesDftCoeffs:W,elemsWidth:Y})})]}),Object(S.jsxs)(Dt.a,{defaultExpanded:!0,children:[Object(S.jsx)(St.a,{expandIcon:Object(S.jsx)(At.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(S.jsx)(D.a,{variant:"h6",children:"Phase"})}),Object(S.jsx)(It.a,{sx:{padding:0},children:Object(S.jsx)(Ct,{fullTraces:r,coeffTracesData:o,currentSubdiv:l,showPrototypes:g,showMagAndPhase:y,showFullTrace:M,userPcvs:j,midiDevNotesDftCoeffs:W,elemsWidth:Y})})]})]}),Object(S.jsx)(Pt,{position:"fixed",open:n,color:"secondary",sx:{top:"auto",bottom:0,maxHeight:"74px"},children:Object(S.jsxs)(ee.a,{children:[Object(S.jsx)(x.a,{sx:{minWidth:120},children:Object(S.jsxs)(le.a,{size:"small",variant:"standard",fullWidth:!0,children:[Object(S.jsx)(vt.a,{children:"Layout"}),Object(S.jsxs)(yt.a,{value:G,label:"Layout",onChange:function(e){L(100),q(e.target.value)},children:[Object(S.jsx)(wt.a,{value:6,children:"1x6"}),Object(S.jsx)(wt.a,{value:3,children:"2x3"}),Object(S.jsx)(wt.a,{value:2,children:"3x2"}),Object(S.jsx)(wt.a,{value:1,children:"6x1"})]})]})}),Object(S.jsx)(F,{fileName:t,currentWavescapeSubdiv:d}),Object(S.jsx)(x.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5%",maxWidth:"100px",justifyContent:"space-evenly"},children:Object(S.jsxs)(Re.a,{children:[Object(S.jsx)(he.a,{control:Object(S.jsx)(mt.a,{onChange:function(){A(!M)},checked:M,size:"small"}),label:Object(S.jsx)(D.a,{noWrap:!0,children:"Show full trace"})}),Object(S.jsx)(he.a,{control:Object(S.jsx)(mt.a,{onChange:function(){O(!g)},checked:g,size:"small"}),label:Object(S.jsx)(D.a,{noWrap:!0,children:"Show Prototypes"})}),Object(S.jsx)(he.a,{control:Object(S.jsx)(mt.a,{onChange:function(){w(!y)},checked:y,size:"small"}),label:Object(S.jsx)(D.a,{noWrap:!0,children:"Show \u03bc and \u03c6"})})]})}),Object(S.jsxs)(x.a,{sx:{minWidth:"20%",padding:"1% 3% 1% 2%",marginTop:1},children:[Object(S.jsx)(D.a,{children:"Plots size"}),Object(S.jsx)(k.a,{min:20,max:100,value:_,defaultValue:100,"aria-label":"Plots size",valueLabelDisplay:"auto",onChange:function(e,t){L(t)},marks:[{value:20,label:"20%"},{value:50,label:"50%"},{value:100,label:"100%"}]})]})]})})]})},Et=a(30),Rt=a(437),zt=a(451),Bt=a(190),Nt=a.n(Bt),_t=80,Lt=Object(C.a)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(d.a)({flexGrow:1,padding:t.spacing(3),backgroundColor:"#e0e0e0",transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(400,"px")},a&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0,backgroundColor:"#e0e0e0"})})),Ht=Object(C.a)("div")((function(e){var t=e.theme;return Object(d.a)(Object(d.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"space-between"})}));var Vt=function(){var e=Object(Et.a)(),t=Object(c.useState)(!1),a=Object(h.a)(t,2),n=a[0],s=a[1],i=Object(c.useState)(""),r=Object(h.a)(i,2),o=r[0],d=r[1],b=Object(c.useState)(!1),p=Object(h.a)(b,2),g=p[0],O=p[1],m=Object(c.useState)([]),v=Object(h.a)(m,2),y=v[0],C=v[1],I=Object(c.useState)([]),M=Object(h.a)(I,2),A=M[0],T=M[1],F=Object(c.useState)([]),W=Object(h.a)(F,2),E=W[0],R=W[1],B=Object(c.useState)([]),L=Object(h.a)(B,2),H=L[0],V=L[1],G=Object(c.useState)(0),Z=Object(h.a)(G,2),$=Z[0],ee=Z[1],ae=Object(c.useState)(0),ne=Object(h.a)(ae,2),ce=ne[0],re=ne[1],oe=Object(c.useState)(1),le=Object(h.a)(oe,2),he=le[0],je=le[1],ue=Object(c.useState)({noteResolutionValue:1,seconds:1.5,useSeconds:!1}),be=Object(h.a)(ue,2),xe=be[0],fe=be[1],ge=Object(c.useState)(10),me=Object(h.a)(ge,2),ye=me[0],we=me[1],ke=Object(c.useState)(1),Ce=Object(h.a)(ke,2),De=Ce[0],Se=Ce[1],Ie=Object(c.useState)("sum"),Me=Object(h.a)(Ie,2),Ae=(Me[0],Me[1],Object(c.useState)("incremental")),Pe=Object(h.a)(Ae,2),Te=(Pe[0],Pe[1],Object(c.useState)(1)),Fe=Object(h.a)(Te,2),We=(Fe[0],Fe[1],Object(c.useState)(0)),Ee=Object(h.a)(We,2),Re=Ee[0],ze=Ee[1],Be=Object(c.useState)(!1),Ne=Object(h.a)(Be,2),Le=Ne[0],He=Ne[1],Ve=Object(c.useState)("1"),Ge=Object(h.a)(Ve,2),qe=Ge[0],Ue=Ge[1],Je=Object(c.useState)([]),Ye=Object(h.a)(Je,2),Ke=Ye[0],Xe=Ye[1],Ze=Object(c.useRef)(null),Qe=Object(c.useState)(!1),$e=Object(h.a)(Qe,2),et=$e[0],tt=$e[1],at=Object(c.useState)([]),st=Object(h.a)(at,2),ct=st[0],it=st[1];function rt(e){var t,a=[];try{t=function(e){for(var t=[],a=!1,n=!1,s=0;s<e.length;s++)if("{"!==e[s]&&"("!==e[s]||(a=!0,"{"===e[s]&&(n=!0)),a){for(var c=[],i=s+1;"}"!==e[i]&&")"!==e[i];i++){if(","!==e[i]&&"."!==e[i]&&" "!==e[i]&&isNaN(parseFloat(e[i])))throw new Error("Found NaN");" "!==e[i]&&c.push(e[i])}if(""===(c=c.join("")))throw new Error("Empty input");for(var r=[],o=0,l=0;l<c.length;l++){if(","===c[l]){var h=c.slice(l-o,l);if(0===h.length)throw new Error("Two consecutive comas");r.push(+h),o=-1}o++}var d=c.slice(c.length-o,c.length);if(0===d.length)throw new Error("Missing last number");if(r.push(+d),n){for(var j=[0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<r.length;u++){if(r[u]<0||r[u]>=12)throw new Error("Set notation: out of range");j[r[u]]+=1}t.push(j)}else{if(12!==r.length)throw new Error("Vectorial notation: missing elements");t.push(r)}a=!1,n=!1,s+=o}if(0===t.length)throw new Error("Invalid input");return t}(e)}catch(n){return console.log(n.message),void tt(!0)}t.forEach((function(e){return a.push({label:"(".concat(e,")"),isDisabled:!1,coeffs:N(e,!0,!0,!1),rosePoints:[],n:-1,d:-1})})),Ke.map((function(e){return e.label})).forEach((function(e){a=a.filter((function(t){return t.label!==e}))})),a.forEach((function(e){for(var t=!1,a=0;a<ct.length&&!t;a++)for(var n=0;n<ct[a].length&&!t;n++)ct[a][n].usable&&!ct[a][n].used&&(t=!0,e.rosePoints=ct[a][n].points,ct[a][n].used=!0,e.n=ct[a][n].n,e.d=ct[a][n].d)})),Xe([].concat(Object(l.a)(Ke),Object(l.a)(a)))}return Object(c.useEffect)((function(){H.length>0&&($>=A[0].length?re(A[0].length-1):re($))}),[$]),Object(c.useEffect)((function(){var e;A.length>0&&ze(he/A[0].length),1===he?V(A):(e=K(E,he),V(e))}),[he,A]),Object(c.useEffect)((function(){var e=document.getElementById("file").files[0];if(e){var t=new FileReader;t.readAsArrayBuffer(e),t.onload=function(t){try{var a=function(e){var t=new z.Midi(e),a=t.header.tempos.map((function(e){return Math.round(e.bpm)})),n=Math.max.apply(Math,Object(l.a)(a)),s=t.tracks.filter((function(e){return!1===e.instrument.percussion}));return t.tracks=s,{midiData:t,midiBpm:n}}(t.target.result),n=a.midiData,s=a.midiBpm;_t=s,Tt=n,Ft=e.name;var c=Tt.duration/50;we(c),C(function(e){for(var t=[],a=0;a<6;a++){for(var n=[],s=0;s<e.length;s++){for(var c=[],i=0;i<e[s].length;i++)c.push("");n.push(c)}t.push(n)}for(var r=0;r<e.length;r++)for(var o=0;o<e[r].length;o++)for(var l=1;l<e[r][o].length;l++)t[l-1][r][o]=q(e[r][o][l]);return t}(function(e,t){var a=[];e.tracks.forEach((function(n){return a.push(Y(n.notes,t,e.duration))}));for(var n=[],s=0;s<a[0].length;s++)n.push(new U);for(var c=0;c<a.length;c++)for(var i=0;i<a[c].length;i++)for(var r=0;r<a[c][i].length;r++){var o=a[c][i][r],l=o.pitch,h=o.duration;n[i].addNoteDuration(l,h)}var d=(n=X(n)).map((function(e){return N(e.getPcvAsArray(),!1)})),j=[];j.push(d);for(var u=j[0].length,b=j[0].length,x=2,f=1;f<u;f++){for(var p=[],g=0;g+x<=b;g++){var O=j[0].slice(g,g+x);p.push(_(O))}x++,j.push(p)}return j}(n,c)));var i=J(n,xe,_t),r=i.tracesData,o=i.resolution,h=i.currPcDistributions;Se(o),T(r),R(h),P(Tt,o,ee),je(1),Ue("1")}catch(d){return void console.log(d)}}}}),[o]),Object(c.useEffect)((function(){for(var e=[],t=1;t<=7;t++){for(var a=[],n=1;n<=7;n++){var s={n:n,d:t,used:!1,usable:!0,points:[]};n%t===0&&1!==t&&(s.usable=!1),!0===s.usable&&(s.points=Q(n,t)),a.push(s)}e.push(a)}e[0][0].usable=!1,it(e);var c=[[1,0,0,0,1,0,0,1,0,0,0,0],[1,0,0,1,0,0,0,1,0,0,0,0],[1,0,0,1,0,0,1,0,0,0,0,0]].map((function(e){return{label:"(".concat(e.toString(),")"),isDisabled:!1,coeffs:N(e,!0,!0,!1),rosePoints:[],n:-1,d:-1}}));c.forEach((function(t){for(var a=!1,n=0;n<e.length&&!a;n++)for(var s=0;s<e[n].length&&!a;s++)e[n][s].usable&&!e[n][s].used&&(a=!0,t.rosePoints=e[n][s].points,e[n][s].used=!0,t.n=e[n][s].n,t.d=e[n][s].d)})),c[1].isDisabled=!0,c[2].isDisabled=!0,Xe(c)}),[]),Object(S.jsxs)(j.a,{children:[Object(S.jsx)(Rt.a,{}),Object(S.jsx)(ie,{open:n,setOpen:s,setInAnalysisPage:O,inAnalysisPage:g}),Object(S.jsxs)(x.a,{sx:{display:"flex"},children:[Object(S.jsxs)(zt.a,{sx:{width:400,flexShrink:0,"& .MuiDrawer-paper":{width:400,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:n,children:[Object(S.jsxs)(Ht,{children:[Object(S.jsxs)(f.a,{sx:{flexGrow:"2",maxWidth:"85%",marginBottom:1},children:[Object(S.jsx)(D.a,{sx:{fontWeight:"bold"},children:"Upload a midi file"}),Object(S.jsxs)(f.a,{spacing:2,direction:"row",sx:{alignItems:"center"},children:[Object(S.jsxs)("label",{htmlFor:"file",children:[Object(S.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"file",value:o,onChange:function(e){return d(e.target.value)}}),Object(S.jsx)(te.a,{variant:"contained",size:"small",color:"primary",component:"span",children:"Upload"})]}),Object(S.jsx)(D.a,{noWrap:!0,color:Ft?"primary":"error",children:y.length>0?Ft:"No midi file uploaded"})]})]}),Object(S.jsx)(w.a,{onClick:function(){s(!1)},children:"ltr"===e.direction?Object(S.jsx)(Nt.a,{}):Object(S.jsx)(se.a,{})})]}),Object(S.jsx)(nt.a,{}),Object(S.jsx)(D.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Time resolution"}),Object(S.jsx)(x.a,{sx:{display:"flex",alignItems:"center",margin:"2% 5% 0 2%",width:"90%",justifyContent:"space-evenly"},children:Object(S.jsx)(pe,{setResolutionMode:fe,resolutionMode:xe,retriggerAnalysis:function(){if(null!=Tt){var e=J(Tt,xe,_t),t=e.tracesData,a=e.resolution,n=e.currPcDistributions;Se(a),T(t),R(n),P(Tt,a,ee),je(1),Ue("1")}}})}),Object(S.jsx)(nt.a,{}),Object(S.jsx)(D.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Window Length"}),Object(S.jsxs)(f.a,{sx:{margin:"auto",marginBottom:1,marginTop:1},direction:"row",children:[Object(S.jsx)(D.a,{sx:{marginLeft:1,paddingTop:"5px",marginRight:"5px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"="}),Object(S.jsx)(de.a,{inputProps:{style:{textAlign:"center"}},sx:{width:"15%"},error:Le,onChange:function(e){Ue(e.target.value);var t=parseInt(e.target.value);isNaN(t)?He(!0):(He(!1),A.length>0?t<1?(He(!0),je(1)):t>A[0].length?(He(!0),je(A[0].length)):je(t):je(t))},value:qe,variant:"standard"}),Object(S.jsx)(D.a,{sx:{marginLeft:1,paddingTop:"5px",fontSize:"18px"},variant:"h5",gutterBottom:!0,children:"\xd7 time resolution"})]}),Object(S.jsx)(k.a,{sx:{margin:"auto",width:"80%",marginBottom:3,marginTop:1,heigth:"10%"},value:he,onChange:function(e,t){je(t),Ue(t)},"aria-label":"Window Length",defaultValue:1,valueLabelDisplay:"auto",min:1,max:A.length>0?A[0].length:100,marks:A.length>0?[{value:1,label:"1"},{value:A[0].length,label:"".concat(A[0].length)}]:[{value:1,label:"1"},{value:100,label:"100"}]}),Object(S.jsx)(nt.a,{}),Object(S.jsx)(D.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Custom pitch-class vectors"}),Object(S.jsxs)(x.a,{sx:{flexDirection:"column",display:"flex",alignItems:"center",margin:"3% 5%",height:"40%",maxHeight:"350px",justifyContent:"flex-start"},component:"form",noValidate:!0,autoComplete:"off",children:[Object(S.jsx)(de.a,{fullWidth:!0,error:et,helperText:et&&"Invalid input",id:"outlined-basic",label:"e.g. {0,0,4,7,10} (2,0,0,0,1,0,0,1,0,0,1,0)",variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),rt(Ze.current.value),Ze.current.value="")},onChange:function(){tt(!1)},inputRef:Ze}),Object(S.jsx)(ve,{userPcvs:Ke,setUserPcvs:Xe,rosesMat:ct})]}),Object(S.jsx)(nt.a,{}),Object(S.jsx)(D.a,{sx:{marginLeft:1,marginTop:1,fontWeight:"bold"},children:"Legend of coefficients"}),Object(S.jsx)(x.a,{sx:{margin:"5px 10px"},children:Object(S.jsx)(Oe.a,{children:Object(S.jsxs)(f.a,{children:[Object(S.jsxs)(f.a,{direction:"row",children:[Object(S.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(S.jsx)("circle",{cx:"12",cy:"12",r:"8",fill:"black"}),Object(S.jsx)("text",{fontSize:"15",textAnchor:"middle",x:"12",y:"17",fill:"white",children:"k"})]}),"Fourier coefficient number"]}),Object(S.jsxs)(f.a,{direction:"row",children:[Object(S.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(S.jsx)("circle",{cx:"12",cy:"12",r:"6",fill:"black"})}),"MIDI file segments"]}),Object(S.jsxs)(f.a,{direction:"row",children:[Object(S.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(S.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"white"}),Object(S.jsx)("circle",{cx:"12",cy:"12",r:"5",fill:"none",stroke:"black",strokeWidth:"3px"})]}),"MIDI playback"]}),Object(S.jsxs)(f.a,{direction:"row",children:[Object(S.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(S.jsxs)("g",{transform:"translate(12,12)",children:[Object(S.jsx)("line",{x1:"0",x2:"0",y1:"7",y2:"-7",stroke:"black",strokeWidth:"1.5"}),Object(S.jsx)("line",{x1:"7",x2:"-7",y1:"0",y2:"0",stroke:"black",strokeWidth:"1.5"})]})}),"MIDI controller input"]}),Object(S.jsxs)(f.a,{direction:"row",children:[Object(S.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(S.jsx)("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"grey",strokeWidth:"2px"})}),"Prototypes"]}),Object(S.jsxs)(f.a,{direction:"row",children:[Object(S.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:ct.length>0?Object(S.jsx)("polyline",{transform:"translate(".concat(12,",",12,")"),fill:"none",stroke:"black",strokeWidth:"1px",points:ct[3][0].points}):null}),"Custom pitch-class vectors"]})]})})}),Object(S.jsx)(_e,{traces:H,userPcvs:Ke,wavescapesData:y,wsPhantomCurveHeight:Re})]}),Object(S.jsx)(Lt,{open:n,children:Object(S.jsxs)(u.c,{children:[Object(S.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(S.jsx)(ht,{setOpen:s,setInAnalysisPage:O})}}),Object(S.jsx)(u.a,{exact:!0,path:"/theory",render:function(){return Object(S.jsx)(jt,{setOpen:s,setInAnalysisPage:O})}}),Object(S.jsx)(u.a,{exact:!0,path:"/analysis",render:function(){return Object(S.jsx)(Wt,{fileName:Ft,setInAnalysisPage:O,open:n,setOpen:s,wavescapesData:y,fullTraces:A,coeffTracesData:H,currentSubdiv:ce,currentWavescapeSubdiv:Math.floor($*De/ye),userPcvs:Ke,wsPhantomCurveHeight:Re})}})]})})]})]})},Gt=a(150),qt=a(450),Ut=Object(Gt.a)({palette:{primary:{main:"#323232"},secondary:{main:"#fefefe"},background:{default:"#e0e0e0"}}});o.a.render(Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsx)(qt.a,{theme:Ut,children:Object(S.jsx)(Vt,{})})}),document.getElementById("root"))}},[[369,1,2]]]);
//# sourceMappingURL=main.73c54c14.chunk.js.map